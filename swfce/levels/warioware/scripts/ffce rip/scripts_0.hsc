; Extracted with Reclaimer

(script static void 10_sec_warning
    (begin
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\ten_secs_remaining" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "time_10_sec")
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 15_min_warning
    (begin
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\fifteen_mins_remaining" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "time_15_min")
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 1_ai_left
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_1_ai_remaining" "none" 1)
        )
        (set 1_ai_announced 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_1_ai")
        (mark_last_5_enemies)
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 1_min_warning
    (begin
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\one_min_remaining" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "time_1_min")
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 2_ai_left
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_2_ai_remaining2" "none" 1)
        )
        (set 2_ai_announced 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_2_ai")
        (mark_last_5_enemies)
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 30_min_warning
    (begin
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\thirty_mins_remaining" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "time_30_min")
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 30_sec_warning
    (begin
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\thirty_secs_remaining" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "time_30_sec")
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 5_ai_left
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_5_ai_remaining2" "none" 1)
        )
        (set 5_ai_announced 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_5_ai")
        (mark_last_5_enemies)
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void 5_min_warning
    (begin
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\five_mins_remaining" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "time_5_min")
        (sleep 120)
        (show_hud_help_text 0)
    )
)

(script static void add_equipment
    (begin
        (if (= player_pri_weap_id 17)
            (random_pri_weapon)
        )
        (if (= player_sec_weap_id 17)
            (random_sec_weapon)
        )
        (player_add_equipment (player0) "ff_unarmed" 1)
        (player_add_equipment (player1) "ff_unarmed" 1)
        (if (= player_pri_weap_id 0)
            (begin
                (player_add_equipment (player0) "ff_ar" 0)
                (player_add_equipment (player1) "ff_ar" 0)
            )
        )
        (if (= player_pri_weap_id 1)
            (begin
                (player_add_equipment (player0) "ff_pistol" 0)
                (player_add_equipment (player1) "ff_pistol" 0)
            )
        )
        (if (= player_pri_weap_id 2)
            (begin
                (player_add_equipment (player0) "ff_shotgun" 0)
                (player_add_equipment (player1) "ff_shotgun" 0)
            )
        )
        (if (= player_pri_weap_id 3)
            (begin
                (player_add_equipment (player0) "ff_sniper" 0)
                (player_add_equipment (player1) "ff_sniper" 0)
            )
        )
        (if (= player_pri_weap_id 4)
            (begin
                (player_add_equipment (player0) "ff_rlauncher" 0)
                (player_add_equipment (player1) "ff_rlauncher" 0)
            )
        )
        (if (= player_pri_weap_id 5)
            (begin
                (player_add_equipment (player0) "ff_flame" 0)
                (player_add_equipment (player1) "ff_flame" 0)
            )
        )
        (if (= player_pri_weap_id 6)
            (begin
                (player_add_equipment (player0) "ff_pp" 0)
                (player_add_equipment (player1) "ff_pp" 0)
            )
        )
        (if (= player_pri_weap_id 7)
            (begin
                (player_add_equipment (player0) "ff_pr" 0)
                (player_add_equipment (player1) "ff_pr" 0)
            )
        )
        (if (= player_pri_weap_id 8)
            (begin
                (player_add_equipment (player0) "ff_needler" 0)
                (player_add_equipment (player1) "ff_needler" 0)
            )
        )
        (if (= player_pri_weap_id 9)
            (begin
                (player_add_equipment (player0) "ff_frg" 0)
                (player_add_equipment (player1) "ff_frg" 0)
            )
        )
        (if (= player_pri_weap_id 10)
            (begin
                (player_add_equipment (player0) "ff_chaingun" 0)
                (player_add_equipment (player1) "ff_chaingun" 0)
            )
        )
        (if (= player_pri_weap_id 11)
            (begin
                (player_add_equipment (player0) "ff_smg" 0)
                (player_add_equipment (player1) "ff_smg" 0)
            )
        )
        (if (= player_pri_weap_id 12)
            (begin
                (player_add_equipment (player0) "ff_ma5" 0)
                (player_add_equipment (player1) "ff_ma5" 0)
            )
        )
        (if (= player_pri_weap_id 13)
            (if (> player_inf_ammo_mode_id 0)
                (begin
                    (player_add_equipment (player0) "ff_sword_unlimited" 0)
                    (player_add_equipment (player1) "ff_sword_unlimited" 0)
                )
                (begin
                    (player_add_equipment (player0) "ff_sword" 0)
                    (player_add_equipment (player1) "ff_sword" 0)
                )
            )
        )
        (if (= player_pri_weap_id 14)
            (begin
                (player_add_equipment (player0) "ff_sentinel_beam" 0)
                (player_add_equipment (player1) "ff_sentinel_beam" 0)
            )
        )
        (if (= player_pri_weap_id 15)
            (begin
                (player_add_equipment (player0) "ff_skull" 0)
                (player_add_equipment (player1) "ff_skull" 0)
            )
        )
        (if (= player_pri_weap_id 16)
            (begin
                (player_add_equipment (player0) "ff_flag" 0)
                (player_add_equipment (player1) "ff_flag" 0)
            )
        )
        (if (= player_sec_weap_id 0)
            (begin
                (player_add_equipment (player0) "ff_ar" 0)
                (player_add_equipment (player1) "ff_ar" 0)
            )
        )
        (if (= player_sec_weap_id 1)
            (begin
                (player_add_equipment (player0) "ff_pistol" 0)
                (player_add_equipment (player1) "ff_pistol" 0)
            )
        )
        (if (= player_sec_weap_id 2)
            (begin
                (player_add_equipment (player0) "ff_shotgun" 0)
                (player_add_equipment (player1) "ff_shotgun" 0)
            )
        )
        (if (= player_sec_weap_id 3)
            (begin
                (player_add_equipment (player0) "ff_sniper" 0)
                (player_add_equipment (player1) "ff_sniper" 0)
            )
        )
        (if (= player_sec_weap_id 4)
            (begin
                (player_add_equipment (player0) "ff_rlauncher" 0)
                (player_add_equipment (player1) "ff_rlauncher" 0)
            )
        )
        (if (= player_sec_weap_id 5)
            (begin
                (player_add_equipment (player0) "ff_flame" 0)
                (player_add_equipment (player1) "ff_flame" 0)
            )
        )
        (if (= player_sec_weap_id 6)
            (begin
                (player_add_equipment (player0) "ff_pp" 0)
                (player_add_equipment (player1) "ff_pp" 0)
            )
        )
        (if (= player_sec_weap_id 7)
            (begin
                (player_add_equipment (player0) "ff_pr" 0)
                (player_add_equipment (player1) "ff_pr" 0)
            )
        )
        (if (= player_sec_weap_id 8)
            (begin
                (player_add_equipment (player0) "ff_needler" 0)
                (player_add_equipment (player1) "ff_needler" 0)
            )
        )
        (if (= player_sec_weap_id 9)
            (begin
                (player_add_equipment (player0) "ff_frg" 0)
                (player_add_equipment (player1) "ff_frg" 0)
            )
        )
        (if (= player_sec_weap_id 10)
            (begin
                (player_add_equipment (player0) "ff_chaingun" 0)
                (player_add_equipment (player1) "ff_chaingun" 0)
            )
        )
        (if (= player_sec_weap_id 11)
            (begin
                (player_add_equipment (player0) "ff_smg" 0)
                (player_add_equipment (player1) "ff_smg" 0)
            )
        )
        (if (= player_sec_weap_id 12)
            (begin
                (player_add_equipment (player0) "ff_ma5" 0)
                (player_add_equipment (player1) "ff_ma5" 0)
            )
        )
        (if (= player_sec_weap_id 13)
            (if (> player_inf_ammo_mode_id 0)
                (begin
                    (player_add_equipment (player0) "ff_sword_unlimited" 0)
                    (player_add_equipment (player1) "ff_sword_unlimited" 0)
                )
                (begin
                    (player_add_equipment (player0) "ff_sword" 0)
                    (player_add_equipment (player1) "ff_sword" 0)
                )
            )
        )
        (if (= player_sec_weap_id 14)
            (begin
                (player_add_equipment (player0) "ff_sentinel_beam" 0)
                (player_add_equipment (player1) "ff_sentinel_beam" 0)
            )
        )
        (if (= player_sec_weap_id 15)
            (begin
                (player_add_equipment (player0) "ff_skull" 0)
                (player_add_equipment (player1) "ff_skull" 0)
            )
        )
        (if (= player_sec_weap_id 16)
            (begin
                (player_add_equipment (player0) "ff_flag" 0)
                (player_add_equipment (player1) "ff_flag" 0)
            )
        )
        (if (= player_start_gren_mode_id 1)
            (begin
                (player_add_equipment (player0) "ff_frag_g" 0)
                (player_add_equipment (player1) "ff_frag_g" 0)
                (sleep 15)
                (player_add_equipment (player0) "ff_plasma_g" 0)
                (player_add_equipment (player1) "ff_plasma_g" 0)
            )
        )
        (if (= player_start_gren_mode_id 2)
            (begin
                (player_add_equipment (player0) "ff_frag_g" 0)
                (player_add_equipment (player1) "ff_frag_g" 0)
            )
        )
        (if (= player_start_gren_mode_id 3)
            (begin
                (player_add_equipment (player0) "ff_plasma_g" 0)
                (player_add_equipment (player1) "ff_plasma_g" 0)
            )
        )
    )
)

(script static void add_lives
    (begin
        (if (< lives_remaining 0)
            (set lives_remaining 0)
        )
        (set lives_remaining (+ lives_remaining (+ (list_count (players)) 1)))
        (if (> lives_remaining 20)
            (set lives_remaining 20)
        )
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_awarded_lives2" "none" 1)
        )
        (if (> lives_remaining 0)
            (set warned_lives_0 0)
        )
        (if (> lives_remaining 1)
            (set warned_lives_1 0)
        )
        (if (> lives_remaining 5)
            (set warned_lives_5 0)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_added_lives")
        (sleep 30)
        (show_hud_help_text 0)
    )
)

(script static void all_skulls_quiet
    (begin
        (set debug_ice_cream_flavor_status_anger 1)
        (set debug_ice_cream_flavor_status_catch 1)
        (set debug_ice_cream_flavor_status_black_eye 1)
        (set debug_ice_cream_flavor_status_fog 1)
        (set debug_ice_cream_flavor_status_famine 1)
        (set debug_ice_cream_flavor_status_thunderstorm 1)
        (set debug_ice_cream_flavor_status_mythic 1)
        (set debug_ice_cream_flavor_status_thats_just_wrong 1)
    )
)

(script static void alt_music
    (begin
        (if (= music_track 4)
            (sound_looping_set_alternate "levels\ff_extraction\music\ff_final_music_1" 1)
        )
        (if (= music_track 5)
            (sound_looping_set_alternate "levels\ff_extraction\music\ff_final_music_2" 1)
        )
        (if (= music_track 6)
            (sound_looping_set_alternate "sound\music\firefight7\firefight7" 1)
        )
    )
)

(script continuous ammo_respawns
    (begin
        (sleep_until (and (not start_game_setup) (or (= weapon_drops 1) (= weapon_drops 3))))
        (object_create_containing "starting_equipment_ar")
        (object_create_containing "starting_equipment_shot")
        (object_create_containing "starting_equipment_pist")
        (sleep 30)
    )
)

(script static void anger_skull_quiet
    (set debug_ice_cream_flavor_status_anger 1)
)

(script static void announce_all_skulls
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_all_skulls" "none" 1)
        )
        (set debug_ice_cream_flavor_status_anger 1)
        (set debug_ice_cream_flavor_status_black_eye 1)
        (set debug_ice_cream_flavor_status_catch 1)
        (set debug_ice_cream_flavor_status_fog 1)
        (set debug_ice_cream_flavor_status_famine 1)
        (set debug_ice_cream_flavor_status_thunderstorm 1)
        (set debug_ice_cream_flavor_status_mythic 1)
        (set debug_ice_cream_flavor_status_thats_just_wrong 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_all_skulls")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_all_skulls_voice
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_all_skulls" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_all_skulls")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_anger_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_generic" "none" 1)
        )
        (set debug_ice_cream_flavor_status_anger 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_anger_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_black_eye_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_black_eye" "none" 1)
        )
        (set debug_ice_cream_flavor_status_black_eye 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_black_eye_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_catch_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_catch" "none" 1)
        )
        (set debug_ice_cream_flavor_status_catch 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_catch_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_cloud_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_cloud" "none" 1)
        )
        (set debug_ice_cream_flavor_status_fog 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_cloud_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_famine_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_famine" "none" 1)
        )
        (set debug_ice_cream_flavor_status_famine 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_famine_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_generic_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_generic" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_generic_skull_on")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_generic_skulls
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skulls_generic" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_generic_skulls_on")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_iron_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_iron" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_iron_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_mythic_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_mythic" "none" 1)
        )
        (set debug_ice_cream_flavor_status_mythic 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_mythic_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_skulls_toggled
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skulls_generic" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_skulls_toggled")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_thunderstorm_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_thunderstorm" "none" 1)
        )
        (set debug_ice_cream_flavor_status_thunderstorm 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_thunderstorm_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void announce_tjw_skull
    (begin
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_skull_generic" "none" 1)
        )
        (set debug_ice_cream_flavor_status_thats_just_wrong 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_tjw_skull")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void black_eye_skull_quiet
    (set debug_ice_cream_flavor_status_black_eye 1)
)

(script continuous bonus_enemy_respawns
    (begin
        (sleep_until (and (= enable_bonus_round 1) (= enable_bonus_enemy_spawns 1)))
        (if (and (= enable_bonus_round 1) (= enable_bonus_enemy_spawns 1))
            (sleep 60)
        )
        (if (and
                (>= 24 (+
                        (ai_nonswarm_count "ff_enemies_cov")
                        (ai_nonswarm_count "ff_enemies_flood")
                        (ai_nonswarm_count "ff_enemies_sentinels")
                    )
                )
                (= enable_bonus_round 1)
                (= enable_bonus_enemy_spawns 1)
            )
            (spawn_extra_bonus_enemies)
        )
    )
)

(script static void bonus_lives
    (begin
        (if (< lives_remaining 0)
            (set lives_remaining 0)
        )
        (set lives_remaining (+ lives_remaining (+ (list_count (players)) 2)))
        (if (> lives_remaining 20)
            (set lives_remaining 20)
        )
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_bonus_lives2" "none" 1)
        )
        (if (> lives_remaining 0)
            (set warned_lives_0 0)
        )
        (if (> lives_remaining 1)
            (set warned_lives_1 0)
        )
        (if (> lives_remaining 5)
            (set warned_lives_5 0)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_bonus_lives")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void bonus_migrate_a
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_a")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_a")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_a")
    )
)

(script static void bonus_migrate_b
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_b")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_b")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_b")
    )
)

(script static void bonus_migrate_c
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_c")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_c")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_c")
    )
)

(script static void bonus_migrate_d
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_d")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_d")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_d")
    )
)

(script static void bonus_migrate_e
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_e")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_e")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_e")
    )
)

(script static void bonus_migrate_f
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_f")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_f")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_f")
    )
)

(script static void bonus_migrate_g
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_g")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_g")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_g")
    )
)

(script static void bonus_migrate_h
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_h")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_h")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_h")
    )
)

(script static void bonus_migrate_i
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_i")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_i")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_i")
    )
)

(script static void bonus_migrate_j
    (begin
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/squad_j")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/squad_j")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/squad_j")
    )
)

(script static void bonus_over
    (begin
        (show_hud_timer 0)
        (set enable_bonus_enemy_spawns 0)
        (ai_kill_silent "ff_enemies_cov")
        (ai_kill_silent "ff_enemies_flood")
        (ai_kill_silent "ff_enemies_sentinels")
        (if (= game_over_flag 0)
            (begin
                (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_bonus_round_over" "none" 1)
                (show_hud_help_text 1)
                (hud_set_help_text "ff_bonus_end")
                (sleep 120)
                (show_hud_help_text 0)
            )
        )
        (ai_kill_silent "ff_enemies_cov")
        (ai_kill_silent "ff_enemies_flood")
        (ai_kill_silent "ff_enemies_sentinels")
        (set enable_bonus_round 0)
        (set bonus_enemies_placed_1 0)
        (set bonus_enemies_placed_2 0)
        (if (and uses_lives (= game_over_flag 0))
            (bonus_lives)
        )
        (ai_kill_silent "ff_enemies_cov")
        (ai_kill_silent "ff_enemies_flood")
        (ai_kill_silent "ff_enemies_sentinels")
    )
)

(script static void bonus_round
    (begin
        (set enable_bonus_round 1)
        (set enable_wave_manager 0)
        (set squad_id_to_spawn bonus_squad1_mode_id)
        (sleep 60)
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_bonus_round2" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_bonus_start")
        (sleep 60)
        (show_hud_help_text 0)
        (bonus_timer)
        (bonus_round_skulls)
        (if uses_dropships_bonus
            (begin
                (object_create_anew "dropship1")
                (unit_close "dropship1")
                (spawn_enemies)
                (vehicle_load_magic "dropship1" "passenger" (ai_actors "ff_wave_build_cov"))
                (ai_braindead "ff_wave_build_cov" 1)
                (object_teleport "dropship1" "dropship_bonus_placement")
                (level_specific_bonus_enter)
                (sleep (max 0 (- (recording_time "dropship1") 60)))
                (vehicle_hover "dropship1" 0)
                (sleep 60)
                (level_specific_bonus_drop)
                (sleep (recording_time "dropship1"))
                (unit_open "dropship1")
                (ai_braindead "ff_wave_build_cov" 0)
                (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/bonus_squad")
            )
        )
        (pause_hud_timer 0)
        (spawn_initial_bonus_enemies)
        (set enable_bonus_enemy_spawns 1)
        (sleep_until (or (<= (hud_get_timer_ticks) 0) (= enable_bonus_round 0)))
        (bonus_over)
        (vehicle_hover "dropship1" 0)
        (level_specific_bonus_exit)
        (unit_close "dropship1")
        (sleep (recording_time "dropship1"))
        (set round_number 0)
        (sleep 90)
    )
)

(script static void bonus_round_skulls
    (begin
        (announce_all_skulls)
        (announce_iron_skull)
    )
)

(script static void bonus_timer
    (begin
        (hud_set_timer_position 360 0 "top_right")
        (hud_set_timer_time 1 30)
        (show_hud_timer 1)
        (pause_hud_timer 1)
        (sleep 150)
        (hud_set_timer_warning_time 0 15)
    )
)

(script static void boss_wave
    (begin
        (set enable_wave_manager 0)
        (if (not (and (= uses_dropships_final 1) (= dropships_supported 1)))
            (check_spawn_blockers)
        )
        (if uses_hazards
            (hazard_spawn)
        )
        (if increased_enemy_count_final
            (begin
                (play_music)
                (build_mid_squads)
                (teleport_ai)
                (set enable_boss_wave 1)
            )
            (begin
                (set enable_boss_wave 1)
                (if (and (= uses_dropships_final 1) (= dropships_supported 1))
                    (begin
                        (object_create_anew "dropship1")
                        (object_create_anew "dropship2")
                    )
                )
                (final_enemies)
                (sleep 30)
                (if (and (= uses_dropships_final 1) (= dropships_supported 1))
                    (load_boss_dropships)
                    (migrate_and_teleport_boss)
                )
                (if (= ai_equipment_drops 0)
                    (begin
                        (unit_doesnt_drop_items (ai_actors "ff_enemies_cov"))
                        (unit_doesnt_drop_items (ai_actors "ff_enemies_flood"))
                    )
                )
                (play_music)
                (sleep 30)
                (if (and (= uses_dropships_final 1) (= dropships_supported 1))
                    (dropships)
                )
            )
        )
        (sleep 90)
        (sleep_until (> 12 (+
                    (ai_nonswarm_count "ff_enemies_cov")
                    (ai_nonswarm_count "ff_enemies_flood")
                    (ai_nonswarm_count "ff_enemies_sentinels")
                )
            )
        )
        (alt_music)
        (sleep_until (= 0 (+
                    (ai_nonswarm_count "ff_enemies_cov")
                    (ai_nonswarm_count "ff_enemies_flood")
                    (ai_nonswarm_count "ff_enemies_sentinels")
                )
            )
        )
        (set enable_boss_wave 0)
        (stop_all_music)
        (round_cleanup)
    )
)

(script continuous boss_wave_count_announce
    (begin
        (sleep_until enable_boss_wave 1)
        (if (and (= 5 (+
                        (ai_nonswarm_count "ff_enemies_cov")
                        (ai_nonswarm_count "ff_enemies_flood")
                        (ai_nonswarm_count "ff_enemies_sentinels")
                    )
                ) (= 0 5_ai_announced)
            )
            (begin
                (5_ai_left)
                (sleep 90)
            )
        )
        (if (and (= 2 (+
                        (ai_nonswarm_count "ff_enemies_cov")
                        (ai_nonswarm_count "ff_enemies_flood")
                        (ai_nonswarm_count "ff_enemies_sentinels")
                    )
                ) (= 0 2_ai_announced)
            )
            (begin
                (2_ai_left)
                (sleep 90)
            )
        )
        (if (and (= 1 (+
                        (ai_nonswarm_count "ff_enemies_cov")
                        (ai_nonswarm_count "ff_enemies_flood")
                        (ai_nonswarm_count "ff_enemies_sentinels")
                    )
                ) (= 0 1_ai_announced)
            )
            (begin
                (1_ai_left)
                (sleep 90)
            )
        )
        (mark_last_5_enemies)
        (sleep 30)
    )
)

(script static void build_mid_squads
    (if (or
            (= wave_number 2)
            (= wave_number 3)
            (= wave_number 4)
            (and (= wave_number 1) (= increased_enemy_count_initial 1))
            (and (= wave_number 5) (= increased_enemy_count_final 1))
        )
        (begin
            (reset_squad_spawns)
            (set squad_builder_enabled 1)
            (sleep_until (= squads_built_and_assigned 1) 10)
        )
    )
)

(script static void catch_skull_quiet
    (set debug_ice_cream_flavor_status_catch 1)
)

(script static void check_spawn_blockers
    (begin
        (set blocked_zones_count 0)
        (if (or (volume_test_objects "spawn_a1_blocker" (players)) (volume_test_objects "spawn_a2_blocker" (players)))
            (begin
                (set spawn_a_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_b1_blocker" (players)) (volume_test_objects "spawn_b2_blocker" (players)))
            (begin
                (set spawn_b_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_c1_blocker" (players)) (volume_test_objects "spawn_c2_blocker" (players)))
            (begin
                (set spawn_c_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_d1_blocker" (players)) (volume_test_objects "spawn_d2_blocker" (players)))
            (begin
                (set spawn_d_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_e1_blocker" (players)) (volume_test_objects "spawn_e2_blocker" (players)))
            (begin
                (set spawn_e_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_f1_blocker" (players)) (volume_test_objects "spawn_f2_blocker" (players)))
            (begin
                (set spawn_f_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_g1_blocker" (players)) (volume_test_objects "spawn_g2_blocker" (players)))
            (begin
                (set spawn_g_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_h1_blocker" (players)) (volume_test_objects "spawn_h2_blocker" (players)))
            (begin
                (set spawn_h_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_i1_blocker" (players)) (volume_test_objects "spawn_i2_blocker" (players)))
            (begin
                (set spawn_i_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (or (volume_test_objects "spawn_j1_blocker" (players)) (volume_test_objects "spawn_j2_blocker" (players)))
            (begin
                (set spawn_j_block 1)
                (set blocked_zones_count (+ 1 blocked_zones_count))
            )
        )
        (if (> blocked_zones_count 7)
            (reset_spawn_blockers)
        )
        (set spawn_blocks_checked 1)
    )
)

(script static boolean cinematic_skip_start
    (begin
        (cinematic_skip_start_internal)
        (game_save_totally_unsafe)
        (sleep_until (not (game_saving)) 1)
        (not (game_reverted))
    )
)

(script static void cinematic_skip_stop
    (cinematic_skip_stop_internal)
)

(script static void cloud_skull_quiet
    (set debug_ice_cream_flavor_status_fog 1)
)

(script continuous coop_setup_hack
    (begin
        (sleep_until start_coop_setup 1)
        (show_hud_help_text 1)
        (if (and (not coop_game_chosen) (= (device_get_position "device_coop_hack") 0))
            (begin
                (if (= game_mode_id 12)
                    (set game_mode_id 0)
                    (set game_mode_id (+ game_mode_id 1))
                )
                (if (= game_mode_id 0)
                    (hud_set_help_text "ff_cm_0")
                )
                (if (= game_mode_id 1)
                    (hud_set_help_text "ff_cm_1")
                )
                (if (= game_mode_id 2)
                    (hud_set_help_text "ff_cm_2")
                )
                (if (= game_mode_id 3)
                    (hud_set_help_text "ff_cm_3")
                )
                (if (= game_mode_id 4)
                    (hud_set_help_text "ff_cm_4")
                )
                (if (= game_mode_id 5)
                    (hud_set_help_text "ff_cm_5")
                )
                (if (= game_mode_id 6)
                    (hud_set_help_text "ff_cm_6")
                )
                (if (= game_mode_id 7)
                    (hud_set_help_text "ff_cm_7")
                )
                (if (= game_mode_id 8)
                    (hud_set_help_text "ff_cm_8")
                )
                (if (= game_mode_id 9)
                    (hud_set_help_text "ff_cm_9")
                )
                (if (= game_mode_id 10)
                    (hud_set_help_text "ff_cm_10")
                )
                (if (= game_mode_id 11)
                    (hud_set_help_text "ff_cm_11")
                )
            )
        )
        (if (and (not coop_game_chosen) (= (device_get_position "device_coop_hack") 1))
            (begin
                (game_mode_defaults)
                (set coop_game_chosen 1)
                (unit_suspended (player0) 0)
                (unit_suspended (player1) 0)
                (unit_suspended (player2) 0)
                (unit_suspended (player3) 0)
                (object_teleport (player0) "p0_respawn_point_real")
                (object_teleport (player1) "p1_respawn_point_real")
                (object_teleport (player2) "p2_respawn_point_real")
                (object_teleport (player3) "p3_respawn_point_real")
                (show_hud_help_text 0)
                (object_destroy "device_coop_hack")
                (set start_coop_setup 0)
            )
        )
        (sleep 60)
    )
)

(script static void countdown_beeps
    (begin
        (sound_impulse_start "sound\sfx\ui\countdown_for_respawn" "none" 1)
        (sleep 30)
        (sound_impulse_start "sound\sfx\ui\countdown_for_respawn" "none" 1)
        (sleep 30)
        (sound_impulse_start "sound\sfx\ui\countdown_for_respawn" "none" 1)
        (sleep 30)
        (sound_impulse_start "sound\sfx\ui\player_respawn" "none" 1)
        (sleep 30)
    )
)

(script continuous death_barriers
    (begin
        (level_specific_barriers)
        (sleep 30)
    )
)

(script static void dropship_ai_off
    (begin
        (ai_braindead "ff_enemies_cov/initial_squad_1" 1)
        (ai_braindead "ff_enemies_cov/initial_squad_2" 1)
        (ai_braindead "ff_enemies_cov/boss_squad_1" 1)
        (ai_braindead "ff_enemies_cov/boss_squad_2" 1)
    )
)

(script static void dropship_ai_on
    (begin
        (ai_braindead "ff_enemies_cov/initial_squad_1" 0)
        (ai_braindead "ff_enemies_cov/initial_squad_2" 0)
        (ai_braindead "ff_enemies_cov/boss_squad_1" 0)
        (ai_braindead "ff_enemies_cov/boss_squad_2" 0)
    )
)

(script static void dropship_dest_1_drop
    (begin
        (if (= dropship1_dest 1)
            (recording_play_and_hover "dropship1" "pipe_cship_drop")
        )
        (if (= dropship2_dest 1)
            (recording_play_and_hover "dropship2" "pipe_cship_drop")
        )
    )
)

(script static void dropship_dest_1_exit
    (begin
        (if (= dropship1_dest 1)
            (recording_play_and_delete "dropship1" "pipe_cship_exit")
        )
        (if (= dropship2_dest 1)
            (recording_play_and_delete "dropship2" "pipe_cship_exit")
        )
    )
)

(script static void dropship_dest_1_start
    (begin
        (if (= dropship1_dest 1)
            (recording_play_and_hover "dropship1" "pipe_cship_enter")
        )
        (if (= dropship2_dest 1)
            (recording_play_and_hover "dropship2" "pipe_cship_enter")
        )
    )
)

(script static void dropship_dest_1_tele
    (begin
        (if (= dropship1_dest 1)
            (object_teleport "dropship1" "dropship_placement_1")
        )
        (if (= dropship2_dest 1)
            (object_teleport "dropship2" "dropship_placement_1")
        )
    )
)

(script static void dropship_dest_2_drop
    (begin
        (if (= dropship1_dest 2)
            (recording_play_and_hover "dropship1" "back_cship_drop")
        )
        (if (= dropship2_dest 2)
            (recording_play_and_hover "dropship2" "back_cship_drop")
        )
    )
)

(script static void dropship_dest_2_exit
    (begin
        (if (= dropship1_dest 2)
            (recording_play_and_delete "dropship1" "back_cship_exit")
        )
        (if (= dropship2_dest 2)
            (recording_play_and_delete "dropship2" "back_cship_exit")
        )
    )
)

(script static void dropship_dest_2_start
    (begin
        (if (= dropship1_dest 2)
            (recording_play_and_hover "dropship1" "back_cship_enter")
        )
        (if (= dropship2_dest 2)
            (recording_play_and_hover "dropship2" "back_cship_enter")
        )
    )
)

(script static void dropship_dest_2_tele
    (begin
        (if (= dropship1_dest 2)
            (object_teleport "dropship1" "dropship_placement_2")
        )
        (if (= dropship2_dest 2)
            (object_teleport "dropship2" "dropship_placement_2")
        )
    )
)

(script static void dropship_dest_3_drop
    (begin
        (if (= dropship1_dest 3)
            (recording_play_and_hover "dropship1" "fort_cship_drop")
        )
        (if (= dropship2_dest 3)
            (recording_play_and_hover "dropship2" "fort_cship_drop")
        )
    )
)

(script static void dropship_dest_3_exit
    (begin
        (if (= dropship1_dest 3)
            (recording_play_and_delete "dropship1" "fort_cship_exit")
        )
        (if (= dropship2_dest 3)
            (recording_play_and_delete "dropship2" "fort_cship_exit")
        )
    )
)

(script static void dropship_dest_3_start
    (begin
        (if (= dropship1_dest 3)
            (recording_play_and_hover "dropship1" "fort_cship_enter")
        )
        (if (= dropship2_dest 3)
            (recording_play_and_hover "dropship2" "fort_cship_enter")
        )
    )
)

(script static void dropship_dest_3_tele
    (begin
        (if (= dropship1_dest 3)
            (object_teleport "dropship1" "dropship_placement_3")
        )
        (if (= dropship2_dest 3)
            (object_teleport "dropship2" "dropship_placement_3")
        )
    )
)

(script static void dropship_drop_sleep
    (begin
        (sleep (min (recording_time "dropship1") (recording_time "dropship2")))
        (sleep (max 0 (- (max (recording_time "dropship1") (recording_time "dropship2")) 60)))
    )
)

(script static void dropship_entrance_sleep
    (sleep (max (recording_time "dropship1") (recording_time "dropship2")))
)

(script static void dropship_hover_off
    (begin
        (vehicle_hover "dropship1" 0)
        (vehicle_hover "dropship2" 0)
    )
)

(script static void dropship_hover_on
    (begin
        (vehicle_hover "dropship1" 1)
        (vehicle_hover "dropship2" 1)
    )
)

(script static void dropship_nav_points_off
    (begin
        (deactivate_team_nav_point_object "player" "dropship1")
        (deactivate_team_nav_point_object "player" "dropship2")
    )
)

(script static void dropship_nav_points_on
    (begin_random
        (begin
            (activate_team_nav_point_object "default_red" "player" "dropship1" 1)
            (sound_impulse_start "sound\sfx\ui\sfx_blip" "none" 1)
            (sleep (random_range 15 30))
        )
        (begin
            (activate_team_nav_point_object "default_red" "player" "dropship2" 1)
            (sound_impulse_start "sound\sfx\ui\sfx_blip" "none" 1)
            (sleep (random_range 15 30))
        )
    )
)

(script static void dropship_phasing_off
    (begin
        (object_set_collideable "dropship1" 1)
        (object_set_collideable "dropship2" 1)
    )
)

(script static void dropship_phasing_on
    (begin
        (object_set_collideable "dropship1" 0)
        (object_set_collideable "dropship2" 0)
    )
)

(script static void dropship_sanity_check
    (begin
        (if (or
                (> initial_squad1_mode_id 18)
                (= initial_squad1_mode_id 5)
                (= initial_squad1_mode_id 6)
                (= initial_squad1_mode_id 7)
            )
            (set uses_dropships_initial 0)
        )
        (if (or
                (> initial_squad2_mode_id 18)
                (= initial_squad2_mode_id 5)
                (= initial_squad2_mode_id 6)
                (= initial_squad2_mode_id 7)
            )
            (set uses_dropships_initial 0)
        )
        (if (or
                (> initial_squad3_mode_id 18)
                (= initial_squad3_mode_id 5)
                (= initial_squad3_mode_id 6)
                (= initial_squad3_mode_id 7)
            )
            (set uses_dropships_initial 0)
        )
        (if (or
                (> final_squad1_mode_id 18)
                (= final_squad1_mode_id 5)
                (= final_squad1_mode_id 6)
                (= final_squad1_mode_id 7)
            )
            (set uses_dropships_final 0)
        )
        (if (or
                (> final_squad2_mode_id 18)
                (= final_squad2_mode_id 5)
                (= final_squad2_mode_id 6)
                (= final_squad2_mode_id 7)
            )
            (set uses_dropships_final 0)
        )
        (if (or
                (> final_squad3_mode_id 18)
                (= final_squad3_mode_id 5)
                (= final_squad3_mode_id 6)
                (= final_squad3_mode_id 7)
            )
            (set uses_dropships_final 0)
        )
        (if (or
                (> bonus_squad1_mode_id 18)
                (= bonus_squad1_mode_id 5)
                (= bonus_squad1_mode_id 6)
                (= bonus_squad1_mode_id 7)
            )
            (set uses_dropships_bonus 0)
        )
        (if increased_enemy_count_initial
            (set uses_dropships_initial 0)
        )
        (if increased_enemy_count_final
            (set uses_dropships_final 0)
        )
    )
)

(script static void dropship_unload
    (begin
        (begin_random
            (begin
                (vehicle_unload "dropship1" "cd-passengerl01")
                (sleep 5)
            )
            (begin
                (vehicle_unload "dropship1" "cd-passengerl02")
                (sleep 5)
            )
            (begin
                (vehicle_unload "dropship1" "cd-passengerl03")
                (sleep 5)
            )
            (begin
                (vehicle_unload "dropship1" "cd-passengerl04")
                (sleep 5)
            )
            (begin
                (vehicle_unload "dropship1" "cd-passengerr01")
                (sleep 5)
            )
            (begin
                (vehicle_unload "dropship1" "cd-passengerr02")
                (sleep 5)
            )
            (begin
                (vehicle_unload "dropship1" "cd-passengerr03")
                (sleep 5)
            )
            (begin
                (vehicle_unload "dropship1" "cd-passengerr04")
                (sleep 5)
            )
        )
        (if (not enable_bonus_round)
            (begin_random
                (begin
                    (vehicle_unload "dropship2" "cd-passengerl01")
                    (sleep 5)
                )
                (begin
                    (vehicle_unload "dropship2" "cd-passengerl02")
                    (sleep 5)
                )
                (begin
                    (vehicle_unload "dropship2" "cd-passengerl03")
                    (sleep 5)
                )
                (begin
                    (vehicle_unload "dropship2" "cd-passengerl04")
                    (sleep 5)
                )
                (begin
                    (vehicle_unload "dropship2" "cd-passengerr01")
                    (sleep 5)
                )
                (begin
                    (vehicle_unload "dropship2" "cd-passengerr02")
                    (sleep 5)
                )
                (begin
                    (vehicle_unload "dropship2" "cd-passengerr03")
                    (sleep 5)
                )
                (begin
                    (vehicle_unload "dropship2" "cd-passengerr04")
                    (sleep 5)
                )
            )
        )
    )
)

(script static void dropships
    (begin
        (quick_dropship_dest)
        (dropship_hover_on)
        (dropships_teleport)
        (sleep 30)
        (dropships_enter)
        (dropship_entrance_sleep)
        (dropship_nav_points_on)
        (sleep 60)
        (dropship_hover_off)
        (sleep 60)
        (dropships_drop)
        (dropship_drop_sleep)
        (sleep 60)
        (dropships_open)
        (dropship_ai_on)
        (ai_set_current_state "ff_enemies_cov" "search")
        (dropship_unload)
        (sleep 120)
        (dropship_hover_off)
        (dropships_exit)
        (sleep 30)
        (dropships_close)
        (dropship_nav_points_off)
        (dropship_phasing_on)
    )
)

(script static void dropships_close
    (begin
        (unit_close "dropship1")
        (unit_close "dropship2")
    )
)

(script static void dropships_drop
    (begin
        (dropship_dest_1_drop)
        (dropship_dest_2_drop)
        (dropship_dest_3_drop)
    )
)

(script static void dropships_enter
    (begin
        (dropship_dest_1_start)
        (dropship_dest_2_start)
        (dropship_dest_3_start)
    )
)

(script static void dropships_exit
    (begin
        (dropship_dest_1_exit)
        (dropship_dest_2_exit)
        (dropship_dest_3_exit)
    )
)

(script static void dropships_open
    (begin
        (unit_open "dropship1")
        (unit_open "dropship2")
    )
)

(script static void dropships_teleport
    (begin
        (dropship_dest_1_tele)
        (dropship_dest_2_tele)
        (dropship_dest_3_tele)
    )
)

(script static void end_round_announcement
    (begin
        (if (= 3 round_number)
            (begin
                (if (= game_over_flag 0)
                    (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_end_set" "none" 1)
                )
                (show_hud_help_text 1)
                (hud_set_help_text "ff_end_set")
                (sleep 120)
                (show_hud_help_text 0)
            )
            (begin
                (if (= game_over_flag 0)
                    (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_end_round" "none" 1)
                )
                (show_hud_help_text 1)
                (hud_set_help_text "ff_end_round")
                (sleep 120)
                (show_hud_help_text 0)
            )
        )
        (if uses_hazards
            (level_specific_kill_hazard)
        )
        (ai_kill_silent "ff_enemies_cov")
        (ai_kill_silent "ff_enemies_flood")
        (ai_kill_silent "ff_enemies_sentinels")
    )
)

(script static void famine_skull_quiet
    (set debug_ice_cream_flavor_status_famine 1)
)

(script static void final_enemies
    (begin
        (begin_random
            (set squad_id_to_spawn final_squad1_mode_id)
            (set squad_id_to_spawn final_squad2_mode_id)
            (set squad_id_to_spawn final_squad3_mode_id)
        )
        (spawn_enemies)
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/boss_squad_1")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/boss_squad_1")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/boss_squad_1")
        (begin_random
            (set squad_id_to_spawn final_squad1_mode_id)
            (set squad_id_to_spawn final_squad2_mode_id)
            (set squad_id_to_spawn final_squad3_mode_id)
        )
        (spawn_enemies)
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/boss_squad_2")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/boss_squad_2")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/boss_squad_2")
    )
)

(script startup firefight_start
    (begin
        (if (= (list_count (players)) 1)
            (begin
                (sound_looping_start "sound\music\firefightintro\firefightintro" "none" 1)
                (ai_allegiance "player" "human")
                (set cheat_deathless_player 1)
                (ai_allow_dormant "ff_enemies_cov" 0)
                (ai_allow_dormant "ff_enemies_flood" 0)
                (ai_allow_dormant "hazard" 0)
                (ai_allow_dormant "ff_marines" 0)
                (override_menu_skulls)
                (level_specific_variables)
                (update_ff_help_text)
                (camera_control 1)
                (camera_set "solo_respawn_camera" 0)
                (game_mode_defaults)
                (set start_game_setup 1)
                (sleep_until (= start_game_setup 0))
                (game_mode_setup)
                (if (= weapon_drops 0)
                    (begin
                        (object_destroy_containing "starting_equipment")
                        (object_create_anew_containing "starting_equipment_health")
                    )
                )
                (if (and (= weapon_drops 1) (= digsite_content_enabled 1))
                    (object_create_anew_containing "digsite_equipment")
                )
                (if (= weapon_drops 2)
                    (begin
                        (object_destroy_containing "starting_equipment")
                        (object_create_anew_containing "starting_equipment_health")
                        (object_create_anew_containing "cov_equipment")
                        (if (= custom_content_enabled 1)
                            (if (> player_inf_ammo_mode_id 0)
                                (object_create_anew_containing "custom_equipment_sword_inf")
                                (object_create_anew_containing "custom_equipment_sword_lim")
                            )
                        )
                    )
                )
                (if (= weapon_drops 3)
                    (begin
                        (object_create_anew_containing "cov_equipment")
                        (if (= digsite_content_enabled 1)
                            (object_create_anew_containing "digsite_equipment")
                        )
                        (if (= custom_content_enabled 1)
                            (begin
                                (object_create_anew_containing "custom_equipment_sentinelbeam")
                                (if (> player_inf_ammo_mode_id 0)
                                    (object_create_anew_containing "custom_equipment_sword_inf")
                                    (object_create_anew_containing "custom_equipment_sword_lim")
                                )
                            )
                        )
                    )
                )
                (respawn_vehicles)
                (if (and (!= allied_weapon_set 0) (= allies_supported 1))
                    (spawn_marines)
                )
                (camera_control 0)
                (set start_tick_time (game_time))
                (player_enable_input 1)
                (player_action_test_reset)
                (fade_in 0 0 0 90)
                (sleep 60)
                (set suppress_time_announcement 0)
            )
            (begin
                (ai_allegiance "player" "human")
                (ai_allow_dormant "ff_enemies_cov" 0)
                (ai_allow_dormant "ff_enemies_flood" 0)
                (ai_allow_dormant "hazard" 0)
                (ai_allow_dormant "ff_marines" 0)
                (override_menu_skulls)
                (level_specific_variables)
                (game_mode_defaults)
                (set start_coop_setup 1)
                (set game_mode_id -1)
                (object_destroy_containing "starting_equipment")
                (object_destroy_containing "starting_vehicle")
                (unit_suspended (player0) 1)
                (unit_suspended (player1) 1)
                (unit_suspended (player2) 1)
                (unit_suspended (player3) 1)
                (object_create "device_coop_hack")
                (device_set_power "device_coop_hack" 1)
                (device_set_position "device_coop_hack" 0)
                (device_group_change_only_once_more_set "device_coop_hack" 1)
                (object_cannot_take_damage (players))
                (object_teleport (player0) "p0_coop_setup")
                (object_teleport (player1) "p1_coop_setup")
                (object_teleport (player2) "p2_coop_setup")
                (object_teleport (player3) "p3_coop_setup")
                (sleep_until (= start_coop_setup 0))
                (game_mode_setup)
                (if (= weapon_drops 0)
                    (begin
                        (object_destroy_containing "starting_equipment")
                        (object_create_anew_containing "starting_equipment_health")
                    )
                )
                (if (= weapon_drops 2)
                    (begin
                        (object_destroy_containing "starting_equipment")
                        (object_create_anew_containing "starting_equipment_health")
                        (object_create_anew_containing "cov_equipment")
                    )
                )
                (if (= weapon_drops 3)
                    (object_create_anew_containing "cov_equipment")
                )
                (respawn_vehicles)
                (if (and (!= allied_weapon_set 0) (= allies_supported 1))
                    (spawn_marines)
                )
                (set start_tick_time (game_time))
                (fade_in 0 0 0 90)
                (sleep 60)
                (set suppress_time_announcement 0)
            )
        )
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_welcome3" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_welcome")
        (sleep 120)
        (show_hud_help_text 0)
        (sleep 180)
        (sound_looping_stop "sound\music\firefightintro\firefightintro")
        (set round_number (+ 1 round_number))
        (set enable_wave_manager 1)
    )
)

(script static void game_mode_defaults
    (begin
        (set time_mode_id 0)
        (set uses_hazards 1)
        (set invincible_allies 0)
        (set sec_skull_assassins 0)
        (set ai_equipment_drops 1)
        (set ai_grenade_use 1)
        (set player_pri_weap_id 0)
        (set player_sec_weap_id 1)
        (set player_start_gren_mode_id 1)
        (set player_inf_ammo_mode_id 0)
        (set player_active_camo 0)
        (set vehicle_mode_id 1)
        (set indestructible_vehicles 0)
        (set weapon_drops 1)
        (set lives_mode_id 3)
        (set round_mode_id 0)
        (set use_built_in_enemy_spawns 1)
        (set increased_enemy_count_initial 0)
        (set increased_enemy_count_final 0)
        (set skull_mode_id 1)
        (set uses_dropships_initial 1)
        (set initial_squad1_mode_id 3)
        (set initial_squad2_mode_id 3)
        (set initial_squad3_mode_id 3)
        (set mid_squad1_mode_id 0)
        (set mid_squad2_mode_id 0)
        (set mid_squad3_mode_id 0)
        (set mid_squad4_mode_id 0)
        (set mid_squad5_mode_id 0)
        (set mid_squad6_mode_id 0)
        (set mid_squad7_mode_id 0)
        (set uses_dropships_final 1)
        (set final_squad1_mode_id 12)
        (set final_squad2_mode_id 16)
        (set final_squad3_mode_id 18)
        (set uses_dropships_bonus 1)
        (set bonus_squad1_mode_id 1)
        (set bonus_squad2_mode_id 1)
        (set bonus_squad3_mode_id 1)
        (set unique_bonus_squads 0)
        (set ai_unified_team 0)
        (set bonus_random_each_spawn 0)
        (set digsite_content_enabled 0)
        (set custom_content_enabled 0)
        (set allied_weapon_set 0)
        (set game_customisation_disabled 0)
        (set squad_customisation_disabled 0)
        (if (= game_mode_id 1)
            (begin
                (set time_mode_id 5)
                (set ai_equipment_drops 0)
                (set player_pri_weap_id 3)
                (set player_sec_weap_id 1)
                (set player_inf_ammo_mode_id 1)
                (set weapon_drops 0)
                (set allied_weapon_set 1)
                (set lives_mode_id 5)
                (set round_mode_id 2)
                (set uses_dropships_initial 0)
                (set uses_dropships_final 0)
                (set uses_dropships_bonus 0)
                (set skull_mode_id 2)
                (set bonus_squad1_mode_id 16)
            )
        )
        (if (= game_mode_id 2)
            (begin
                (set time_mode_id 5)
                (set ai_equipment_drops 0)
                (set player_pri_weap_id 9)
                (set player_sec_weap_id 8)
                (set player_inf_ammo_mode_id 1)
                (set weapon_drops 0)
                (set allied_weapon_set 3)
                (set invincible_allies 1)
                (set lives_mode_id 5)
                (set round_mode_id 2)
                (set uses_dropships_initial 0)
                (set uses_dropships_final 0)
                (set uses_dropships_bonus 0)
                (set skull_mode_id 2)
                (set bonus_squad1_mode_id 5)
            )
        )
        (if (= game_mode_id 3)
            (begin
                (set time_mode_id 5)
                (set ai_equipment_drops 0)
                (set player_pri_weap_id 4)
                (set player_sec_weap_id 5)
                (set player_inf_ammo_mode_id 1)
                (set weapon_drops 0)
                (set allied_weapon_set 1)
                (set invincible_allies 1)
                (set lives_mode_id 5)
                (set round_mode_id 2)
                (set uses_dropships_initial 0)
                (set uses_dropships_final 0)
                (set uses_dropships_bonus 0)
                (set skull_mode_id 2)
                (set bonus_squad1_mode_id 5)
            )
        )
        (if (= game_mode_id 4)
            (begin
                (set use_built_in_enemy_spawns 0)
                (set initial_squad1_mode_id 0)
                (set initial_squad2_mode_id 0)
                (set initial_squad3_mode_id 0)
                (set mid_squad1_mode_id 0)
                (set mid_squad2_mode_id 0)
                (set mid_squad3_mode_id 0)
                (set mid_squad4_mode_id 0)
                (set mid_squad5_mode_id 0)
                (set mid_squad6_mode_id 0)
                (set mid_squad7_mode_id 0)
                (set final_squad1_mode_id 0)
                (set final_squad2_mode_id 0)
                (set final_squad3_mode_id 0)
                (set time_mode_id 5)
                (set allied_weapon_set 1)
                (set lives_mode_id 5)
                (set round_mode_id 1)
                (set uses_dropships_initial 0)
                (set uses_dropships_final 0)
                (set uses_dropships_bonus 0)
                (set skull_mode_id 3)
                (set increased_enemy_count_initial 1)
                (set increased_enemy_count_final 1)
            )
        )
        (if (= game_mode_id 5)
            (begin
                (set use_built_in_enemy_spawns 0)
                (set initial_squad1_mode_id 2)
                (set initial_squad2_mode_id 2)
                (set initial_squad3_mode_id 2)
                (set mid_squad1_mode_id 2)
                (set mid_squad2_mode_id 2)
                (set mid_squad3_mode_id 2)
                (set mid_squad4_mode_id 2)
                (set mid_squad5_mode_id 2)
                (set mid_squad6_mode_id 2)
                (set mid_squad7_mode_id 2)
                (set final_squad1_mode_id 2)
                (set final_squad2_mode_id 2)
                (set final_squad3_mode_id 2)
                (set bonus_squad1_mode_id 2)
                (set bonus_squad2_mode_id 2)
                (set bonus_squad3_mode_id 2)
                (set time_mode_id 5)
                (set allied_weapon_set 1)
                (set lives_mode_id 5)
                (set round_mode_id 1)
                (set uses_dropships_initial 0)
                (set uses_dropships_final 0)
                (set uses_dropships_bonus 0)
                (set skull_mode_id 3)
                (set increased_enemy_count_initial 1)
                (set increased_enemy_count_final 1)
            )
        )
        (if (= game_mode_id 6)
            (begin
                (set sec_skull_assassins 1)
                (set allied_weapon_set 1)
                (set time_mode_id 5)
                (set lives_mode_id 5)
                (set round_mode_id 2)
            )
        )
        (if (= game_mode_id 7)
            (begin
                (set time_mode_id 5)
                (set ai_equipment_drops 0)
                (set player_pri_weap_id 13)
                (set player_sec_weap_id 18)
                (set weapon_drops 0)
                (set allied_weapon_set 1)
                (set player_inf_ammo_mode_id 1)
                (set invincible_allies 1)
                (set lives_mode_id 5)
                (set round_mode_id 2)
                (set uses_dropships_initial 0)
                (set uses_dropships_final 0)
                (set uses_dropships_bonus 0)
                (set uses_hazards 0)
                (set skull_mode_id 4)
            )
        )
        (if (= game_mode_id 8)
            (begin
                (set use_built_in_enemy_spawns 0)
                (set uses_dropships_initial 0)
                (set initial_squad1_mode_id 23)
                (set initial_squad2_mode_id 25)
                (set initial_squad3_mode_id 26)
                (set mid_squad1_mode_id 23)
                (set mid_squad2_mode_id 25)
                (set mid_squad3_mode_id 26)
                (set mid_squad4_mode_id 25)
                (set mid_squad5_mode_id 26)
                (set mid_squad6_mode_id 23)
                (set mid_squad7_mode_id 23)
                (set uses_dropships_final 0)
                (set final_squad1_mode_id 24)
                (set final_squad2_mode_id 24)
                (set final_squad3_mode_id 23)
                (set uses_dropships_bonus 0)
                (set bonus_squad1_mode_id 24)
                (set bonus_squad2_mode_id 24)
                (set bonus_squad3_mode_id 24)
                (set player_pri_weap_id 2)
                (set allied_weapon_set 6)
                (set skull_mode_id 5)
                (set increased_enemy_count_initial 1)
                (set increased_enemy_count_final 1)
            )
        )
        (if (= game_mode_id 9)
            (begin
                (set use_built_in_enemy_spawns 0)
                (set uses_dropships_initial 0)
                (set initial_squad1_mode_id 27)
                (set initial_squad2_mode_id 27)
                (set initial_squad3_mode_id 27)
                (set mid_squad1_mode_id 27)
                (set mid_squad2_mode_id 27)
                (set mid_squad3_mode_id 27)
                (set mid_squad4_mode_id 27)
                (set mid_squad5_mode_id 27)
                (set mid_squad6_mode_id 27)
                (set mid_squad7_mode_id 27)
                (set uses_dropships_final 0)
                (set final_squad1_mode_id 27)
                (set final_squad2_mode_id 27)
                (set final_squad3_mode_id 27)
                (set uses_dropships_bonus 0)
                (set bonus_squad1_mode_id 27)
                (set bonus_squad2_mode_id 27)
                (set bonus_squad3_mode_id 27)
                (set player_pri_weap_id 7)
                (set player_sec_weap_id 6)
                (set player_inf_ammo_mode_id 1)
                (set time_mode_id 5)
                (set allied_weapon_set 3)
                (set invincible_allies 1)
                (set lives_mode_id 5)
                (set round_mode_id 2)
                (set uses_hazards 0)
                (set skull_mode_id 6)
                (set indestructible_vehicles 1)
                (set vehicle_mode_id 9)
                (set increased_enemy_count_initial 1)
                (set increased_enemy_count_final 1)
            )
        )
        (if (= game_mode_id 10)
            (begin
                (set use_built_in_enemy_spawns 0)
                (set uses_dropships_initial 0)
                (set initial_squad1_mode_id 28)
                (set initial_squad2_mode_id 28)
                (set initial_squad3_mode_id 28)
                (set mid_squad1_mode_id 28)
                (set mid_squad2_mode_id 28)
                (set mid_squad3_mode_id 28)
                (set mid_squad4_mode_id 28)
                (set mid_squad5_mode_id 28)
                (set mid_squad6_mode_id 28)
                (set mid_squad7_mode_id 28)
                (set uses_dropships_final 0)
                (set final_squad1_mode_id 28)
                (set final_squad2_mode_id 28)
                (set final_squad3_mode_id 28)
                (set uses_dropships_bonus 0)
                (set bonus_squad1_mode_id 28)
                (set bonus_squad2_mode_id 28)
                (set bonus_squad3_mode_id 28)
                (set ai_unified_team 1)
                (set player_pri_weap_id 17)
                (set player_sec_weap_id 17)
                (set skull_mode_id 11)
                (set time_mode_id 5)
                (set vehicle_mode_id 9)
                (set indestructible_vehicles 1)
                (set allied_weapon_set 1)
                (set invincible_allies 1)
                (set lives_mode_id 5)
                (set round_mode_id 2)
                (set player_inf_ammo_mode_id 1)
                (set weapon_drops 3)
                (set increased_enemy_count_initial 1)
                (set increased_enemy_count_final 1)
                (set digsite_content_enabled 1)
                (set custom_content_enabled 1)
            )
        )
        (if (= game_mode_id 11)
            (begin
                (set use_built_in_enemy_spawns 0)
                (set uses_dropships_initial 0)
                (set initial_squad1_mode_id 80)
                (set initial_squad2_mode_id 80)
                (set initial_squad3_mode_id 80)
                (set mid_squad1_mode_id 81)
                (set mid_squad2_mode_id 82)
                (set mid_squad3_mode_id 83)
                (set mid_squad4_mode_id 84)
                (set mid_squad5_mode_id 85)
                (set mid_squad6_mode_id 86)
                (set mid_squad7_mode_id 87)
                (set uses_dropships_final 0)
                (set final_squad1_mode_id 88)
                (set final_squad2_mode_id 89)
                (set final_squad3_mode_id 90)
                (set uses_dropships_bonus 0)
                (set bonus_squad1_mode_id 91)
                (set bonus_squad2_mode_id 91)
                (set bonus_squad3_mode_id 91)
                (set squad_customisation_disabled 1)
                (set player_pri_weap_id 8)
                (set player_sec_weap_id 18)
                (set skull_mode_id 14)
                (set time_mode_id 5)
                (set indestructible_vehicles 1)
                (set allied_weapon_set 5)
                (set invincible_allies 1)
                (set lives_mode_id 5)
                (set round_mode_id 2)
                (set player_inf_ammo_mode_id 1)
                (set weapon_drops 0)
                (set uses_hazards 0)
            )
        )
    )
)

(script static void game_mode_setup
    (begin
        (add_equipment)
        (secondary_skulls)
        (if (> player_inf_ammo_mode_id 0)
            (set debug_ice_cream_flavor_status_bandanna 1)
        )
        (if (= player_inf_ammo_mode_id 2)
            (set cheat_bottomless_clip 1)
        )
        (if (!= player_inf_ammo_mode_id 2)
            (set cheat_bottomless_clip 0)
        )
        (if player_active_camo
            (cheat_active_camouflage)
        )
        (update_lives_limit)
        (update_time_limit)
        (update_round_limit)
        (dropship_sanity_check)
        (if ai_unified_team
            (begin
                (ai_allegiance "covenant" "flood")
                (ai_allegiance "covenant" "sentinel")
                (ai_allegiance "flood" "sentinel")
            )
        )
        (if (and (= vehicle_mode_id 12) (= digsite_content_enabled 0))
            (begin
                (set vehicle_mode_id (random_range 1 12))
                (if (or (= vehicle_mode_id 8) (= vehicle_mode_id 9))
                    (set vehicle_mode_id (random_range 1 12))
                )
                (if (or (= vehicle_mode_id 8) (= vehicle_mode_id 9))
                    (set vehicle_mode_id 1)
                )
            )
        )
        (if (and (= vehicle_mode_id 12) (= digsite_content_enabled 1))
            (set vehicle_mode_id (random_range 1 12))
        )
        (if (= skull_mode_id 11)
            (set skulls_to_activate 1)
        )
        (if (= skull_mode_id 12)
            (set skulls_to_activate 2)
        )
        (if (= skull_mode_id 13)
            (set skulls_to_activate 3)
        )
        (if (= ai_grenade_use 0)
            (ai_grenades 0)
        )
    )
)

(script static void game_over
    (begin
        (set game_over_flag 1)
        (sleep_until (= enable_bonus_round 0))
        (ai_disregard (players) 1)
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_game_over" "none" 1)
        (set warned_game_over 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_game_over")
        (sleep 120)
        (show_hud_help_text 0)
        (fade_out 0 0 0 90)
        (sleep 120)
        (game_lost)
    )
)

(script continuous game_setup_hack
    (begin
        (sleep_until start_game_setup 1)
        (show_hud_help_text 1)
        (update_ff_help_text)
        (player_enable_input 0)
        (sleep_until (or
                (player_action_test_primary_trigger)
                (player_action_test_grenade_trigger)
                (player_action_test_accept)
                (player_action_test_back)
                (player_action_test_action)
                (player_action_test_zoom)
            )
        )
        (if (and
                (player_action_test_primary_trigger)
                (= game_menu_confirm_selection 0)
                (!= game_menu_id 6)
            )
            (menu_select_plus)
        )
        (if (and
                (player_action_test_grenade_trigger)
                (= game_menu_confirm_selection 0)
                (!= game_menu_id 6)
            )
            (menu_select_minus)
        )
        (if (player_action_test_accept)
            (menu_advance)
        )
        (if (player_action_test_back)
            (menu_back)
        )
        (if (or (player_action_test_action) (player_action_test_zoom))
            (menu_close)
        )
        (sleep 15)
        (player_action_test_reset)
    )
)

(script static void hazard_spawn
    (begin
        (set hazard_random_number (random_range 1 100))
        (if (and (>= hazard_chance hazard_random_number) (= hazard_spawned 0))
            (level_specific_hazard)
        )
    )
)

(script static void healthpacks
    (begin
        (sleep 60)
        (object_create_anew_containing "starting_equipment_health")
        (level_specific_vitality)
        (sleep 150)
    )
)

(script static void help_squad_optimisation
    (begin
        (if (= squad_menu_string 0)
            (hud_set_help_text "ff_sd_0")
        )
        (if (= squad_menu_string 1)
            (hud_set_help_text "ff_sd_1")
        )
        (if (= squad_menu_string 2)
            (hud_set_help_text "ff_sd_2")
        )
        (if (= squad_menu_string 3)
            (hud_set_help_text "ff_sd_3")
        )
        (if (= squad_menu_string 4)
            (hud_set_help_text "ff_sd_4")
        )
        (if (= squad_menu_string 5)
            (hud_set_help_text "ff_sd_5")
        )
        (if (= squad_menu_string 6)
            (hud_set_help_text "ff_sd_6")
        )
        (if (= squad_menu_string 7)
            (hud_set_help_text "ff_sd_7")
        )
        (if (= squad_menu_string 8)
            (hud_set_help_text "ff_sd_8")
        )
        (if (= squad_menu_string 9)
            (hud_set_help_text "ff_sd_9")
        )
        (if (= squad_menu_string 10)
            (hud_set_help_text "ff_sd_10")
        )
        (if (= squad_menu_string 11)
            (hud_set_help_text "ff_sd_11")
        )
        (if (= squad_menu_string 12)
            (hud_set_help_text "ff_sd_12")
        )
        (if (= squad_menu_string 13)
            (hud_set_help_text "ff_sd_13")
        )
        (if (= squad_menu_string 14)
            (hud_set_help_text "ff_sd_14")
        )
        (if (= squad_menu_string 15)
            (hud_set_help_text "ff_sd_15")
        )
        (if (= squad_menu_string 16)
            (hud_set_help_text "ff_sd_16")
        )
        (if (= squad_menu_string 17)
            (hud_set_help_text "ff_sd_17")
        )
        (if (= squad_menu_string 18)
            (hud_set_help_text "ff_sd_18")
        )
        (if (= squad_menu_string 19)
            (hud_set_help_text "ff_sd_19")
        )
        (if (= squad_menu_string 20)
            (hud_set_help_text "ff_sd_20")
        )
        (if (= squad_menu_string 21)
            (hud_set_help_text "ff_sd_21")
        )
        (if (= squad_menu_string 22)
            (hud_set_help_text "ff_sd_22")
        )
        (if (= squad_menu_string 23)
            (hud_set_help_text "ff_sd_23")
        )
        (if (= squad_menu_string 24)
            (hud_set_help_text "ff_sd_24")
        )
        (if (= squad_menu_string 25)
            (hud_set_help_text "ff_sd_25")
        )
        (if (= squad_menu_string 26)
            (hud_set_help_text "ff_sd_26")
        )
        (if (= squad_menu_string 27)
            (hud_set_help_text "ff_sd_27")
        )
        (if (= squad_menu_string 28)
            (hud_set_help_text "ff_sd_28")
        )
        (if (= squad_menu_string 29)
            (hud_set_help_text "ff_sd_29")
        )
        (if (= squad_menu_string 30)
            (hud_set_help_text "ff_sd_30")
        )
    )
)

(script static void initial_enemies
    (begin
        (begin_random
            (set squad_id_to_spawn initial_squad1_mode_id)
            (set squad_id_to_spawn initial_squad2_mode_id)
            (set squad_id_to_spawn initial_squad3_mode_id)
        )
        (spawn_enemies)
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/initial_squad_1")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/initial_squad_1")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/initial_squad_1")
        (begin_random
            (set squad_id_to_spawn initial_squad1_mode_id)
            (set squad_id_to_spawn initial_squad2_mode_id)
            (set squad_id_to_spawn initial_squad3_mode_id)
        )
        (spawn_enemies)
        (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/initial_squad_2")
        (ai_migrate "ff_wave_build_flood" "ff_enemies_flood/initial_squad_2")
        (ai_migrate "ff_wave_build_sentinels" "ff_enemies_sentinels/initial_squad_2")
    )
)

(script static void initial_wave
    (begin
        (set enable_wave_manager 0)
        (if (not (and (= uses_dropships_initial 1) (= dropships_supported 1)))
            (check_spawn_blockers)
        )
        (stop_all_music)
        (if uses_hazards
            (hazard_spawn)
        )
        (if increased_enemy_count_initial
            (begin
                (play_music)
                (build_mid_squads)
                (teleport_ai)
            )
            (begin
                (if (and (= uses_dropships_initial 1) (= dropships_supported 1))
                    (begin
                        (object_create_anew "dropship1")
                        (object_create_anew "dropship2")
                    )
                )
                (initial_enemies)
                (sleep 30)
                (if (and (= uses_dropships_initial 1) (= dropships_supported 1))
                    (load_initial_dropships)
                    (migrate_and_teleport_initial)
                )
                (if (= ai_equipment_drops 0)
                    (begin
                        (unit_doesnt_drop_items (ai_actors "ff_enemies_cov"))
                        (unit_doesnt_drop_items (ai_actors "ff_enemies_flood"))
                    )
                )
                (play_music)
                (sleep 30)
                (if (and (= uses_dropships_initial 1) (= dropships_supported 1))
                    (dropships)
                )
            )
        )
        (sleep_until (> 8 (+
                    (ai_nonswarm_count "ff_enemies_cov")
                    (ai_nonswarm_count "ff_enemies_flood")
                    (ai_nonswarm_count "ff_enemies_sentinels")
                )
            )
        )
        (sleep_until (> 3 (+
                    (ai_nonswarm_count "ff_enemies_cov")
                    (ai_nonswarm_count "ff_enemies_flood")
                    (ai_nonswarm_count "ff_enemies_sentinels")
                )
            ) 15 600
        )
        (stop_all_music)
        (reinforcements)
    )
)

(script continuous invincible_marine_shields
    (begin
        (sleep_until invincible_allies)
        (ai_renew "ff_marines")
        (sleep 15)
    )
)

(script static void level_specific_all_vehicles
    (begin
        (object_create_anew_containing "starting_vehicle")
        (object_create_anew "special_vehicle_banshee")
        (object_create_anew "special_vehicle_wraith")
        (object_create_anew "special_vehicle_scorpion")
        (if (= digsite_content_enabled 1)
            (begin
                (object_create_anew "special_vehicle_spectre")
                (object_create_anew "special_vehicle_kestrel")
            )
        )
    )
)

(script static void level_specific_barriers
    (begin
        (if (or
                (volume_test_object "death_barrier_1" (player0))
                (volume_test_object "death_barrier_2" (player0))
                (volume_test_object "death_barrier_3" (player0))
            )
            (begin
                (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player0))
                (if (> (unit_get_health (player0)) 0)
                    (object_teleport (player0) "p0_respawn_point_real")
                )
            )
        )
        (if (or
                (volume_test_object "death_barrier_1" (player1))
                (volume_test_object "death_barrier_2" (player1))
                (volume_test_object "death_barrier_3" (player1))
            )
            (begin
                (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player1))
                (if (> (unit_get_health (player1)) 0)
                    (object_teleport (player1) "p1_respawn_point_real")
                )
            )
        )
        (if (or
                (volume_test_object "death_barrier_1" (player2))
                (volume_test_object "death_barrier_2" (player2))
                (volume_test_object "death_barrier_3" (player2))
            )
            (begin
                (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player2))
                (if (> (unit_get_health (player2)) 0)
                    (object_teleport (player2) "p2_respawn_point_real")
                )
            )
        )
        (if (or
                (volume_test_object "death_barrier_1" (player3))
                (volume_test_object "death_barrier_2" (player3))
                (volume_test_object "death_barrier_3" (player3))
            )
            (begin
                (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player3))
                (if (> (unit_get_health (player3)) 0)
                    (object_teleport (player3) "p3_respawn_point_real")
                )
            )
        )
        (if (or (volume_test_object "death_barrier_soft_1" (player0)) (volume_test_object "death_barrier_soft_2" (player0)))
            (begin
                (set soft_kill_counter_p0 (+ 1 soft_kill_counter_p0))
                (if (and (> 6 soft_kill_counter_p0) (> soft_kill_counter_p0 0))
                    (damage_object "effects\damage effects\soft_kill_warning" (player0))
                )
                (if (and (> 8 soft_kill_counter_p0) (> soft_kill_counter_p0 5))
                    (damage_object "effects\damage effects\soft_kill_alert" (player0))
                )
                (if (and (> 11 soft_kill_counter_p0) (> soft_kill_counter_p0 7))
                    (damage_object "effects\damage effects\soft_kill_critical" (player0))
                )
                (if (= soft_kill_counter_p0 11)
                    (begin
                        (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player0))
                        (if (> (unit_get_health (player0)) 0)
                            (object_teleport (player0) "p0_respawn_point_real")
                        )
                        (set soft_kill_counter_p0 0)
                    )
                )
            )
        )
        (if (or (volume_test_object "death_barrier_soft_1" (player1)) (volume_test_object "death_barrier_soft_2" (player1)))
            (begin
                (set soft_kill_counter_p1 (+ 1 soft_kill_counter_p1))
                (if (and (> 6 soft_kill_counter_p1) (> soft_kill_counter_p1 0))
                    (damage_object "effects\damage effects\soft_kill_warning" (player1))
                )
                (if (and (> 8 soft_kill_counter_p1) (> soft_kill_counter_p1 5))
                    (damage_object "effects\damage effects\soft_kill_alert" (player1))
                )
                (if (and (> 11 soft_kill_counter_p1) (> soft_kill_counter_p1 7))
                    (damage_object "effects\damage effects\soft_kill_critical" (player1))
                )
                (if (= soft_kill_counter_p1 11)
                    (begin
                        (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player1))
                        (if (> (unit_get_health (player1)) 0)
                            (object_teleport (player1) "p1_respawn_point_real")
                        )
                        (set soft_kill_counter_p1 0)
                    )
                )
            )
        )
        (if (or (volume_test_object "death_barrier_soft_1" (player2)) (volume_test_object "death_barrier_soft_2" (player2)))
            (begin
                (set soft_kill_counter_p2 (+ 1 soft_kill_counter_p2))
                (if (and (> 6 soft_kill_counter_p2) (> soft_kill_counter_p2 0))
                    (damage_object "effects\damage effects\soft_kill_warning" (player2))
                )
                (if (and (> 8 soft_kill_counter_p2) (> soft_kill_counter_p2 5))
                    (damage_object "effects\damage effects\soft_kill_alert" (player2))
                )
                (if (and (> 11 soft_kill_counter_p2) (> soft_kill_counter_p2 7))
                    (damage_object "effects\damage effects\soft_kill_critical" (player2))
                )
                (if (= soft_kill_counter_p2 11)
                    (begin
                        (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player2))
                        (if (> (unit_get_health (player2)) 0)
                            (object_teleport (player2) "p2_respawn_point_real")
                        )
                        (set soft_kill_counter_p2 0)
                    )
                )
            )
        )
        (if (or (volume_test_object "death_barrier_soft_1" (player3)) (volume_test_object "death_barrier_soft_2" (player3)))
            (begin
                (set soft_kill_counter_p3 (+ 1 soft_kill_counter_p3))
                (if (and (> 6 soft_kill_counter_p3) (> soft_kill_counter_p3 0))
                    (damage_object "effects\damage effects\soft_kill_warning" (player3))
                )
                (if (and (> 8 soft_kill_counter_p3) (> soft_kill_counter_p3 5))
                    (damage_object "effects\damage effects\soft_kill_alert" (player3))
                )
                (if (and (> 11 soft_kill_counter_p3) (> soft_kill_counter_p3 7))
                    (damage_object "effects\damage effects\soft_kill_critical" (player3))
                )
                (if (= soft_kill_counter_p3 11)
                    (begin
                        (damage_object "effects\damage effects\guaranteed plummet to untimely death" (player3))
                        (if (> (unit_get_health (player3)) 0)
                            (object_teleport (player3) "p3_respawn_point_real")
                        )
                        (set soft_kill_counter_p3 0)
                    )
                )
            )
        )
    )
)

(script static void level_specific_bonus_drop
    (recording_play_and_hover "dropship1" "pipe_cship_drop")
)

(script static void level_specific_bonus_enter
    (recording_play_and_hover "dropship1" "pipe_cship_enter")
)

(script static void level_specific_bonus_exit
    (recording_play_and_delete "dropship1" "pipe_cship_exit")
)

(script static void level_specific_hazard
    (begin_random
        (if (not hazard_spawned)
            (begin
                (print "hazard banshee")
                (object_create_anew "hazard_banshee")
                (ai_place "hazard_banshee/elite_pilot")
                (unit_set_enterable_by_player "hazard_banshee" 0)
                (vehicle_load_magic "hazard_banshee" "driver" (ai_actors "hazard_banshee/elite_pilot"))
                (object_teleport "hazard_banshee" "hazard_banshee_start")
                (ai_command_list "hazard_banshee/elite_pilot" "hazard_banshee")
                (ai_magically_see_players "hazard_banshee/elite_pilot")
                (set hazard_spawned 1)
            )
        )
        (if (not hazard_spawned)
            (begin
                (object_create_anew "hazard_ghost")
                (ai_place "hazard_ground/elite_pilot")
                (unit_set_enterable_by_player "hazard_ghost" 0)
                (vehicle_load_magic "hazard_ghost" "driver" (ai_actors "hazard_ground/elite_pilot"))
                (object_teleport "hazard_ghost" "ground_hazard_flag")
                (ai_command_list "hazard_ground/elite_pilot" "hazard_ground")
                (ai_magically_see_players "hazard_ground/elite_pilot")
                (set hazard_spawned 1)
            )
        )
        (if (not hazard_spawned)
            (begin
                (object_create_anew "hazard_wraith")
                (ai_place "hazard_ground/elite_pilot")
                (unit_set_enterable_by_player "hazard_wraith" 0)
                (vehicle_load_magic "hazard_wraith" "driver" (ai_actors "hazard_ground/elite_pilot"))
                (object_teleport "hazard_wraith" "ground_hazard_flag")
                (ai_command_list "hazard_ground/elite_pilot" "hazard_ground")
                (ai_magically_see_players "hazard_ground/elite_pilot")
                (set hazard_spawned 1)
            )
        )
    )
)

(script static void level_specific_kill_hazard
    (begin
        (unit_kill "hazard_banshee")
        (unit_kill "hazard_ghost")
        (unit_kill "hazard_wraith")
        (ai_kill "hazard_banshee")
        (ai_kill "hazard_ground")
    )
)

(script static void level_specific_variables
    (begin
        (set dropships_supported 1)
        (set hazards_supported 1)
        (set vehicles_supported 1)
        (set allies_supported 1)
        (set marines_use_flashlight 0)
    )
)

(script static void level_specific_vehicle_destroy
    (begin
        (if (= (unit_get_health "starting_vehicle_ghost1") 0)
            (unit_kill "starting_vehicle_ghost1")
        )
        (if (= (unit_get_health "starting_vehicle_ghost2") 0)
            (unit_kill "starting_vehicle_ghost2")
        )
        (if (= (unit_get_health "special_vehicle_wraith") 0)
            (unit_kill "special_vehicle_wraith")
        )
        (if (= (unit_get_health "special_vehicle_banshee") 0)
            (unit_kill "special_vehicle_banshee")
        )
        (if (= (unit_get_health "special_vehicle_spectre") 0)
            (unit_kill "special_vehicle_spectre")
        )
    )
)

(script static void level_specific_vitality
    (begin
        (unit_set_current_vitality "starting_vehicle_ghost1" 160 0)
        (unit_set_current_vitality "starting_vehicle_ghost2" 160 0)
        (unit_set_current_vitality "special_vehicle_wraith" 450 0)
        (unit_set_current_vitality "special_vehicle_banshee" 100 0)
        (unit_set_current_vitality "special_vehicle_spectre" 240 0)
        (if indestructible_vehicles
            (begin
                (object_cannot_take_damage "starting_vehicle_ghost1")
                (object_cannot_take_damage "starting_vehicle_ghost2")
                (object_cannot_take_damage "special_vehicle_wraith")
                (object_cannot_take_damage "special_vehicle_banshee")
                (object_cannot_take_damage "special_vehicle_spectre")
            )
        )
    )
)

(script static void level_vehicle_hack_check
    (begin
        (if (= (unit_get_health "starting_vehicle_ghost1") 0)
            (damage_object "effects\damage effects\guaranteed plummet to untimely death" (vehicle_driver "starting_vehicle_ghost1"))
        )
        (if (= (unit_get_health "starting_vehicle_ghost2") 0)
            (damage_object "effects\damage effects\guaranteed plummet to untimely death" (vehicle_driver "starting_vehicle_ghost2"))
        )
        (if (= (unit_get_health "special_vehicle_wraith") 0)
            (damage_object "effects\damage effects\guaranteed plummet to untimely death" (vehicle_driver "special_vehicle_wraith"))
        )
        (if (= (unit_get_health "special_vehicle_banshee") 0)
            (damage_object "effects\damage effects\guaranteed plummet to untimely death" (vehicle_driver "special_vehicle_banshee"))
        )
        (if (= (unit_get_health "special_vehicle_spectre") 0)
            (damage_object "effects\damage effects\guaranteed plummet to untimely death" (vehicle_driver "special_vehicle_spectre"))
        )
    )
)

(script static void lives_check
    (begin
        (if (and (= uses_lives 1) (= enable_bonus_round 0))
            (set lives_remaining (- lives_remaining 1))
        )
        (if (and
                (< lives_remaining 0)
                (= game_over_flag 0)
                (= enable_bonus_round 0)
            )
            (begin
                (camera_control 1)
                (camera_set "solo_respawn_camera" 0)
                (game_over)
            )
        )
    )
)

(script continuous lives_hack
    (begin
        (level_vehicle_hack_check)
        (if (and (= (unit_get_health (player0)) 0) (= (list_count (players)) 1))
            (p0_respawn_hack)
        )
        (if (and
                (= lives_remaining 5)
                (= warned_lives_5 0)
                (= game_over_flag 0)
            )
            (begin
                (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_5_lives_left" "none" 1)
                (set warned_lives_5 1)
                (show_hud_help_text 1)
                (hud_set_help_text "ff_5_lives")
                (sleep 120)
                (show_hud_help_text 0)
            )
        )
        (if (and
                (= lives_remaining 1)
                (= warned_lives_1 0)
                (= game_over_flag 0)
            )
            (begin
                (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_1_life_left" "none" 1)
                (set warned_lives_1 1)
                (show_hud_help_text 1)
                (hud_set_help_text "ff_1_life")
                (sleep 120)
                (show_hud_help_text 0)
            )
        )
        (if (and
                (= lives_remaining 0)
                (= warned_lives_0 0)
                (= game_over_flag 0)
            )
            (begin
                (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_0_lives_left" "none" 1)
                (set warned_lives_0 1)
                (show_hud_help_text 1)
                (hud_set_help_text "ff_no_lives")
                (sleep 120)
                (show_hud_help_text 0)
            )
        )
    )
)

(script static void load_boss_dropships
    (begin
        (vehicle_load_magic "dropship1" "passenger" (ai_actors "ff_enemies_cov/boss_squad_1"))
        (vehicle_load_magic "dropship2" "passenger" (ai_actors "ff_enemies_cov/boss_squad_2"))
        (dropship_ai_off)
        (dropships_close)
    )
)

(script static void load_initial_dropships
    (begin
        (vehicle_load_magic "dropship1" "passenger" (ai_actors "ff_enemies_cov/initial_squad_1"))
        (vehicle_load_magic "dropship2" "passenger" (ai_actors "ff_enemies_cov/initial_squad_2"))
        (dropship_ai_off)
        (dropships_close)
    )
)

(script static void mark_last_5_enemies
    (if (>= 5 (+
                (ai_nonswarm_count "ff_enemies_cov")
                (ai_nonswarm_count "ff_enemies_flood")
                (ai_nonswarm_count "ff_enemies_sentinels")
            )
        )
        (begin
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_cov") 0)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_cov") 1)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_cov") 2)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_cov") 3)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_cov") 4)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_flood") 0)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_flood") 1)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_flood") 2)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_flood") 3)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_flood") 4)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_sentinels") 0)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_sentinels") 1)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_sentinels") 2)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_sentinels") 3)) 0.6)
            (activate_team_nav_point_object "default_red" "player" (unit (list_get (ai_actors "ff_enemies_sentinels") 4)) 0.6)
        )
    )
)

(script static void menu_0_help
    (begin
        (if (= game_mode_id 0)
            (hud_set_help_text "ff_mode_0")
        )
        (if (= game_mode_id 1)
            (hud_set_help_text "ff_mode_1")
        )
        (if (= game_mode_id 2)
            (hud_set_help_text "ff_mode_2")
        )
        (if (= game_mode_id 3)
            (hud_set_help_text "ff_mode_3")
        )
        (if (= game_mode_id 4)
            (hud_set_help_text "ff_mode_4")
        )
        (if (= game_mode_id 5)
            (hud_set_help_text "ff_mode_5")
        )
        (if (= game_mode_id 6)
            (hud_set_help_text "ff_mode_6")
        )
        (if (= game_mode_id 7)
            (hud_set_help_text "ff_mode_7")
        )
        (if (= game_mode_id 8)
            (hud_set_help_text "ff_mode_8")
        )
        (if (= game_mode_id 9)
            (hud_set_help_text "ff_mode_9")
        )
        (if (= game_mode_id 10)
            (hud_set_help_text "ff_mode_10")
        )
        (if (= game_mode_id 11)
            (hud_set_help_text "ff_mode_11")
        )
    )
)

(script static void menu_1_help
    (begin
        (if (= game_menu_option_id 0)
            (hud_set_help_text "ff_menu_select_l0_0")
        )
        (if (= game_menu_option_id 1)
            (hud_set_help_text "ff_menu_select_l0_1")
        )
        (if (= game_menu_option_id 2)
            (hud_set_help_text "ff_menu_select_l0_2")
        )
        (if (= game_menu_option_id 3)
            (hud_set_help_text "ff_menu_select_l0_3")
        )
    )
)

(script static void menu_2_help
    (begin
        (if (and (= game_menu_option_id 0) (= time_mode_id 0))
            (hud_set_help_text "ff_time_0")
        )
        (if (and (= game_menu_option_id 0) (= time_mode_id 1))
            (hud_set_help_text "ff_time_1")
        )
        (if (and (= game_menu_option_id 0) (= time_mode_id 2))
            (hud_set_help_text "ff_time_2")
        )
        (if (and (= game_menu_option_id 0) (= time_mode_id 3))
            (hud_set_help_text "ff_time_3")
        )
        (if (and (= game_menu_option_id 0) (= time_mode_id 4))
            (hud_set_help_text "ff_time_4")
        )
        (if (and (= game_menu_option_id 0) (= time_mode_id 5))
            (hud_set_help_text "ff_time_5")
        )
        (if (and (= game_menu_option_id 0) (= time_mode_id 6))
            (hud_set_help_text "ff_time_6")
        )
        (if (and (= game_menu_option_id 0) (= time_mode_id 7))
            (hud_set_help_text "ff_time_7")
        )
        (if (and (= game_menu_option_id 1) (= uses_hazards 0))
            (hud_set_help_text "ff_hazards_off")
        )
        (if (and (= game_menu_option_id 1) (= uses_hazards 1))
            (hud_set_help_text "ff_hazards_on")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 0))
            (hud_set_help_text "ff_allies_0")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 1))
            (hud_set_help_text "ff_allies_1")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 2))
            (hud_set_help_text "ff_allies_2")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 3))
            (hud_set_help_text "ff_allies_3")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 4))
            (hud_set_help_text "ff_allies_4")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 5))
            (hud_set_help_text "ff_allies_5")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 6))
            (hud_set_help_text "ff_allies_6")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 7))
            (hud_set_help_text "ff_allies_7")
        )
        (if (and (= game_menu_option_id 2) (= allied_weapon_set 8))
            (hud_set_help_text "ff_allies_8")
        )
        (if (and (= game_menu_option_id 3) (= invincible_allies 0))
            (hud_set_help_text "ff_ally_damres_0")
        )
        (if (and (= game_menu_option_id 3) (= invincible_allies 1))
            (hud_set_help_text "ff_ally_damres_1")
        )
        (if (and (= game_menu_option_id 4) (= sec_skull_assassins 0))
            (hud_set_help_text "ff_assassins_off")
        )
        (if (and (= game_menu_option_id 4) (= sec_skull_assassins 1))
            (hud_set_help_text "ff_assassins_on")
        )
        (if (and (= game_menu_option_id 5) (= ai_equipment_drops 0))
            (hud_set_help_text "ff_equip_drops_off")
        )
        (if (and (= game_menu_option_id 5) (= ai_equipment_drops 1))
            (hud_set_help_text "ff_equip_drops_on")
        )
        (if (and (= game_menu_option_id 6) (= ai_grenade_use 0))
            (hud_set_help_text "ff_ai_grenade_use_off")
        )
        (if (and (= game_menu_option_id 6) (= ai_grenade_use 1))
            (hud_set_help_text "ff_ai_grenade_use_on")
        )
    )
)

(script static void menu_3_help
    (begin
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 0))
            (hud_set_help_text "ff_weap_0")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 1))
            (hud_set_help_text "ff_weap_1")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 2))
            (hud_set_help_text "ff_weap_2")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 3))
            (hud_set_help_text "ff_weap_3")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 4))
            (hud_set_help_text "ff_weap_4")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 5))
            (hud_set_help_text "ff_weap_5")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 6))
            (hud_set_help_text "ff_weap_6")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 7))
            (hud_set_help_text "ff_weap_7")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 8))
            (hud_set_help_text "ff_weap_8")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 9))
            (hud_set_help_text "ff_weap_9")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 10))
            (hud_set_help_text "ff_weap_10")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 11))
            (hud_set_help_text "ff_weap_11")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 12))
            (hud_set_help_text "ff_weap_12")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 13))
            (hud_set_help_text "ff_weap_13")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 14))
            (hud_set_help_text "ff_weap_14")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 15))
            (hud_set_help_text "ff_weap_15")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 16))
            (hud_set_help_text "ff_weap_16")
        )
        (if (and (= game_menu_option_id 0) (= player_pri_weap_id 17))
            (hud_set_help_text "ff_weap_17")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 0))
            (hud_set_help_text "ff_weap_0")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 1))
            (hud_set_help_text "ff_weap_1")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 2))
            (hud_set_help_text "ff_weap_2")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 3))
            (hud_set_help_text "ff_weap_3")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 4))
            (hud_set_help_text "ff_weap_4")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 5))
            (hud_set_help_text "ff_weap_5")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 6))
            (hud_set_help_text "ff_weap_6")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 7))
            (hud_set_help_text "ff_weap_7")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 8))
            (hud_set_help_text "ff_weap_8")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 9))
            (hud_set_help_text "ff_weap_9")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 10))
            (hud_set_help_text "ff_weap_10")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 11))
            (hud_set_help_text "ff_weap_11")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 12))
            (hud_set_help_text "ff_weap_12")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 13))
            (hud_set_help_text "ff_weap_13")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 14))
            (hud_set_help_text "ff_weap_14")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 15))
            (hud_set_help_text "ff_weap_15")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 16))
            (hud_set_help_text "ff_weap_16")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 17))
            (hud_set_help_text "ff_weap_17")
        )
        (if (and (= game_menu_option_id 1) (= player_sec_weap_id 18))
            (hud_set_help_text "ff_weap_18")
        )
        (if (and (= game_menu_option_id 2) (= player_start_gren_mode_id 0))
            (hud_set_help_text "ff_grenades_0")
        )
        (if (and (= game_menu_option_id 2) (= player_start_gren_mode_id 1))
            (hud_set_help_text "ff_grenades_1")
        )
        (if (and (= game_menu_option_id 2) (= player_start_gren_mode_id 2))
            (hud_set_help_text "ff_grenades_2")
        )
        (if (and (= game_menu_option_id 2) (= player_start_gren_mode_id 3))
            (hud_set_help_text "ff_grenades_3")
        )
        (if (and (= game_menu_option_id 3) (= player_inf_ammo_mode_id 0))
            (hud_set_help_text "ff_menu_ptl1_infinite_ammo_0")
        )
        (if (and (= game_menu_option_id 3) (= player_inf_ammo_mode_id 1))
            (hud_set_help_text "ff_menu_ptl1_infinite_ammo_1")
        )
        (if (and (= game_menu_option_id 3) (= player_inf_ammo_mode_id 2))
            (hud_set_help_text "ff_menu_ptl1_infinite_ammo_2")
        )
        (if (and (= game_menu_option_id 4) (= player_active_camo 0))
            (hud_set_help_text "ff_camo_0")
        )
        (if (and (= game_menu_option_id 4) (= player_active_camo 1))
            (hud_set_help_text "ff_camo_1")
        )
    )
)

(script static void menu_4_help
    (begin
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 0))
            (hud_set_help_text "ff_v_set_0")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 1))
            (hud_set_help_text "ff_v_set_1")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 2))
            (hud_set_help_text "ff_v_set_2")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 3))
            (hud_set_help_text "ff_v_set_3")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 4))
            (hud_set_help_text "ff_v_set_4")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 5))
            (hud_set_help_text "ff_v_set_5")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 6))
            (hud_set_help_text "ff_v_set_6")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 7))
            (hud_set_help_text "ff_v_set_7")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 8))
            (hud_set_help_text "ff_v_set_8")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 9))
            (hud_set_help_text "ff_v_set_9")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 10))
            (hud_set_help_text "ff_v_set_10")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 11))
            (hud_set_help_text "ff_v_set_11")
        )
        (if (and (= game_menu_option_id 0) (= vehicle_mode_id 12))
            (hud_set_help_text "ff_v_set_12")
        )
        (if (and (= game_menu_option_id 1) (= indestructible_vehicles 0))
            (hud_set_help_text "ff_veh_invuln_0")
        )
        (if (and (= game_menu_option_id 1) (= indestructible_vehicles 1))
            (hud_set_help_text "ff_veh_invuln_1")
        )
        (if (and (= game_menu_option_id 2) (= weapon_drops 0))
            (hud_set_help_text "ff_map_equip_0")
        )
        (if (and (= game_menu_option_id 2) (= weapon_drops 1))
            (hud_set_help_text "ff_map_equip_1")
        )
        (if (and (= game_menu_option_id 2) (= weapon_drops 2))
            (hud_set_help_text "ff_map_equip_2")
        )
        (if (and (= game_menu_option_id 2) (= weapon_drops 3))
            (hud_set_help_text "ff_map_equip_3")
        )
        (if (and (= game_menu_option_id 3) (= digsite_content_enabled 0))
            (hud_set_help_text "ff_digsite_off")
        )
        (if (and (= game_menu_option_id 3) (= digsite_content_enabled 1))
            (hud_set_help_text "ff_digsite_on")
        )
        (if (and (= game_menu_option_id 4) (= custom_content_enabled 0))
            (hud_set_help_text "ff_custom_off")
        )
        (if (and (= game_menu_option_id 4) (= custom_content_enabled 1))
            (hud_set_help_text "ff_custom_on")
        )
    )
)

(script static void menu_521_help
    (begin
        (if (and (= game_menu_option_id 0) (= uses_dropships_initial 0))
            (hud_set_help_text "ff_dropship_off")
        )
        (if (and (= game_menu_option_id 0) (= uses_dropships_initial 1))
            (hud_set_help_text "ff_dropship_on")
        )
        (if (and (= game_menu_option_id 1) (= increased_enemy_count_initial 0))
            (hud_set_help_text "ff_increased_enemies_off")
        )
        (if (and (= game_menu_option_id 1) (= increased_enemy_count_initial 1))
            (hud_set_help_text "ff_increased_enemies_on")
        )
        (if (= game_menu_option_id 2)
            (begin
                (set squad_menu_string initial_squad1_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 3)
            (begin
                (set squad_menu_string initial_squad2_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 4)
            (begin
                (set squad_menu_string initial_squad3_mode_id)
                (help_squad_optimisation)
            )
        )
    )
)

(script static void menu_522_help
    (begin
        (if (and (= game_menu_option_id 0) (= use_built_in_enemy_spawns 0))
            (hud_set_help_text "ff_built_in_spawns_0")
        )
        (if (and (= game_menu_option_id 0) (= use_built_in_enemy_spawns 1))
            (hud_set_help_text "ff_built_in_spawns_1")
        )
        (if (= game_menu_option_id 1)
            (begin
                (set squad_menu_string mid_squad1_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 2)
            (begin
                (set squad_menu_string mid_squad2_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 3)
            (begin
                (set squad_menu_string mid_squad3_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 4)
            (begin
                (set squad_menu_string mid_squad4_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 5)
            (begin
                (set squad_menu_string mid_squad5_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 6)
            (begin
                (set squad_menu_string mid_squad6_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 7)
            (begin
                (set squad_menu_string mid_squad7_mode_id)
                (help_squad_optimisation)
            )
        )
    )
)

(script static void menu_523_help
    (begin
        (if (and (= game_menu_option_id 0) (= uses_dropships_final 0))
            (hud_set_help_text "ff_dropship_off")
        )
        (if (and (= game_menu_option_id 0) (= uses_dropships_final 1))
            (hud_set_help_text "ff_dropship_on")
        )
        (if (and (= game_menu_option_id 1) (= increased_enemy_count_final 0))
            (hud_set_help_text "ff_increased_enemies_off")
        )
        (if (and (= game_menu_option_id 1) (= increased_enemy_count_final 1))
            (hud_set_help_text "ff_increased_enemies_on")
        )
        (if (= game_menu_option_id 2)
            (begin
                (set squad_menu_string final_squad1_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 3)
            (begin
                (set squad_menu_string final_squad2_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (= game_menu_option_id 4)
            (begin
                (set squad_menu_string final_squad3_mode_id)
                (help_squad_optimisation)
            )
        )
    )
)

(script static void menu_524_help
    (begin
        (if (and (= game_menu_option_id 0) (= uses_dropships_bonus 0))
            (hud_set_help_text "ff_dropship_off")
        )
        (if (and (= game_menu_option_id 0) (= uses_dropships_bonus 1))
            (hud_set_help_text "ff_dropship_on")
        )
        (if (= game_menu_option_id 1)
            (begin
                (set squad_menu_string bonus_squad1_mode_id)
                (help_squad_optimisation)
            )
        )
        (if (and (= game_menu_option_id 2) (= bonus_random_each_spawn 0))
            (hud_set_help_text "ff_random_bonus_off")
        )
        (if (and (= game_menu_option_id 2) (= bonus_random_each_spawn 1))
            (hud_set_help_text "ff_random_bonus_on")
        )
    )
)

(script static void menu_52_help
    (begin
        (if (= game_menu_option_id 0)
            (hud_set_help_text "ff_open_initw")
        )
        (if (= game_menu_option_id 1)
            (hud_set_help_text "ff_open_midw")
        )
        (if (= game_menu_option_id 2)
            (hud_set_help_text "ff_open_bossw")
        )
        (if (= game_menu_option_id 3)
            (hud_set_help_text "ff_menu_ffl2_open_l3_bonus")
        )
    )
)

(script static void menu_5_help
    (begin
        (if (and (= game_menu_option_id 0) (= lives_mode_id 0))
            (hud_set_help_text "ff_s_lives_0")
        )
        (if (and (= game_menu_option_id 0) (= lives_mode_id 1))
            (hud_set_help_text "ff_s_lives_1")
        )
        (if (and (= game_menu_option_id 0) (= lives_mode_id 2))
            (hud_set_help_text "ff_s_lives_2")
        )
        (if (and (= game_menu_option_id 0) (= lives_mode_id 3))
            (hud_set_help_text "ff_s_lives_3")
        )
        (if (and (= game_menu_option_id 0) (= lives_mode_id 4))
            (hud_set_help_text "ff_s_lives_4")
        )
        (if (and (= game_menu_option_id 0) (= lives_mode_id 5))
            (hud_set_help_text "ff_s_lives_5")
        )
        (if (and (= game_menu_option_id 1) (= round_mode_id 0))
            (hud_set_help_text "ff_r_limit_0")
        )
        (if (and (= game_menu_option_id 1) (= round_mode_id 1))
            (hud_set_help_text "ff_r_limit_1")
        )
        (if (and (= game_menu_option_id 1) (= round_mode_id 2))
            (hud_set_help_text "ff_r_limit_2")
        )
        (if (and (= game_menu_option_id 1) (= round_mode_id 3))
            (hud_set_help_text "ff_r_limit_3")
        )
        (if (and (= game_menu_option_id 1) (= round_mode_id 4))
            (hud_set_help_text "ff_r_limit_4")
        )
        (if (and (= game_menu_option_id 1) (= round_mode_id 5))
            (hud_set_help_text "ff_r_limit_5")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 0))
            (hud_set_help_text "ff_skulls_0")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 1))
            (hud_set_help_text "ff_skulls_1")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 2))
            (hud_set_help_text "ff_skulls_2")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 3))
            (hud_set_help_text "ff_skulls_3")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 4))
            (hud_set_help_text "ff_skulls_4")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 5))
            (hud_set_help_text "ff_skulls_5")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 6))
            (hud_set_help_text "ff_skulls_6")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 7))
            (hud_set_help_text "ff_skulls_7")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 8))
            (hud_set_help_text "ff_skulls_8")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 9))
            (hud_set_help_text "ff_skulls_9")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 10))
            (hud_set_help_text "ff_skulls_10")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 11))
            (hud_set_help_text "ff_skulls_11")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 12))
            (hud_set_help_text "ff_skulls_12")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 13))
            (hud_set_help_text "ff_skulls_13")
        )
        (if (and (= game_menu_option_id 2) (= skull_mode_id 14))
            (hud_set_help_text "ff_skulls_14")
        )
        (if (and (= game_menu_option_id 3) (= ai_unified_team 0))
            (hud_set_help_text "ff_ai_allegiance_0")
        )
        (if (and (= game_menu_option_id 3) (= ai_unified_team 1))
            (hud_set_help_text "ff_ai_allegiance_1")
        )
        (if (= game_menu_option_id 4)
            (hud_set_help_text "ff_open_l2_setwave")
        )
    )
)

(script static void menu_6_help
    (hud_set_help_text "ff_game_setup_complete")
)

(script static void menu_advance
    (begin
        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
        (if (= game_menu_id 1)
            (if (= game_menu_option_id 3)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 2)
            (if (= game_menu_option_id 6)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 3)
            (if (= game_menu_option_id 4)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 4)
            (if (= game_menu_option_id 4)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 5)
            (if (= game_menu_option_id 4)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 52)
            (if (= game_menu_option_id 3)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 521)
            (if (= game_menu_option_id 4)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 522)
            (if (= game_menu_option_id 7)
                (set game_menu_option_id 0)
                (if (= use_built_in_enemy_spawns 0)
                    (set game_menu_option_id (+ game_menu_option_id 1))
                )
            )
        )
        (if (= game_menu_id 523)
            (if (= game_menu_option_id 4)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 524)
            (if (= game_menu_option_id 2)
                (set game_menu_option_id 0)
                (set game_menu_option_id (+ game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 6)
            (begin
                (show_hud_help_text 0)
                (set start_game_setup 0)
                (player_action_test_reset)
            )
        )
        (if (= game_menu_id 0)
            (begin
                (player_action_test_reset)
                (set game_menu_option_id 0)
                (if (= game_customisation_disabled 1)
                    (set game_menu_id 6)
                    (set game_menu_id 1)
                )
            )
        )
    )
)

(script static void menu_back
    (begin
        (sound_impulse_start "sound\sfx\ui\back" "none" 1)
        (if (= game_menu_id 1)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 3)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 2)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 6)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 3)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 4)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 4)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 4)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 5)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 4)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 52)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 3)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 521)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 4)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 522)
            (if (and (= game_menu_option_id 0) (= use_built_in_enemy_spawns 0))
                (set game_menu_option_id 7)
                (if (and (> game_menu_option_id 0) (= use_built_in_enemy_spawns 0))
                    (set game_menu_option_id (- game_menu_option_id 1))
                )
            )
        )
        (if (= game_menu_id 523)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 4)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 524)
            (if (= game_menu_option_id 0)
                (set game_menu_option_id 2)
                (set game_menu_option_id (- game_menu_option_id 1))
            )
        )
        (if (= game_menu_id 6)
            (begin
                (player_action_test_reset)
                (if (= game_customisation_disabled 1)
                    (begin
                        (set game_menu_id 0)
                        (set game_menu_option_id 0)
                        (game_mode_defaults)
                    )
                    (set game_menu_id 1)
                )
                (sound_impulse_start "sound\sfx\ui\back" "none" 1)
            )
        )
    )
)

(script static void menu_close
    (begin
        (if (= game_menu_id 6)
            (sound_impulse_start "sound\sfx\ui\back" "none" 1)
        )
        (if (!= game_menu_id 6)
            (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
        )
        (if (and (= game_menu_id 0) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 6)
                (set game_menu_option_id 0)
            )
        )
        (if (and (= game_menu_id 1) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 6)
                (set game_menu_option_id 0)
            )
        )
        (if (and (= game_menu_id 2) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 1)
                (set game_menu_option_id 0)
            )
        )
        (if (and (= game_menu_id 3) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 1)
                (set game_menu_option_id 1)
            )
        )
        (if (and (= game_menu_id 4) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 1)
                (set game_menu_option_id 2)
            )
        )
        (if (and (= game_menu_id 5) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 1)
                (set game_menu_option_id 3)
            )
        )
        (if (and (= game_menu_id 52) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 5)
                (set game_menu_option_id 4)
            )
        )
        (if (and (= game_menu_id 521) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 52)
                (set game_menu_option_id 0)
            )
        )
        (if (and (= game_menu_id 522) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 52)
                (set game_menu_option_id 1)
            )
        )
        (if (and (= game_menu_id 523) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 52)
                (set game_menu_option_id 2)
            )
        )
        (if (and (= game_menu_id 524) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 52)
                (set game_menu_option_id 3)
            )
        )
        (if (and (= game_menu_id 6) (or (player_action_test_action) (player_action_test_zoom)))
            (begin
                (player_action_test_reset)
                (set game_menu_id 0)
                (set game_menu_option_id 0)
                (game_mode_defaults)
            )
        )
    )
)

(script static void menu_select_minus
    (begin
        (sound_impulse_start "sound\sfx\ui\cursor" "none" 1)
        (if (= game_menu_id 0)
            (if (> game_mode_id 0)
                (begin
                    (set game_mode_id (- game_mode_id 1))
                    (game_mode_defaults)
                )
                (begin
                    (set game_mode_id 11)
                    (game_mode_defaults)
                )
            )
        )
        (if (= game_menu_id 521)
            (begin
                (if (= game_menu_option_id 0)
                    (set uses_dropships_initial (not uses_dropships_initial))
                )
                (if (= game_menu_option_id 1)
                    (set increased_enemy_count_initial (not increased_enemy_count_initial))
                )
                (if (= game_menu_option_id 2)
                    (if (= initial_squad1_mode_id 0)
                        (set initial_squad1_mode_id 30)
                        (set initial_squad1_mode_id (- initial_squad1_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= initial_squad2_mode_id 0)
                        (set initial_squad2_mode_id 30)
                        (set initial_squad2_mode_id (- initial_squad2_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (if (= initial_squad3_mode_id 0)
                        (set initial_squad3_mode_id 30)
                        (set initial_squad3_mode_id (- initial_squad3_mode_id 1))
                    )
                )
            )
        )
        (if (= game_menu_id 522)
            (begin
                (if (= game_menu_option_id 0)
                    (set use_built_in_enemy_spawns (not use_built_in_enemy_spawns))
                )
                (if (= game_menu_option_id 1)
                    (if (= mid_squad1_mode_id 0)
                        (set mid_squad1_mode_id 30)
                        (set mid_squad1_mode_id (- mid_squad1_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 2)
                    (if (= mid_squad2_mode_id 0)
                        (set mid_squad2_mode_id 30)
                        (set mid_squad2_mode_id (- mid_squad2_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= mid_squad3_mode_id 0)
                        (set mid_squad3_mode_id 30)
                        (set mid_squad3_mode_id (- mid_squad3_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (if (= mid_squad4_mode_id 0)
                        (set mid_squad4_mode_id 30)
                        (set mid_squad4_mode_id (- mid_squad4_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 5)
                    (if (= mid_squad5_mode_id 0)
                        (set mid_squad5_mode_id 30)
                        (set mid_squad5_mode_id (- mid_squad5_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 6)
                    (if (= mid_squad6_mode_id 0)
                        (set mid_squad6_mode_id 30)
                        (set mid_squad6_mode_id (- mid_squad6_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 7)
                    (if (= mid_squad7_mode_id 0)
                        (set mid_squad7_mode_id 30)
                        (set mid_squad7_mode_id (- mid_squad7_mode_id 1))
                    )
                )
            )
        )
        (if (= game_menu_id 523)
            (begin
                (if (= game_menu_option_id 0)
                    (set uses_dropships_final (not uses_dropships_final))
                )
                (if (= game_menu_option_id 1)
                    (set increased_enemy_count_final (not increased_enemy_count_final))
                )
                (if (= game_menu_option_id 2)
                    (if (= final_squad1_mode_id 0)
                        (set final_squad1_mode_id 30)
                        (set final_squad1_mode_id (- final_squad1_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= final_squad2_mode_id 0)
                        (set final_squad2_mode_id 30)
                        (set final_squad2_mode_id (- final_squad2_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (if (= final_squad3_mode_id 0)
                        (set final_squad3_mode_id 30)
                        (set final_squad3_mode_id (- final_squad3_mode_id 1))
                    )
                )
            )
        )
        (if (= game_menu_id 524)
            (begin
                (if (= game_menu_option_id 0)
                    (set uses_dropships_bonus (not uses_dropships_bonus))
                )
                (if (= game_menu_option_id 1)
                    (if (= bonus_squad1_mode_id 0)
                        (set bonus_squad1_mode_id 30)
                        (set bonus_squad1_mode_id (- bonus_squad1_mode_id 1))
                    )
                )
            )
        )
        (if (= game_menu_id 52)
            (begin
                (if (= game_menu_option_id 0)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 521)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 1)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 522)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 2)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 523)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 3)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 524)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
            )
        )
        (if (= game_menu_id 2)
            (begin
                (if (= game_menu_option_id 0)
                    (if (= time_mode_id 0)
                        (set time_mode_id 7)
                        (set time_mode_id (- time_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 1)
                    (set uses_hazards (not uses_hazards))
                )
                (if (= game_menu_option_id 2)
                    (if (= allied_weapon_set 0)
                        (set allied_weapon_set 8)
                        (set allied_weapon_set (- allied_weapon_set 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (set invincible_allies (not invincible_allies))
                )
                (if (= game_menu_option_id 4)
                    (set sec_skull_assassins (not sec_skull_assassins))
                )
                (if (= game_menu_option_id 5)
                    (set ai_equipment_drops (not ai_equipment_drops))
                )
                (if (= game_menu_option_id 6)
                    (set ai_grenade_use (not ai_grenade_use))
                )
            )
        )
        (if (= game_menu_id 3)
            (begin
                (if (= game_menu_option_id 0)
                    (begin
                        (if (= player_pri_weap_id 0)
                            (set player_pri_weap_id 17)
                            (set player_pri_weap_id (- player_pri_weap_id 1))
                        )
                        (if (and (= player_pri_weap_id player_sec_weap_id) (!= player_pri_weap_id 17))
                            (begin
                                (set player_pri_weap_id (- player_pri_weap_id 1))
                                (if (= player_pri_weap_id 0)
                                    (set player_pri_weap_id 17)
                                )
                            )
                        )
                    )
                )
                (if (= game_menu_option_id 1)
                    (begin
                        (if (= player_sec_weap_id 0)
                            (set player_sec_weap_id 18)
                            (set player_sec_weap_id (- player_sec_weap_id 1))
                        )
                        (if (and (= player_pri_weap_id player_sec_weap_id) (!= player_sec_weap_id 17))
                            (begin
                                (set player_sec_weap_id (- player_sec_weap_id 1))
                                (if (= player_sec_weap_id 0)
                                    (set player_sec_weap_id 18)
                                )
                            )
                        )
                    )
                )
                (if (= game_menu_option_id 2)
                    (if (= player_start_gren_mode_id 0)
                        (set player_start_gren_mode_id 3)
                        (set player_start_gren_mode_id (- player_start_gren_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= player_inf_ammo_mode_id 0)
                        (set player_inf_ammo_mode_id 2)
                        (set player_inf_ammo_mode_id (- player_inf_ammo_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (set player_active_camo (not player_active_camo))
                )
            )
        )
        (if (= game_menu_id 4)
            (begin
                (if (= game_menu_option_id 0)
                    (if (= vehicle_mode_id 0)
                        (set vehicle_mode_id 12)
                        (set vehicle_mode_id (- vehicle_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 1)
                    (set indestructible_vehicles (not indestructible_vehicles))
                )
                (if (= game_menu_option_id 2)
                    (if (= weapon_drops 0)
                        (set weapon_drops 3)
                        (set weapon_drops (- weapon_drops 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (set digsite_content_enabled (not digsite_content_enabled))
                )
                (if (= game_menu_option_id 4)
                    (set custom_content_enabled (not custom_content_enabled))
                )
            )
        )
        (if (= game_menu_id 5)
            (begin
                (if (= game_menu_option_id 0)
                    (if (= lives_mode_id 0)
                        (set lives_mode_id 5)
                        (set lives_mode_id (- lives_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 1)
                    (if (= round_mode_id 0)
                        (set round_mode_id 5)
                        (set round_mode_id (- round_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 2)
                    (if (= skull_mode_id 0)
                        (set skull_mode_id 14)
                        (set skull_mode_id (- skull_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (set ai_unified_team (not ai_unified_team))
                )
                (if (= game_menu_option_id 4)
                    (if (= squad_customisation_disabled 0)
                        (begin
                            (player_action_test_reset)
                            (set game_menu_id 52)
                            (set game_menu_option_id 0)
                            (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                        )
                        (sound_impulse_start "sound\sfx\ui\flag_failure" "none" 1)
                    )
                )
            )
        )
        (if (= game_menu_id 1)
            (begin
                (if (= game_menu_option_id 0)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 2)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 1)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 3)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 2)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 4)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 3)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 5)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
            )
        )
    )
)

(script static void menu_select_plus
    (begin
        (sound_impulse_start "sound\sfx\ui\cursor" "none" 1)
        (if (= game_menu_id 0)
            (if (< game_mode_id 11)
                (begin
                    (set game_mode_id (+ game_mode_id 1))
                    (game_mode_defaults)
                )
                (begin
                    (set game_mode_id 0)
                    (game_mode_defaults)
                )
            )
        )
        (if (= game_menu_id 521)
            (begin
                (if (= game_menu_option_id 0)
                    (set uses_dropships_initial (not uses_dropships_initial))
                )
                (if (= game_menu_option_id 1)
                    (set increased_enemy_count_initial (not increased_enemy_count_initial))
                )
                (if (= game_menu_option_id 2)
                    (if (= initial_squad1_mode_id 30)
                        (set initial_squad1_mode_id 0)
                        (set initial_squad1_mode_id (+ initial_squad1_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= initial_squad2_mode_id 30)
                        (set initial_squad2_mode_id 0)
                        (set initial_squad2_mode_id (+ initial_squad2_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (if (= initial_squad3_mode_id 30)
                        (set initial_squad3_mode_id 0)
                        (set initial_squad3_mode_id (+ initial_squad3_mode_id 1))
                    )
                )
            )
        )
        (if (= game_menu_id 522)
            (begin
                (if (= game_menu_option_id 0)
                    (set use_built_in_enemy_spawns (not use_built_in_enemy_spawns))
                )
                (if (= game_menu_option_id 1)
                    (if (= mid_squad1_mode_id 30)
                        (set mid_squad1_mode_id 0)
                        (set mid_squad1_mode_id (+ mid_squad1_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 2)
                    (if (= mid_squad2_mode_id 30)
                        (set mid_squad2_mode_id 0)
                        (set mid_squad2_mode_id (+ mid_squad2_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= mid_squad3_mode_id 30)
                        (set mid_squad3_mode_id 0)
                        (set mid_squad3_mode_id (+ mid_squad3_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (if (= mid_squad4_mode_id 30)
                        (set mid_squad4_mode_id 0)
                        (set mid_squad4_mode_id (+ mid_squad4_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 5)
                    (if (= mid_squad5_mode_id 30)
                        (set mid_squad5_mode_id 0)
                        (set mid_squad5_mode_id (+ mid_squad5_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 6)
                    (if (= mid_squad6_mode_id 30)
                        (set mid_squad6_mode_id 0)
                        (set mid_squad6_mode_id (+ mid_squad6_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 7)
                    (if (= mid_squad7_mode_id 30)
                        (set mid_squad7_mode_id 0)
                        (set mid_squad7_mode_id (+ mid_squad7_mode_id 1))
                    )
                )
            )
        )
        (if (= game_menu_id 523)
            (begin
                (if (= game_menu_option_id 0)
                    (set uses_dropships_final (not uses_dropships_final))
                )
                (if (= game_menu_option_id 1)
                    (set increased_enemy_count_final (not increased_enemy_count_final))
                )
                (if (= game_menu_option_id 2)
                    (if (= final_squad1_mode_id 30)
                        (set final_squad1_mode_id 0)
                        (set final_squad1_mode_id (+ final_squad1_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= final_squad2_mode_id 30)
                        (set final_squad2_mode_id 0)
                        (set final_squad2_mode_id (+ final_squad2_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (if (= final_squad3_mode_id 30)
                        (set final_squad3_mode_id 0)
                        (set final_squad3_mode_id (+ final_squad3_mode_id 1))
                    )
                )
            )
        )
        (if (= game_menu_id 524)
            (begin
                (if (= game_menu_option_id 0)
                    (set uses_dropships_bonus (not uses_dropships_bonus))
                )
                (if (= game_menu_option_id 1)
                    (if (= bonus_squad1_mode_id 30)
                        (set bonus_squad1_mode_id 0)
                        (set bonus_squad1_mode_id (+ bonus_squad1_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 2)
                    (set bonus_random_each_spawn (not bonus_random_each_spawn))
                )
            )
        )
        (if (= game_menu_id 52)
            (begin
                (if (= game_menu_option_id 0)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 521)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 1)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 522)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 2)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 523)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 3)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 524)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
            )
        )
        (if (= game_menu_id 2)
            (begin
                (if (= game_menu_option_id 0)
                    (if (= time_mode_id 7)
                        (set time_mode_id 0)
                        (set time_mode_id (+ time_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 1)
                    (set uses_hazards (not uses_hazards))
                )
                (if (= game_menu_option_id 2)
                    (if (= allied_weapon_set 8)
                        (set allied_weapon_set 0)
                        (set allied_weapon_set (+ allied_weapon_set 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (set invincible_allies (not invincible_allies))
                )
                (if (= game_menu_option_id 4)
                    (set sec_skull_assassins (not sec_skull_assassins))
                )
                (if (= game_menu_option_id 5)
                    (set ai_equipment_drops (not ai_equipment_drops))
                )
                (if (= game_menu_option_id 6)
                    (set ai_grenade_use (not ai_grenade_use))
                )
            )
        )
        (if (= game_menu_id 3)
            (begin
                (if (= game_menu_option_id 0)
                    (begin
                        (if (= player_pri_weap_id 17)
                            (set player_pri_weap_id 0)
                            (set player_pri_weap_id (+ player_pri_weap_id 1))
                        )
                        (if (and (= player_pri_weap_id player_sec_weap_id) (!= player_pri_weap_id 17))
                            (set player_pri_weap_id (+ player_pri_weap_id 1))
                        )
                    )
                )
                (if (= game_menu_option_id 1)
                    (begin
                        (if (= player_sec_weap_id 18)
                            (set player_sec_weap_id 0)
                            (set player_sec_weap_id (+ player_sec_weap_id 1))
                        )
                        (if (and (= player_pri_weap_id player_sec_weap_id) (!= player_sec_weap_id 17))
                            (set player_sec_weap_id (+ player_sec_weap_id 1))
                        )
                    )
                )
                (if (= game_menu_option_id 2)
                    (if (= player_start_gren_mode_id 3)
                        (set player_start_gren_mode_id 0)
                        (set player_start_gren_mode_id (+ player_start_gren_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (if (= player_inf_ammo_mode_id 2)
                        (set player_inf_ammo_mode_id 0)
                        (set player_inf_ammo_mode_id (+ player_inf_ammo_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 4)
                    (set player_active_camo (not player_active_camo))
                )
            )
        )
        (if (= game_menu_id 4)
            (begin
                (if (= game_menu_option_id 0)
                    (if (= vehicle_mode_id 12)
                        (set vehicle_mode_id 0)
                        (set vehicle_mode_id (+ vehicle_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 1)
                    (set indestructible_vehicles (not indestructible_vehicles))
                )
                (if (= game_menu_option_id 2)
                    (if (= weapon_drops 3)
                        (set weapon_drops 0)
                        (set weapon_drops (+ weapon_drops 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (set digsite_content_enabled (not digsite_content_enabled))
                )
                (if (= game_menu_option_id 4)
                    (set custom_content_enabled (not custom_content_enabled))
                )
            )
        )
        (if (= game_menu_id 5)
            (begin
                (if (= game_menu_option_id 0)
                    (if (= lives_mode_id 5)
                        (set lives_mode_id 0)
                        (set lives_mode_id (+ lives_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 1)
                    (if (= round_mode_id 5)
                        (set round_mode_id 0)
                        (set round_mode_id (+ round_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 2)
                    (if (= skull_mode_id 14)
                        (set skull_mode_id 0)
                        (set skull_mode_id (+ skull_mode_id 1))
                    )
                )
                (if (= game_menu_option_id 3)
                    (set ai_unified_team (not ai_unified_team))
                )
                (if (= game_menu_option_id 4)
                    (if (= squad_customisation_disabled 0)
                        (begin
                            (player_action_test_reset)
                            (set game_menu_id 52)
                            (set game_menu_option_id 0)
                            (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                        )
                        (sound_impulse_start "sound\sfx\ui\flag_failure" "none" 1)
                    )
                )
            )
        )
        (if (= game_menu_id 1)
            (begin
                (if (= game_menu_option_id 0)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 2)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 1)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 3)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 2)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 4)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
                (if (= game_menu_option_id 3)
                    (begin
                        (player_action_test_reset)
                        (set game_menu_id 5)
                        (set game_menu_option_id 0)
                        (sound_impulse_start "sound\sfx\ui\forward" "none" 1)
                    )
                )
            )
        )
    )
)

(script static void middle_wave
    (begin
        (set enable_wave_manager 0)
        (build_mid_squads)
        (stop_all_music)
        (if uses_hazards
            (hazard_spawn)
        )
        (teleport_ai)
        (sleep_until (> 10 (+
                    (ai_nonswarm_count "ff_enemies_cov")
                    (ai_nonswarm_count "ff_enemies_flood")
                    (ai_nonswarm_count "ff_enemies_sentinels")
                )
            )
        )
        (sleep_until (> 3 (+
                    (ai_nonswarm_count "ff_enemies_cov")
                    (ai_nonswarm_count "ff_enemies_flood")
                    (ai_nonswarm_count "ff_enemies_sentinels")
                )
            ) 15 600
        )
        (reinforcements)
    )
)

(script static void migrate_and_teleport_boss
    (begin
        (check_spawn_blockers)
        (begin_random
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_a_spawn)
                    (not spawn_a_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_a")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_a")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_a")
                    (set squad_a_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_b_spawn)
                    (not spawn_b_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_b")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_b")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_b")
                    (set squad_b_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_c_spawn)
                    (not spawn_c_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_c")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_c")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_c")
                    (set squad_c_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_d_spawn)
                    (not spawn_d_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_d")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_d")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_d")
                    (set squad_d_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_e_spawn)
                    (not spawn_e_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_e")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_e")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_e")
                    (set squad_e_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_f_spawn)
                    (not spawn_f_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_f")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_f")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_f")
                    (set squad_f_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_g_spawn)
                    (not spawn_g_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_g")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_g")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_g")
                    (set squad_g_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_h_spawn)
                    (not spawn_h_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_h")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_h")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_h")
                    (set squad_h_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_i_spawn)
                    (not spawn_i_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_i")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_i")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_i")
                    (set squad_i_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
            (if (and
                    (not boss_squad_1_mig)
                    (not squad_j_spawn)
                    (not spawn_j_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_1" "ff_enemies_cov/squad_j")
                    (ai_migrate "ff_enemies_flood/boss_squad_1" "ff_enemies_flood/squad_j")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_1" "ff_enemies_sentinels/squad_j")
                    (set squad_j_spawn 1)
                    (set boss_squad_1_mig 1)
                )
            )
        )
        (begin_random
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_a_spawn)
                    (not spawn_a_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_a")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_a")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_a")
                    (set squad_a_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_b_spawn)
                    (not spawn_b_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_b")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_b")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_b")
                    (set squad_b_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_c_spawn)
                    (not spawn_c_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_c")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_c")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_c")
                    (set squad_c_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_d_spawn)
                    (not spawn_d_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_d")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_d")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_d")
                    (set squad_d_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_e_spawn)
                    (not spawn_e_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_e")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_e")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_e")
                    (set squad_e_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_f_spawn)
                    (not spawn_f_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_f")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_f")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_f")
                    (set squad_f_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_g_spawn)
                    (not spawn_g_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_g")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_g")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_g")
                    (set squad_g_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_h_spawn)
                    (not spawn_h_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_h")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_h")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_h")
                    (set squad_h_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_i_spawn)
                    (not spawn_i_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_i")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_i")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_i")
                    (set squad_i_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
            (if (and
                    (not boss_squad_2_mig)
                    (not squad_j_spawn)
                    (not spawn_j_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/boss_squad_2" "ff_enemies_cov/squad_j")
                    (ai_migrate "ff_enemies_flood/boss_squad_2" "ff_enemies_flood/squad_j")
                    (ai_migrate "ff_enemies_sentinels/boss_squad_2" "ff_enemies_sentinels/squad_j")
                    (set squad_j_spawn 1)
                    (set boss_squad_2_mig 1)
                )
            )
        )
        (ai_teleport_to_starting_location "ff_enemies_cov")
        (ai_teleport_to_starting_location "ff_enemies_flood")
        (ai_teleport_to_starting_location "ff_enemies_sentinels")
        (ai_braindead "ff_enemies_cov" 0)
        (ai_braindead "ff_enemies_flood" 0)
        (ai_braindead "ff_enemies_sentinels" 0)
        (ai_force_active "ff_enemies_cov" 1)
        (ai_force_active "ff_enemies_flood" 1)
        (ai_force_active "ff_enemies_sentinels" 1)
        (reset_squad_spawns)
        (set boss_squad_1_mig 0)
        (set boss_squad_2_mig 0)
        (ai_set_current_state "ff_enemies_cov" "search")
        (ai_set_current_state "ff_enemies_flood" "search")
        (ai_set_current_state "ff_enemies_sentinels" "search")
        (reset_spawn_blockers)
        (sleep 30)
    )
)

(script static void migrate_and_teleport_initial
    (begin
        (check_spawn_blockers)
        (begin_random
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_a_spawn)
                    (not spawn_a_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_a")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_a")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_a")
                    (set squad_a_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_b_spawn)
                    (not spawn_b_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_b")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_b")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_b")
                    (set squad_b_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_c_spawn)
                    (not spawn_c_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_c")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_c")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_c")
                    (set squad_c_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_d_spawn)
                    (not spawn_d_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_d")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_d")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_d")
                    (set squad_d_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_e_spawn)
                    (not spawn_e_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_e")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_e")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_e")
                    (set squad_e_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_f_spawn)
                    (not spawn_f_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_f")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_f")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_f")
                    (set squad_f_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_g_spawn)
                    (not spawn_g_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_g")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_g")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_g")
                    (set squad_g_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_h_spawn)
                    (not spawn_h_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_h")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_h")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_h")
                    (set squad_h_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_i_spawn)
                    (not spawn_i_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_i")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_i")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_i")
                    (set squad_i_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
            (if (and
                    (not initial_squad_1_mig)
                    (not squad_j_spawn)
                    (not spawn_j_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_1" "ff_enemies_cov/squad_j")
                    (ai_migrate "ff_enemies_flood/initial_squad_1" "ff_enemies_flood/squad_j")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_1" "ff_enemies_sentinels/squad_j")
                    (set squad_j_spawn 1)
                    (set initial_squad_1_mig 1)
                )
            )
        )
        (begin_random
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_a_spawn)
                    (not spawn_a_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_a")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_a")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_a")
                    (set squad_a_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_b_spawn)
                    (not spawn_b_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_b")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_b")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_b")
                    (set squad_b_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_c_spawn)
                    (not spawn_c_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_c")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_c")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_c")
                    (set squad_c_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_d_spawn)
                    (not spawn_d_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_d")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_d")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_d")
                    (set squad_d_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_e_spawn)
                    (not spawn_e_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_e")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_e")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_e")
                    (set squad_e_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_f_spawn)
                    (not spawn_f_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_f")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_f")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_f")
                    (set squad_f_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_g_spawn)
                    (not spawn_g_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_g")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_g")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_g")
                    (set squad_g_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_h_spawn)
                    (not spawn_h_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_h")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_h")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_h")
                    (set squad_h_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_i_spawn)
                    (not spawn_i_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_i")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_i")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_i")
                    (set squad_i_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
            (if (and
                    (not initial_squad_2_mig)
                    (not squad_j_spawn)
                    (not spawn_j_block)
                )
                (begin
                    (ai_migrate "ff_enemies_cov/initial_squad_2" "ff_enemies_cov/squad_j")
                    (ai_migrate "ff_enemies_flood/initial_squad_2" "ff_enemies_flood/squad_j")
                    (ai_migrate "ff_enemies_sentinels/initial_squad_2" "ff_enemies_sentinels/squad_j")
                    (set squad_j_spawn 1)
                    (set initial_squad_2_mig 1)
                )
            )
        )
        (ai_teleport_to_starting_location "ff_enemies_cov")
        (ai_teleport_to_starting_location "ff_enemies_flood")
        (ai_teleport_to_starting_location "ff_enemies_sentinels")
        (ai_braindead "ff_enemies_cov" 0)
        (ai_braindead "ff_enemies_flood" 0)
        (ai_braindead "ff_enemies_sentinels" 0)
        (ai_force_active "ff_enemies_cov" 1)
        (ai_force_active "ff_enemies_flood" 1)
        (ai_force_active "ff_enemies_sentinels" 1)
        (reset_squad_spawns)
        (set initial_squad_1_mig 0)
        (set initial_squad_2_mig 0)
        (ai_set_current_state "ff_enemies_cov" "search")
        (ai_set_current_state "ff_enemies_flood" "search")
        (ai_set_current_state "ff_enemies_sentinels" "search")
        (reset_spawn_blockers)
        (sleep 30)
    )
)

(script static void mythic_skull_quiet
    (set debug_ice_cream_flavor_status_mythic 1)
)

(script static void new_round
    (begin
        (set wave_number (+ 1 wave_number))
        (if (= game_over_flag 0)
            (countdown_beeps)
        )
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_new_round" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_new_round")
        (sleep 45)
        (show_hud_help_text 0)
    )
)

(script static void new_set
    (begin
        (if (= game_over_flag 0)
            (countdown_beeps)
        )
        (set set_number (+ 1 set_number))
        (set wave_number (+ 1 wave_number))
        (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_new_set" "none" 1)
        (show_hud_help_text 1)
        (hud_set_help_text "ff_new_set")
        (sleep 45)
        (show_hud_help_text 0)
    )
)

(script continuous no_enemy_equip_extraction
    (begin
        (sleep_until (= ai_equipment_drops 0))
        (unit_doesnt_drop_items (ai_actors "hazard_ground"))
        (unit_doesnt_drop_items (ai_actors "hazard_banshee"))
        (sleep 150)
    )
)

(script continuous no_enemy_equipment_bug_catch
    (begin
        (sleep_until (= ai_equipment_drops 0))
        (unit_doesnt_drop_items (ai_actors "hazard"))
        (unit_doesnt_drop_items (ai_actors "ff_enemies_cov"))
        (unit_doesnt_drop_items (ai_actors "ff_enemies_flood"))
        (unit_doesnt_drop_items (ai_actors "ff_marines"))
        (sleep 150)
    )
)

(script static void override_menu_skulls
    (begin
        (set debug_ice_cream_flavor_status_thunderstorm 0)
        (set debug_ice_cream_flavor_status_famine 0)
        (set debug_ice_cream_flavor_status_black_eye 0)
        (set debug_ice_cream_flavor_status_catch 0)
        (set debug_ice_cream_flavor_status_iron 0)
        (set debug_ice_cream_flavor_status_mythic 0)
        (set debug_ice_cream_flavor_status_anger 0)
        (set debug_ice_cream_flavor_status_thats_just_wrong 0)
        (set debug_ice_cream_flavor_status_bandanna 0)
        (set debug_ice_cream_flavor_status_fog 0)
        (set debug_ice_cream_flavor_status_assassins 0)
    )
)

(script static void p0_respawn_hack
    (begin
        (ai_disregard (player0) 1)
        (level_specific_vehicle_destroy)
        (object_cannot_take_damage (player0))
        (unit_set_current_vitality (player0) 80 80)
        (unit_suspended (player0) 1)
        (object_teleport (player0) "p0_respawn_point_fake")
        (lives_check)
        (if enable_bonus_round
            (set enable_bonus_round 0)
        )
        (player_enable_input 0)
        (camera_control 1)
        (camera_set "solo_respawn_camera" 0)
        (if (= enable_bonus_round 1)
            (sleep_until (= enable_bonus_round 0))
        )
        (sleep 210)
        (countdown_beeps)
        (object_teleport (player0) "p0_respawn_point_real")
        (object_can_take_damage (player0))
        (camera_control 0)
        (player_enable_input 1)
        (unit_suspended (player0) 0)
        (ai_disregard (player0) 0)
    )
)

(script static void play_music
    (begin
        (if (= wave_number 1)
            (set music_track (random_range 1 4))
        )
        (if (= wave_number 5)
            (set music_track (random_range 4 7))
        )
        (if (= music_track 1)
            (sound_looping_start "sound\music\firefight1\firefight1" "none" 1)
        )
        (if (= music_track 2)
            (sound_looping_start "levels\ff_extraction\music\ff_initial_music_2" "none" 1)
        )
        (if (= music_track 3)
            (sound_looping_start "sound\music\firefight2\firefight2" "none" 1)
        )
        (if (= music_track 4)
            (sound_looping_start "levels\ff_extraction\music\ff_final_music_1" "none" 1)
        )
        (if (= music_track 5)
            (sound_looping_start "levels\ff_extraction\music\ff_final_music_2" "none" 1)
        )
        (if (= music_track 6)
            (sound_looping_start "sound\music\firefight7\firefight7" "none" 1)
        )
    )
)

(script static unit player0
    (unit (list_get (players) 0))
)

(script static unit player1
    (unit (list_get (players) 1))
)

(script static unit player2
    (unit (list_get (players) 2))
)

(script static unit player3
    (unit (list_get (players) 3))
)

(script static short player_count
    (list_count (players))
)

(script static void player_effect_explosion
    (begin
        (player_effect_set_max_translation 0.01 0.01 0.025)
        (player_effect_set_max_rotation 0.5 0.5 1)
        (player_effect_set_max_vibrate 0.5 0.4)
        (player_effect_start (real_random_range 0.7 0.9) 0.1)
    )
)

(script static void player_effect_impact
    (begin
        (player_effect_set_max_translation 0.05 0.05 0.075)
        (player_effect_set_max_rotation 0 0 0)
        (player_effect_set_max_vibrate 0.4 1)
        (player_effect_start (real_random_range 0.7 0.9) 0.1)
    )
)

(script static void player_effect_rumble
    (begin
        (player_effect_set_max_translation 0.01 0 0.02)
        (player_effect_set_max_rotation 0.1 0.1 0.2)
        (player_effect_set_max_vibrate 0.5 0.3)
        (player_effect_start (real_random_range 0.7 0.9) 0.5)
    )
)

(script static void player_effect_vibration
    (begin
        (player_effect_set_max_translation 0.0075 0.0075 0.0125)
        (player_effect_set_max_rotation 0.01 0.01 0.05)
        (player_effect_set_max_vibrate 0.2 0.5)
        (player_effect_start (real_random_range 0.7 0.9) 1)
    )
)

(script static void quick_dropship_dest
    (begin
        (set dropship1_dest (random_range 1 4))
        (if (= dropship1_dest 1)
            (begin_random
                (set dropship2_dest 2)
                (set dropship2_dest 3)
            )
        )
        (if (= dropship1_dest 2)
            (begin_random
                (set dropship2_dest 1)
                (set dropship2_dest 3)
            )
        )
        (if (= dropship1_dest 3)
            (begin_random
                (set dropship2_dest 1)
                (set dropship2_dest 2)
            )
        )
    )
)

(script static void random_pri_weapon
    (begin
        (if (and (= digsite_content_enabled 0) (= custom_content_enabled 0))
            (if (>= player_sec_weap_id 17)
                (set player_pri_weap_id (random_range 0 10))
                (begin
                    (set player_pri_weap_id (random_range 0 9))
                    (if (>= player_pri_weap_id player_sec_weap_id)
                        (set player_pri_weap_id (+ player_pri_weap_id 1))
                    )
                )
            )
        )
        (if (and (= digsite_content_enabled 1) (= custom_content_enabled 0))
            (if (>= player_sec_weap_id 17)
                (set player_pri_weap_id (random_range 0 13))
                (begin
                    (set player_pri_weap_id (random_range 0 12))
                    (if (>= player_pri_weap_id player_sec_weap_id)
                        (set player_pri_weap_id (+ player_pri_weap_id 1))
                    )
                )
            )
        )
        (if (and (= digsite_content_enabled 0) (= custom_content_enabled 1))
            (if (>= player_sec_weap_id 17)
                (set player_pri_weap_id (random_range 0 12))
                (begin
                    (set player_pri_weap_id (random_range 0 11))
                    (if (>= player_pri_weap_id 10)
                        (set player_pri_weap_id (+ player_pri_weap_id 3))
                    )
                    (if (>= player_pri_weap_id player_sec_weap_id)
                        (set player_pri_weap_id (+ player_pri_weap_id 1))
                    )
                )
            )
        )
        (if (and (= digsite_content_enabled 1) (= custom_content_enabled 1))
            (if (>= player_sec_weap_id 17)
                (set player_pri_weap_id (random_range 0 15))
                (begin
                    (set player_pri_weap_id (random_range 0 14))
                    (if (>= player_pri_weap_id player_sec_weap_id)
                        (set player_pri_weap_id (+ player_pri_weap_id 1))
                    )
                )
            )
        )
    )
)

(script static void random_sec_weapon
    (begin
        (if (and (= digsite_content_enabled 0) (= custom_content_enabled 0))
            (if (>= player_pri_weap_id 17)
                (set player_sec_weap_id (random_range 0 10))
                (begin
                    (set player_sec_weap_id (random_range 0 9))
                    (if (>= player_sec_weap_id player_pri_weap_id)
                        (set player_sec_weap_id (+ player_sec_weap_id 1))
                    )
                )
            )
        )
        (if (and (= digsite_content_enabled 1) (= custom_content_enabled 0))
            (if (>= player_pri_weap_id 17)
                (set player_sec_weap_id (random_range 0 13))
                (begin
                    (set player_sec_weap_id (random_range 0 12))
                    (if (>= player_sec_weap_id player_pri_weap_id)
                        (set player_sec_weap_id (+ player_sec_weap_id 1))
                    )
                )
            )
        )
        (if (and (= digsite_content_enabled 0) (= custom_content_enabled 1))
            (if (>= player_pri_weap_id 17)
                (set player_sec_weap_id (random_range 0 12))
                (begin
                    (set player_sec_weap_id (random_range 0 11))
                    (if (>= player_sec_weap_id 10)
                        (set player_sec_weap_id (+ player_sec_weap_id 3))
                    )
                    (if (>= player_sec_weap_id player_pri_weap_id)
                        (set player_sec_weap_id (+ player_sec_weap_id 1))
                    )
                )
            )
        )
        (if (and (= digsite_content_enabled 1) (= custom_content_enabled 1))
            (if (>= player_pri_weap_id 17)
                (set player_sec_weap_id (random_range 0 15))
                (begin
                    (set player_sec_weap_id (random_range 0 14))
                    (if (>= player_sec_weap_id player_pri_weap_id)
                        (set player_sec_weap_id (+ player_sec_weap_id 1))
                    )
                )
            )
        )
    )
)

(script static void random_skulls
    (begin
        (set new_skulls_activated 0)
        (begin_random
            (if (< new_skulls_activated skulls_to_activate)
                (begin
                    (announce_anger_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
            (if (< new_skulls_activated skulls_to_activate)
                (begin
                    (announce_black_eye_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
            (if (and (< new_skulls_activated skulls_to_activate) (= ai_grenade_use 0))
                (begin
                    (announce_catch_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
            (if (< new_skulls_activated skulls_to_activate)
                (begin
                    (announce_cloud_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
            (if (and (< new_skulls_activated skulls_to_activate) (= player_inf_ammo_mode_id 0))
                (begin
                    (announce_famine_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
            (if (< new_skulls_activated skulls_to_activate)
                (begin
                    (announce_mythic_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
            (if (< new_skulls_activated skulls_to_activate)
                (begin
                    (announce_thunderstorm_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
            (if (< new_skulls_activated skulls_to_activate)
                (begin
                    (announce_tjw_skull)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                )
            )
        )
    )
)

(script static void regen_player_health
    (units_set_current_vitality (players) 80 80)
)

(script static void reinforcements
    (begin
        (reset_spawn_blockers)
        (set spawn_blocks_checked 0)
        (sleep 90)
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_awarded_lives" "none" 1)
        )
        (show_hud_help_text 1)
        (hud_set_help_text "ff_reinforcements")
        (sleep 120)
        (show_hud_help_text 0)
        (set squad_selector 1)
        (set squad_assigner 0)
        (set squad_placed 0)
        (set hazard_chance (+ hazard_chance hazard_chance_increment))
        (ai_migrate "ff_enemies_cov" "ff_enemies_cov/free_ai")
        (ai_migrate "ff_enemies_flood" "ff_enemies_flood/free_ai")
        (ai_migrate "ff_enemies_sentinels" "ff_enemies_sentinels/free_ai")
        (set wave_number (+ 1 wave_number))
        (set squads_built_and_assigned 0)
        (set building_squad_number 0)
        (set enable_wave_manager 1)
    )
)

(script static void reset_skulls
    (begin
        (set debug_ice_cream_flavor_status_anger 0)
        (set debug_ice_cream_flavor_status_black_eye 0)
        (set debug_ice_cream_flavor_status_catch 0)
        (set debug_ice_cream_flavor_status_fog 0)
        (set debug_ice_cream_flavor_status_famine 0)
        (set debug_ice_cream_flavor_status_mythic 0)
        (set debug_ice_cream_flavor_status_thunderstorm 0)
        (set debug_ice_cream_flavor_status_thats_just_wrong 0)
    )
)

(script static void reset_spawn_blockers
    (begin
        (set spawn_a_block 0)
        (set spawn_b_block 0)
        (set spawn_c_block 0)
        (set spawn_d_block 0)
        (set spawn_e_block 0)
        (set spawn_f_block 0)
        (set spawn_g_block 0)
        (set spawn_h_block 0)
        (set spawn_i_block 0)
        (set spawn_j_block 0)
    )
)

(script static void reset_squad_spawns
    (begin
        (set squad_a_spawn 0)
        (set squad_b_spawn 0)
        (set squad_c_spawn 0)
        (set squad_d_spawn 0)
        (set squad_e_spawn 0)
        (set squad_f_spawn 0)
        (set squad_g_spawn 0)
        (set squad_h_spawn 0)
        (set squad_i_spawn 0)
        (set squad_j_spawn 0)
    )
)

(script static void respawn_vehicles
    (begin
        (ai_exit_vehicle "ff_marines")
        (sleep 60)
        (if (or (= vehicle_mode_id 0) (= vehicles_supported 0))
            (object_destroy_containing "starting_vehicle")
        )
        (if (and (= vehicles_supported 1) (> vehicle_mode_id 0))
            (begin
                (object_destroy_containing "starting_vehicle")
                (object_create_anew_containing "starting_vehicle_shade")
            )
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 1))
            (object_create_anew_containing "starting_vehicle")
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 2))
            (begin
                (object_create_anew_containing "starting_vehicle_warthog")
                (object_create_anew_containing "starting_vehicle_rhog")
                (object_create_anew_containing "special_vehicle_warthog")
            )
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 3))
            (begin
                (object_create_anew_containing "starting_vehicle_ghost")
                (object_create_anew_containing "special_vehicle_ghost")
            )
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 4))
            (object_create_anew_containing "special_vehicle_scorpion")
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 5))
            (object_create_anew_containing "special_vehicle_wraith")
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 6))
            (object_create_anew_containing "special_vehicle_banshee")
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 7))
            (object_create_anew_containing "special_vehicle_kestrel")
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 8))
            (object_create_anew_containing "special_vehicle_spectre")
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 9))
            (level_specific_all_vehicles)
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 10))
            (begin
                (object_create_anew_containing "starting_vehicle_warthog")
                (object_create_anew_containing "starting_vehicle_rhog")
                (object_create_anew_containing "special_vehicle_warthog")
                (object_create_anew_containing "special_vehicle_scorpion")
                (if (= digsite_content_enabled 1)
                    (object_create_anew_containing "special_vehicle_kestrel")
                )
            )
        )
        (if (and (= vehicles_supported 1) (= vehicle_mode_id 11))
            (begin
                (object_create_anew_containing "starting_vehicle_ghost")
                (object_create_anew_containing "special_vehicle_ghost")
                (object_create_anew_containing "special_vehicle_wraith")
                (object_create_anew_containing "special_vehicle_banshee")
                (if (= digsite_content_enabled 1)
                    (object_create_anew_containing "special_vehicle_spectre")
                )
            )
        )
        (level_specific_vitality)
    )
)

(script static void round_cleanup
    (begin
        (reset_spawn_blockers)
        (set spawn_blocks_checked 0)
        (sleep 120)
        (stop_all_music)
        (garbage_collect_now)
        (end_round_announcement)
        (if (= 3 round_number)
            (bonus_round)
        )
        (if round_limit_enabled
            (begin
                (set rounds_limit (- rounds_limit 1))
                (rounds_limit_reached_check)
            )
        )
        (reset_skulls)
        (if (or
                (= skull_mode_id 11)
                (= skull_mode_id 12)
                (= skull_mode_id 13)
            )
            (skull_reset_notification)
        )
        (regen_player_health)
        (if uses_lives
            (add_lives)
        )
        (if (!= weapon_drops 0)
            (weapon_drop)
            (healthpacks)
        )
        (if (!= vehicle_mode_id 0)
            (respawn_vehicles)
        )
        (if (!= allied_weapon_set 0)
            (spawn_marines)
        )
        (set hazard_chance baze_hazard_chance)
        (set wave_number 0)
        (set round_number (+ 1 round_number))
        (set squad_selector 1)
        (set squad_assigner 0)
        (set squad_placed 0)
        (set squads_built_and_assigned 0)
        (set building_squad_number 0)
        (set enable_wave_manager 1)
        (set 5_ai_announced 0)
        (set 2_ai_announced 0)
        (set 1_ai_announced 0)
        (set hazard_spawned 0)
    )
)

(script static void round_start
    (begin
        (if uses_hazards
            (hazard_spawn)
        )
        (if (= round_number 1)
            (new_set)
            (new_round)
        )
        (skulls)
        (sleep 30)
        (set enable_wave_manager 1)
    )
)

(script static void rounds_limit_reached_check
    (if (and (= rounds_limit 0) (= game_over_flag 0))
        (game_over)
    )
)

(script static void sarge_1_weapon_random
    (begin
        (if (= sarge_1_weapon_id 4)
            (ai_place "ff_marines_wave/sarge_1_plasma")
        )
        (if (= sarge_1_weapon_id 5)
            (ai_place "ff_marines_wave/sarge_1_needler")
        )
        (if (= sarge_1_weapon_id 6)
            (ai_place "ff_marines_wave/sarge_1_shotgun")
        )
        (if (= sarge_1_weapon_id 7)
            (ai_place "ff_marines_wave/sarge_1_sniper")
        )
        (if (= sarge_1_weapon_id 8)
            (ai_place "ff_marines_wave/sarge_1_ar")
        )
    )
)

(script static void sarge_2_weapon_random
    (begin
        (if (= sarge_2_weapon_id 4)
            (ai_place "ff_marines_wave/sarge_2_plasma")
        )
        (if (= sarge_2_weapon_id 5)
            (ai_place "ff_marines_wave/sarge_2_needler")
        )
        (if (= sarge_2_weapon_id 6)
            (ai_place "ff_marines_wave/sarge_2_shotgun")
        )
        (if (= sarge_2_weapon_id 7)
            (ai_place "ff_marines_wave/sarge_2_sniper")
        )
        (if (= sarge_2_weapon_id 8)
            (ai_place "ff_marines_wave/sarge_2_ar")
        )
    )
)

(script static void script_dialog_start
    (begin
        (sleep_until (not global_dialog_on))
        (set global_dialog_on 1)
        (ai_dialogue_triggers 0)
    )
)

(script static void script_dialog_stop
    (begin
        (ai_dialogue_triggers 1)
        (sleep 30)
        (set global_dialog_on 0)
    )
)

(script static void secondary_skulls
    (if sec_skull_assassins
        (set debug_ice_cream_flavor_status_assassins 1)
    )
)

(script static void set_elite_commander_flag
    (if (and use_built_in_enemy_spawns (or
                (= wave_number 2)
                (= wave_number 3)
                (= wave_number 4)
            )
        )
        (set elite_commander_spawned 1)
    )
)

(script static void set_hunter_flag
    (if (and use_built_in_enemy_spawns (or
                (= wave_number 2)
                (= wave_number 3)
                (= wave_number 4)
            )
        )
        (set hunters_spawned 1)
    )
)

(script static void set_spec_elite_flag
    (if (and use_built_in_enemy_spawns (or
                (= wave_number 2)
                (= wave_number 3)
                (= wave_number 4)
            )
        )
        (set spec_elite_spawned 1)
    )
)

(script static void set_stealth_elite_flag
    (if (and use_built_in_enemy_spawns (or
                (= wave_number 2)
                (= wave_number 3)
                (= wave_number 4)
            )
        )
        (set stealth_elites_spawned 1)
    )
)

(script static void skull_reset_notification
    (begin
        (show_hud_help_text 1)
        (hud_set_help_text "ff_skulls_reset")
        (sleep 60)
        (show_hud_help_text 0)
    )
)

(script static void skulls
    (begin
        (if (= skull_mode_id 1)
            (skulls_mode_1)
        )
        (if (= skull_mode_id 2)
            (skulls_mode_2)
        )
        (if (= skull_mode_id 3)
            (skulls_mode_3)
        )
        (if (= skull_mode_id 4)
            (skulls_mode_4)
        )
        (if (= skull_mode_id 5)
            (skulls_mode_5)
        )
        (if (= skull_mode_id 6)
            (skulls_mode_6)
        )
        (if (= skull_mode_id 7)
            (skulls_mode_7)
        )
        (if (= skull_mode_id 8)
            (skulls_mode_8)
        )
        (if (= skull_mode_id 9)
            (skulls_mode_9)
        )
        (if (= skull_mode_id 10)
            (skulls_mode_10)
        )
        (if (= skull_mode_id 11)
            (random_skulls)
        )
        (if (= skull_mode_id 12)
            (random_skulls)
        )
        (if (= skull_mode_id 13)
            (random_skulls)
        )
        (if (= skull_mode_id 14)
            (skulls_mode_14)
        )
    )
)

(script static void skulls_mode_1
    (begin
        (if (and (= set_number 1) (= round_number 1))
            (announce_catch_skull)
        )
        (if (and (= set_number 1) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
            )
        )
        (if (and (= set_number 1) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (catch_skull_quiet)
                (cloud_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 1))
            (begin
                (announce_famine_skull)
                (catch_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 1))
            (begin
                (announce_mythic_skull)
                (catch_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 1))
            (begin
                (announce_anger_skull)
                (mythic_skull_quiet)
                (catch_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (>= set_number 5)
            (begin
                (anger_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (thunderstorm_skull_quiet)
                (if (and (= round_number 1) (= set_number 5))
                    (announce_all_skulls_voice)
                )
            )
        )
    )
)

(script static void skulls_mode_10
    (begin
        (begin_random
            (set debug_ice_cream_flavor_status_anger 0)
            (set debug_ice_cream_flavor_status_black_eye 0)
            (set debug_ice_cream_flavor_status_catch 0)
            (set debug_ice_cream_flavor_status_fog 0)
            (set debug_ice_cream_flavor_status_famine 0)
            (set debug_ice_cream_flavor_status_mythic 0)
            (set debug_ice_cream_flavor_status_thunderstorm 0)
            (set debug_ice_cream_flavor_status_thats_just_wrong 0)
            (set debug_ice_cream_flavor_status_anger 1)
            (set debug_ice_cream_flavor_status_black_eye 1)
            (set debug_ice_cream_flavor_status_catch 1)
            (set debug_ice_cream_flavor_status_fog 1)
            (set debug_ice_cream_flavor_status_famine 1)
            (set debug_ice_cream_flavor_status_mythic 1)
            (set debug_ice_cream_flavor_status_thunderstorm 1)
            (set debug_ice_cream_flavor_status_thats_just_wrong 1)
        )
        (announce_skulls_toggled)
    )
)

(script static void skulls_mode_14
    (begin
        (if (and (= set_number 1) (= round_number 1))
            (announce_anger_skull)
        )
        (if (and (= set_number 1) (= round_number 2))
            (begin
                (announce_catch_skull)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 1) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (catch_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 1))
            (begin
                (announce_mythic_skull)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 2))
            (begin
                (announce_catch_skull)
                (anger_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (catch_skull_quiet)
                (anger_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 1))
            (begin
                (announce_tjw_skull)
                (anger_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 2))
            (begin
                (announce_catch_skull)
                (anger_skull_quiet)
                (mythic_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (anger_skull_quiet)
                (mythic_skull_quiet)
                (tjw_skull_quiet)
                (catch_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 1))
            (begin
                (announce_cloud_skull)
                (tjw_skull_quiet)
                (anger_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 2))
            (begin
                (announce_catch_skull)
                (anger_skull_quiet)
                (mythic_skull_quiet)
                (cloud_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (anger_skull_quiet)
                (mythic_skull_quiet)
                (cloud_skull_quiet)
                (tjw_skull_quiet)
                (catch_skull_quiet)
            )
        )
        (if (>= set_number 5)
            (begin
                (thunderstorm_skull_quiet)
                (anger_skull_quiet)
                (mythic_skull_quiet)
                (cloud_skull_quiet)
                (catch_skull_quiet)
                (if (and (= round_number 1) (= set_number 5))
                    (announce_all_skulls_voice)
                )
            )
        )
    )
)

(script static void skulls_mode_2
    (begin
        (if (and (= set_number 1) (= round_number 1))
            (announce_catch_skull)
        )
        (if (and (= set_number 1) (= round_number 2))
            (begin
                (announce_mythic_skull)
                (catch_skull_quiet)
            )
        )
        (if (and (= set_number 1) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 1))
            (begin
                (announce_thunderstorm_skull)
                (catch_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 2))
            (begin
                (announce_mythic_skull)
                (catch_skull_quiet)
                (thunderstorm_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
                (mythic_skull_quiet)
                (thunderstorm_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 1))
            (begin
                (announce_anger_skull)
                (catch_skull_quiet)
                (thunderstorm_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 2))
            (begin
                (announce_mythic_skull)
                (catch_skull_quiet)
                (thunderstorm_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
                (thunderstorm_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 1))
            (begin
                (announce_black_eye_skull)
                (catch_skull_quiet)
                (thunderstorm_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 2))
            (begin
                (announce_mythic_skull)
                (catch_skull_quiet)
                (thunderstorm_skull_quiet)
                (black_eye_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (catch_skull_quiet)
                (black_eye_skull_quiet)
                (thunderstorm_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (>= set_number 5)
            (begin
                (anger_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (black_eye_skull_quiet)
                (mythic_skull_quiet)
                (thunderstorm_skull_quiet)
                (if (and (= round_number 1) (= set_number 5))
                    (announce_all_skulls_voice)
                )
            )
        )
    )
)

(script static void skulls_mode_3
    (begin
        (if (= set_number 1)
            (begin
                (if (= round_number 1)
                    (announce_generic_skulls)
                )
                (anger_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (= set_number 2)
            (begin
                (if (= round_number 1)
                    (announce_mythic_skull)
                )
                (anger_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (mythic_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (= set_number 3)
            (begin
                (if (= round_number 1)
                    (announce_thunderstorm_skull)
                )
                (anger_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (mythic_skull_quiet)
                (thunderstorm_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (= set_number 4)
            (begin
                (if (= round_number 1)
                    (announce_famine_skull)
                )
                (anger_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (mythic_skull_quiet)
                (thunderstorm_skull_quiet)
                (famine_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (>= set_number 5)
            (begin
                (anger_skull_quiet)
                (famine_skull_quiet)
                (cloud_skull_quiet)
                (catch_skull_quiet)
                (mythic_skull_quiet)
                (thunderstorm_skull_quiet)
                (tjw_skull_quiet)
                (if (and (= round_number 1) (= set_number 5))
                    (announce_all_skulls_voice)
                )
            )
        )
    )
)

(script static void skulls_mode_4
    (begin
        (if (and (= set_number 1) (= round_number 1))
            (begin
                (announce_black_eye_skull)
                (announce_catch_skull)
            )
        )
        (if (and (= set_number 1) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
            )
        )
        (if (and (= set_number 1) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 1))
            (begin
                (announce_famine_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 1))
            (begin
                (announce_mythic_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 1))
            (begin
                (announce_anger_skull)
                (mythic_skull_quiet)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (famine_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 2))
            (begin
                (announce_cloud_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 3))
            (begin
                (announce_thunderstorm_skull)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (>= set_number 5)
            (begin
                (anger_skull_quiet)
                (black_eye_skull_quiet)
                (catch_skull_quiet)
                (cloud_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (thunderstorm_skull_quiet)
                (if (and (= round_number 1) (= set_number 5))
                    (announce_all_skulls_voice)
                )
            )
        )
    )
)

(script static void skulls_mode_5
    (begin
        (if (and (= set_number 1) (= round_number 2))
            (announce_tjw_skull)
        )
        (if (and (= set_number 1) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 1))
            (announce_mythic_skull)
        )
        (if (and (= set_number 2) (= round_number 2))
            (begin
                (announce_tjw_skull)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (mythic_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 1))
            (begin
                (announce_anger_skull)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 2))
            (begin
                (announce_tjw_skull)
                (anger_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (anger_skull_quiet)
                (tjw_skull_quiet)
                (mythic_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 1))
            (begin
                (announce_famine_skull)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 2))
            (begin
                (announce_tjw_skull)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (and (= set_number 4) (= round_number 3))
            (begin
                (announce_cloud_skull)
                (tjw_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
            )
        )
        (if (>= set_number 5)
            (begin
                (cloud_skull_quiet)
                (tjw_skull_quiet)
                (famine_skull_quiet)
                (mythic_skull_quiet)
                (anger_skull_quiet)
                (if (and (= round_number 1) (= set_number 5))
                    (announce_all_skulls_voice)
                )
            )
        )
    )
)

(script static void skulls_mode_6
    (begin
        (if (and (= set_number 1) (= round_number 1))
            (announce_tjw_skull)
        )
        (if (and (= set_number 1) (= round_number 2))
            (begin
                (announce_mythic_skull)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 1) (= round_number 3))
            (begin
                (announce_anger_skull)
                (mythic_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 1))
            (begin
                (announce_thunderstorm_skull)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 2))
            (begin
                (announce_mythic_skull)
                (tjw_skull_quiet)
                (thunderstorm_skull_quiet)
            )
        )
        (if (and (= set_number 2) (= round_number 3))
            (begin
                (announce_anger_skull)
                (mythic_skull_quiet)
                (tjw_skull_quiet)
                (thunderstorm_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 1))
            (begin
                (announce_cloud_skull)
                (thunderstorm_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 2))
            (begin
                (announce_mythic_skull)
                (cloud_skull_quiet)
                (thunderstorm_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (and (= set_number 3) (= round_number 3))
            (begin
                (announce_anger_skull)
                (mythic_skull_quiet)
                (cloud_skull_quiet)
                (thunderstorm_skull_quiet)
                (tjw_skull_quiet)
            )
        )
        (if (>= set_number 4)
            (begin
                (anger_skull_quiet)
                (mythic_skull_quiet)
                (cloud_skull_quiet)
                (thunderstorm_skull_quiet)
                (tjw_skull_quiet)
                (if (and (= round_number 1) (= set_number 4))
                    (announce_all_skulls_voice)
                )
            )
        )
    )
)

(script static void skulls_mode_7
    (begin
        (anger_skull_quiet)
        (black_eye_skull_quiet)
        (catch_skull_quiet)
        (cloud_skull_quiet)
        (famine_skull_quiet)
        (mythic_skull_quiet)
        (thunderstorm_skull_quiet)
        (tjw_skull_quiet)
        (if (and (= round_number 1) (= set_number 1))
            (announce_all_skulls_voice)
        )
    )
)

(script static void skulls_mode_8
    (begin
        (anger_skull_quiet)
        (catch_skull_quiet)
        (cloud_skull_quiet)
        (famine_skull_quiet)
        (mythic_skull_quiet)
        (thunderstorm_skull_quiet)
        (tjw_skull_quiet)
        (if (and (= round_number 1) (= set_number 1))
            (announce_all_skulls_voice)
        )
    )
)

(script static void skulls_mode_9
    (begin
        (set new_skulls_activated 0)
        (begin_random
            (if (and (< new_skulls_activated 1) (not skull_anger_active))
                (begin
                    (set skull_anger_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_anger_skull)
                    )
                )
            )
            (if (and (< new_skulls_activated 1) (not skull_black_eye_active))
                (begin
                    (set skull_black_eye_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_black_eye_skull)
                    )
                )
            )
            (if (and (< new_skulls_activated 1) (not skull_catch_active))
                (begin
                    (set skull_catch_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_catch_skull)
                    )
                )
            )
            (if (and (< new_skulls_activated 1) (not skull_cloud_active))
                (begin
                    (set skull_cloud_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_cloud_skull)
                    )
                )
            )
            (if (and (< new_skulls_activated 1) (not skull_famine_active))
                (begin
                    (set skull_famine_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_famine_skull)
                    )
                )
            )
            (if (and (< new_skulls_activated 1) (not skull_mythic_active))
                (begin
                    (set skull_mythic_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_mythic_skull)
                    )
                )
            )
            (if (and (< new_skulls_activated 1) (not skull_thunderstorm_active))
                (begin
                    (set skull_thunderstorm_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_thunderstorm_skull)
                    )
                )
            )
            (if (and (< new_skulls_activated 1) (not skull_tjw_active))
                (begin
                    (set skull_tjw_active 1)
                    (set new_skulls_activated (+ new_skulls_activated 1))
                    (if (or (< set_number 3) (and (= set_number 3) (= round_number 1)))
                        (announce_tjw_skull)
                    )
                )
            )
        )
        (if (and (= round_number 2) (= set_number 3))
            (announce_all_skulls_voice)
        )
        (if skull_anger_active
            (anger_skull_quiet)
        )
        (if skull_black_eye_active
            (black_eye_skull_quiet)
        )
        (if skull_catch_active
            (catch_skull_quiet)
        )
        (if skull_cloud_active
            (cloud_skull_quiet)
        )
        (if skull_famine_active
            (famine_skull_quiet)
        )
        (if skull_mythic_active
            (mythic_skull_quiet)
        )
        (if skull_thunderstorm_active
            (thunderstorm_skull_quiet)
        )
        (if skull_tjw_active
            (tjw_skull_quiet)
        )
    )
)

(script continuous soft_kill_reset_p0
    (begin
        (sleep_until (> soft_kill_counter_p0 0))
        (sleep (* 30 15))
        (set soft_kill_counter_p0 (+ -1 soft_kill_counter_p0))
    )
)

(script continuous soft_kill_reset_p1
    (begin
        (sleep_until (> soft_kill_counter_p1 0))
        (sleep (* 30 15))
        (set soft_kill_counter_p1 (+ -1 soft_kill_counter_p1))
    )
)

(script continuous soft_kill_reset_p2
    (begin
        (sleep_until (> soft_kill_counter_p2 0))
        (sleep (* 30 15))
        (set soft_kill_counter_p2 (+ -1 soft_kill_counter_p2))
    )
)

(script continuous soft_kill_reset_p3
    (begin
        (sleep_until (> soft_kill_counter_p3 0))
        (sleep (* 30 15))
        (set soft_kill_counter_p3 (+ -1 soft_kill_counter_p3))
    )
)

(script static void spawn_classic_squad_type_13
    (begin
        (spawn_stealth_elites)
        (spawn_elite_commander_infantry)
        (set_stealth_elite_flag)
        (set_elite_commander_flag)
    )
)

(script static void spawn_classic_squad_type_14
    (begin
        (spawn_elite_commander_infantry)
        (spawn_elite_spec_ops_infantry)
        (set_elite_commander_flag)
        (set_spec_elite_flag)
    )
)

(script static void spawn_classic_squad_type_15
    (begin
        (spawn_stealth_elites)
        (spawn_elite_spec_ops_infantry)
        (set_stealth_elite_flag)
        (set_spec_elite_flag)
    )
)

(script static void spawn_classic_squad_type_16
    (begin
        (spawn_heavy_grunts)
        (spawn_stealth_elites)
        (set_stealth_elite_flag)
    )
)

(script static void spawn_classic_squad_type_3
    (begin
        (spawn_two_elite)
        (spawn_one_infantry_random)
        (spawn_one_heavy_grunt_pp)
        (spawn_two_elite)
        (spawn_one_infantry_random)
        (spawn_one_infantry_random)
    )
)

(script static void spawn_classic_squad_type_7
    (begin
        (spawn_elite_commander_infantry)
        (spawn_elite_commander_h_grunts)
        (set_elite_commander_flag)
    )
)

(script static void spawn_classic_squad_type_9
    (begin
        (spawn_elite_spec_ops_infantry)
        (spawn_elite_spec_ops_h_grunts)
        (set_spec_elite_flag)
    )
)

(script static void spawn_elite_commander
    (if (or
            (and
                (= enable_bonus_round 1)
                (= uses_dropships_bonus 1)
                (= round_number 5)
                (= dropships_supported 1)
            )
            (and
                (= enable_bonus_round 0)
                (= uses_dropships_final 1)
                (= round_number 5)
                (= dropships_supported 1)
            )
            (and
                (= uses_dropships_initial 1)
                (= round_number 1)
                (= dropships_supported 1)
            )
        )
        (ai_place "ff_wave_build_cov/elite_commander_random")
        (ai_place "ff_wave_build_cov/elite_commander_ranged")
    )
)

(script static void spawn_elite_commander_h_grunts
    (begin
        (ai_place "ff_wave_build_cov/elite_commander_random")
        (ai_place "ff_wave_build_cov/one_heavy_grunt")
        (ai_place "ff_wave_build_cov/one_heavy_grunt")
        (ai_place "ff_wave_build_cov/one_heavy_grunt")
    )
)

(script static void spawn_elite_commander_infantry
    (begin
        (spawn_elite_commander)
        (ai_place "ff_wave_build_cov/three_infantry_random")
    )
)

(script static void spawn_elite_commander_n
    (ai_place "ff_wave_build_cov/elite_commander_n")
)

(script static void spawn_elite_commanders
    (if (or
            (and
                (= enable_bonus_round 1)
                (= uses_dropships_bonus 1)
                (= round_number 5)
                (= dropships_supported 1)
            )
            (and
                (= enable_bonus_round 0)
                (= uses_dropships_final 1)
                (= round_number 5)
                (= dropships_supported 1)
            )
            (and
                (= uses_dropships_initial 1)
                (= round_number 1)
                (= dropships_supported 1)
            )
        )
        (ai_place "ff_wave_build_cov/boss_elite_commanders_drop")
        (ai_place "ff_wave_build_cov/boss_elite_commanders_nodrop")
    )
)

(script static void spawn_elite_commanders_n
    (ai_place "ff_wave_build_cov/boss_elite_commanders_n")
)

(script static void spawn_elite_gold_infantry_n
    (begin
        (spawn_elite_commander_n)
        (ai_place "ff_wave_build_cov/three_infantry_random_n")
    )
)

(script static void spawn_elite_purifiers
    (begin
        (ai_place "ff_wave_build_cov/elite_purifiers_minor")
        (ai_place "ff_wave_build_cov/elite_purifiers_leaders")
    )
)

(script static void spawn_elite_spec_ops
    (begin
        (ai_place "ff_wave_build_cov/spec_elite")
        (ai_place "ff_wave_build_cov/spec_elite")
    )
)

(script static void spawn_elite_spec_ops_h_grunts
    (begin
        (ai_place "ff_wave_build_cov/spec_elite")
        (ai_place "ff_wave_build_cov/one_heavy_grunt")
        (ai_place "ff_wave_build_cov/one_heavy_grunt")
        (ai_place "ff_wave_build_cov/one_heavy_grunt")
    )
)

(script static void spawn_elite_spec_ops_infantry
    (begin
        (ai_place "ff_wave_build_cov/spec_elite")
        (ai_place "ff_wave_build_cov/three_infantry_random")
    )
)

(script static void spawn_elite_spec_ops_infantry_n
    (begin
        (ai_place "ff_wave_build_cov/spec_elite_n")
        (ai_place "ff_wave_build_cov/three_infantry_random_n")
    )
)

(script static void spawn_elite_spec_ops_n
    (begin
        (ai_place "ff_wave_build_cov/spec_elite_n")
        (ai_place "ff_wave_build_cov/spec_elite_n")
    )
)

(script static void spawn_enemies
    (begin
        (if (and
                bonus_random_each_spawn
                enable_bonus_round
                enable_bonus_enemy_spawns
                (or
                    (= bonus_squad1_mode_id 28)
                    (= bonus_squad1_mode_id 29)
                    (= bonus_squad1_mode_id 30)
                )
            )
            (set squad_id_to_spawn bonus_squad1_mode_id)
        )
        (if (= squad_id_to_spawn 28)
            (set squad_id_to_spawn (random_range 0 28))
        )
        (if (= squad_id_to_spawn 29)
            (set squad_id_to_spawn (random_range 0 20))
        )
        (if (= squad_id_to_spawn 30)
            (set squad_id_to_spawn (random_range 20 27))
        )
        (if (= squad_id_to_spawn 0)
            (squad_0)
        )
        (if (= squad_id_to_spawn 1)
            (squad_1)
        )
        (if (= squad_id_to_spawn 2)
            (squad_2)
        )
        (if (= squad_id_to_spawn 3)
            (squad_3)
        )
        (if (= squad_id_to_spawn 4)
            (squad_4)
        )
        (if (= squad_id_to_spawn 5)
            (squad_5)
        )
        (if (= squad_id_to_spawn 6)
            (squad_6)
        )
        (if (= squad_id_to_spawn 7)
            (squad_7)
        )
        (if (= squad_id_to_spawn 8)
            (squad_8)
        )
        (if (= squad_id_to_spawn 9)
            (squad_9)
        )
        (if (= squad_id_to_spawn 10)
            (squad_10)
        )
        (if (= squad_id_to_spawn 11)
            (squad_11)
        )
        (if (= squad_id_to_spawn 12)
            (squad_12)
        )
        (if (= squad_id_to_spawn 13)
            (squad_13)
        )
        (if (= squad_id_to_spawn 14)
            (squad_14)
        )
        (if (= squad_id_to_spawn 15)
            (squad_15)
        )
        (if (= squad_id_to_spawn 16)
            (squad_16)
        )
        (if (= squad_id_to_spawn 17)
            (squad_17)
        )
        (if (= squad_id_to_spawn 18)
            (squad_18)
        )
        (if (= squad_id_to_spawn 19)
            (squad_19)
        )
        (if (= squad_id_to_spawn 20)
            (squad_20)
        )
        (if (= squad_id_to_spawn 21)
            (squad_21)
        )
        (if (= squad_id_to_spawn 22)
            (squad_22)
        )
        (if (= squad_id_to_spawn 23)
            (squad_23)
        )
        (if (= squad_id_to_spawn 24)
            (squad_24)
        )
        (if (= squad_id_to_spawn 25)
            (squad_25)
        )
        (if (= squad_id_to_spawn 26)
            (squad_26)
        )
        (if (= squad_id_to_spawn 27)
            (squad_27)
        )
        (if (= squad_id_to_spawn 80)
            (squad_80)
        )
        (if (= squad_id_to_spawn 81)
            (squad_81)
        )
        (if (= squad_id_to_spawn 82)
            (squad_82)
        )
        (if (= squad_id_to_spawn 83)
            (squad_83)
        )
        (if (= squad_id_to_spawn 84)
            (squad_84)
        )
        (if (= squad_id_to_spawn 85)
            (squad_85)
        )
        (if (= squad_id_to_spawn 86)
            (squad_86)
        )
        (if (= squad_id_to_spawn 87)
            (squad_87)
        )
        (if (= squad_id_to_spawn 88)
            (squad_88)
        )
        (if (= squad_id_to_spawn 89)
            (squad_89)
        )
        (if (= squad_id_to_spawn 90)
            (squad_90)
        )
        (if (= squad_id_to_spawn 91)
            (squad_91)
        )
    )
)

(script static void spawn_extra_bonus_enemies
    (begin
        (check_spawn_blockers)
        (if (not uses_dropships_bonus)
            (begin
                (spawn_enemies)
                (begin_random
                    (if (and (not bonus_enemies_placed_1) (not spawn_a_block))
                        (begin
                            (bonus_migrate_a)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_b_block))
                        (begin
                            (bonus_migrate_b)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_c_block))
                        (begin
                            (bonus_migrate_c)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_d_block))
                        (begin
                            (bonus_migrate_d)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_e_block))
                        (begin
                            (bonus_migrate_e)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_f_block))
                        (begin
                            (bonus_migrate_f)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_g_block))
                        (begin
                            (bonus_migrate_g)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_h_block))
                        (begin
                            (bonus_migrate_h)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_i_block))
                        (begin
                            (bonus_migrate_i)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_j_block))
                        (begin
                            (bonus_migrate_j)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                )
            )
        )
        (teleport_ai_bonus)
        (set bonus_enemies_placed_1 0)
        (if uses_dropships_bonus
            (begin
                (spawn_enemies)
                (ai_braindead "ff_wave_build_cov" 1)
                (vehicle_load_magic "dropship1" "passenger" (ai_actors "ff_wave_build_cov"))
                (ai_braindead "ff_wave_build_cov" 0)
                (ai_migrate "ff_wave_build_cov" "ff_enemies_cov/bonus_squad")
                (ai_command_list "ff_enemies_cov/bonus_squad" "no_fall_damage")
                (dropship_unload)
            )
        )
    )
)

(script static void spawn_flood_assassins
    (ai_place "ff_wave_build_flood/flood_assassins")
)

(script static void spawn_flood_assassins_ranged
    (ai_place "ff_wave_build_flood/flood_assassins_ranged")
)

(script static void spawn_flood_carriers
    (ai_place "ff_wave_build_flood/flood_carriers")
)

(script static void spawn_flood_combat
    (ai_place "ff_wave_build_flood/flood_combat")
)

(script static void spawn_flood_combat_heavy
    (ai_place "ff_wave_build_flood/flood_combat_heavy")
)

(script static void spawn_grunts
    (ai_place "ff_wave_build_cov/grunts")
)

(script static void spawn_grunts_n
    (ai_place "ff_wave_build_cov/grunts_n")
)

(script static void spawn_heavy_grunts
    (ai_place "ff_wave_build_cov/heavy_grunts")
)

(script static void spawn_heavy_grunts_n
    (ai_place "ff_wave_build_cov/heavy_grunts_n")
)

(script static void spawn_infantry_random
    (ai_place "ff_wave_build_cov/infantry_random")
)

(script static void spawn_infantry_random_n
    (ai_place "ff_wave_build_cov/infantry_random_n")
)

(script static void spawn_infected_elites
    (begin
        (ai_place "ff_wave_build_flood/three_flood_elite")
        (ai_place "ff_wave_build_flood/one_flood_carrier")
    )
)

(script static void spawn_infected_humans
    (begin
        (ai_place "ff_wave_build_flood/three_flood_human")
        (ai_place "ff_wave_build_flood/one_flood_carrier")
    )
)

(script static void spawn_initial_bonus_enemies
    (begin
        (check_spawn_blockers)
        (if (not uses_dropships_bonus)
            (begin
                (spawn_enemies)
                (begin_random
                    (if (and (not bonus_enemies_placed_1) (not spawn_a_block))
                        (begin
                            (bonus_migrate_a)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_b_block))
                        (begin
                            (bonus_migrate_b)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_c_block))
                        (begin
                            (bonus_migrate_c)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_d_block))
                        (begin
                            (bonus_migrate_d)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_e_block))
                        (begin
                            (bonus_migrate_e)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_f_block))
                        (begin
                            (bonus_migrate_f)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_g_block))
                        (begin
                            (bonus_migrate_g)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_h_block))
                        (begin
                            (bonus_migrate_h)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_i_block))
                        (begin
                            (bonus_migrate_i)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                    (if (and (not bonus_enemies_placed_1) (not spawn_j_block))
                        (begin
                            (bonus_migrate_j)
                            (set bonus_enemies_placed_1 1)
                        )
                    )
                )
            )
        )
        (spawn_enemies)
        (begin_random
            (if (and (not bonus_enemies_placed_2) (not spawn_a_block))
                (begin
                    (bonus_migrate_a)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_b_block))
                (begin
                    (bonus_migrate_b)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_c_block))
                (begin
                    (bonus_migrate_c)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_d_block))
                (begin
                    (bonus_migrate_d)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_e_block))
                (begin
                    (bonus_migrate_e)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_f_block))
                (begin
                    (bonus_migrate_f)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_g_block))
                (begin
                    (bonus_migrate_g)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_h_block))
                (begin
                    (bonus_migrate_h)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_i_block))
                (begin
                    (bonus_migrate_i)
                    (set bonus_enemies_placed_2 1)
                )
            )
            (if (and (not bonus_enemies_placed_2) (not spawn_j_block))
                (begin
                    (bonus_migrate_j)
                    (set bonus_enemies_placed_2 1)
                )
            )
        )
        (spawn_enemies)
        (begin_random
            (if (and (not bonus_enemies_placed_3) (not spawn_a_block))
                (begin
                    (bonus_migrate_a)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_b_block))
                (begin
                    (bonus_migrate_b)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_c_block))
                (begin
                    (bonus_migrate_c)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_d_block))
                (begin
                    (bonus_migrate_d)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_e_block))
                (begin
                    (bonus_migrate_e)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_f_block))
                (begin
                    (bonus_migrate_f)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_g_block))
                (begin
                    (bonus_migrate_g)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_h_block))
                (begin
                    (bonus_migrate_h)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_i_block))
                (begin
                    (bonus_migrate_i)
                    (set bonus_enemies_placed_3 1)
                )
            )
            (if (and (not bonus_enemies_placed_3) (not spawn_j_block))
                (begin
                    (bonus_migrate_j)
                    (set bonus_enemies_placed_3 1)
                )
            )
        )
        (spawn_enemies)
        (begin_random
            (if (and (not bonus_enemies_placed_4) (not spawn_a_block))
                (begin
                    (bonus_migrate_a)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_b_block))
                (begin
                    (bonus_migrate_b)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_c_block))
                (begin
                    (bonus_migrate_c)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_d_block))
                (begin
                    (bonus_migrate_d)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_e_block))
                (begin
                    (bonus_migrate_e)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_f_block))
                (begin
                    (bonus_migrate_f)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_g_block))
                (begin
                    (bonus_migrate_g)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_h_block))
                (begin
                    (bonus_migrate_h)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_i_block))
                (begin
                    (bonus_migrate_i)
                    (set bonus_enemies_placed_4 1)
                )
            )
            (if (and (not bonus_enemies_placed_4) (not spawn_j_block))
                (begin
                    (bonus_migrate_j)
                    (set bonus_enemies_placed_4 1)
                )
            )
        )
        (teleport_ai_bonus)
        (set bonus_enemies_placed_1 0)
        (set bonus_enemies_placed_2 0)
        (set bonus_enemies_placed_3 0)
        (set bonus_enemies_placed_4 0)
        (if uses_dropships_bonus
            (dropship_unload)
        )
    )
)

(script static void spawn_jackals
    (ai_place "ff_wave_build_cov/jackals")
)

(script static void spawn_jackals_n
    (ai_place "ff_wave_build_cov/jackals_n")
)

(script static void spawn_marine_squad_1
    (begin
        (if (= allied_weapon_set 1)
            (begin
                (ai_place "ff_marines_wave/squad_1_default")
                (ai_place "ff_marines_wave/sarge_1_default")
            )
        )
        (if (= allied_weapon_set 2)
            (begin
                (ai_place "ff_marines_wave/squad_1_human")
                (set sarge_1_weapon_id (random_range 6 9))
                (sarge_1_weapon_random)
            )
        )
        (if (= allied_weapon_set 3)
            (begin
                (ai_place "ff_marines_wave/squad_1_cov")
                (set sarge_1_weapon_id (random_range 4 6))
                (sarge_1_weapon_random)
            )
        )
        (if (= allied_weapon_set 4)
            (begin
                (ai_place "ff_marines_wave/squad_1_plasma")
                (ai_place "ff_marines_wave/sarge_1_plasma")
            )
        )
        (if (= allied_weapon_set 5)
            (begin
                (ai_place "ff_marines_wave/squad_1_needler")
                (ai_place "ff_marines_wave/sarge_1_needler")
            )
        )
        (if (= allied_weapon_set 6)
            (begin
                (ai_place "ff_marines_wave/squad_1_shotgun")
                (ai_place "ff_marines_wave/sarge_1_shotgun")
            )
        )
        (if (= allied_weapon_set 7)
            (begin
                (ai_place "ff_marines_wave/squad_1_sniper")
                (ai_place "ff_marines_wave/sarge_1_sniper")
            )
        )
        (if (= allied_weapon_set 8)
            (begin
                (ai_place "ff_marines_wave/squad_1_ar")
                (ai_place "ff_marines_wave/sarge_1_ar")
            )
        )
        (ai_migrate "ff_marines_wave" "ff_marines/squad_1")
    )
)

(script static void spawn_marine_squad_2
    (begin
        (if (= allied_weapon_set 1)
            (begin
                (ai_place "ff_marines_wave/squad_2_default")
                (ai_place "ff_marines_wave/sarge_2_default")
            )
        )
        (if (= allied_weapon_set 2)
            (begin
                (ai_place "ff_marines_wave/squad_2_human")
                (set sarge_2_weapon_id (random_range 6 9))
                (sarge_2_weapon_random)
            )
        )
        (if (= allied_weapon_set 3)
            (begin
                (ai_place "ff_marines_wave/squad_2_cov")
                (set sarge_2_weapon_id (random_range 4 6))
                (sarge_2_weapon_random)
            )
        )
        (if (= allied_weapon_set 4)
            (begin
                (ai_place "ff_marines_wave/squad_2_plasma")
                (ai_place "ff_marines_wave/sarge_2_plasma")
            )
        )
        (if (= allied_weapon_set 5)
            (begin
                (ai_place "ff_marines_wave/squad_2_needler")
                (ai_place "ff_marines_wave/sarge_2_needler")
            )
        )
        (if (= allied_weapon_set 6)
            (begin
                (ai_place "ff_marines_wave/squad_2_shotgun")
                (ai_place "ff_marines_wave/sarge_2_shotgun")
            )
        )
        (if (= allied_weapon_set 7)
            (begin
                (ai_place "ff_marines_wave/squad_2_sniper")
                (ai_place "ff_marines_wave/sarge_2_sniper")
            )
        )
        (if (= allied_weapon_set 8)
            (begin
                (ai_place "ff_marines_wave/squad_2_ar")
                (ai_place "ff_marines_wave/sarge_2_ar")
            )
        )
        (ai_migrate "ff_marines_wave" "ff_marines/squad_2")
    )
)

(script static void spawn_marines
    (begin
        (if (> 3 (ai_nonswarm_count "ff_marines"))
            (begin
                (spawn_marine_squad_1)
                (spawn_marine_squad_2)
            )
        )
        (if (> 5 (ai_nonswarm_count "ff_marines"))
            (spawn_marine_squad_1)
        )
        (ai_renew "ff_marines")
        (if invincible_allies
            (units_set_maximum_vitality (ai_actors "ff_marines") 1000000 1000000)
            (units_set_maximum_vitality (ai_actors "ff_marines") 150 75)
        )
        (if (= ai_equipment_drops 0)
            (unit_doesnt_drop_items (ai_actors "ff_marines"))
        )
        (if (= invincible_allies 1)
            (object_cannot_take_damage (ai_actors "ff_marines"))
        )
        (if (= marines_use_flashlight 1)
            (units_set_desired_flashlight_state (ai_actors "ff_marines") 1)
        )
    )
)

(script static void spawn_one_elite
    (ai_place "ff_wave_build_cov/one_elite")
)

(script static void spawn_one_elite_infantry
    (begin
        (ai_place "ff_wave_build_cov/one_elite")
        (ai_place "ff_wave_build_cov/three_infantry_random")
    )
)

(script static void spawn_one_elite_infantry_n
    (begin
        (ai_place "ff_wave_build_cov/one_elite_n")
        (ai_place "ff_wave_build_cov/three_infantry_random_n")
    )
)

(script static void spawn_one_grunt
    (ai_place "ff_wave_build_cov/one_grunt")
)

(script static void spawn_one_heavy_grunt
    (ai_place "ff_wave_build_cov/one_heavy_grunt")
)

(script static void spawn_one_heavy_grunt_pp
    (ai_place "ff_wave_build_cov/one_heavy_grunt_pp")
)

(script static void spawn_one_hunter
    (ai_place "ff_wave_build_cov/one_hunter")
)

(script static void spawn_one_infantry_random
    (ai_place "ff_wave_build_cov/one_infantry_random")
)

(script static void spawn_one_jackal
    (ai_place "ff_wave_build_cov/one_jackal")
)

(script static void spawn_one_spec_ops_infantry
    (ai_place "ff_wave_build_cov/one_spec_ops_infantry")
)

(script static void spawn_one_spec_ops_infantry_n
    (ai_place "ff_wave_build_cov/one_spec_ops_infantry_n")
)

(script static void spawn_sentinels
    (ai_place "ff_wave_build_sentinels/sentinels")
)

(script static void spawn_spec_ops_infantry
    (ai_place "ff_wave_build_cov/spec_ops_infantry")
)

(script static void spawn_spec_ops_infantry_n
    (ai_place "ff_wave_build_cov/spec_ops_infantry_n")
)

(script static void spawn_stealth_elites
    (if (or
            (and
                (= enable_bonus_round 1)
                (= uses_dropships_bonus 1)
                (= round_number 5)
                (= dropships_supported 1)
            )
            (and
                (= enable_bonus_round 0)
                (= uses_dropships_final 1)
                (= round_number 5)
                (= dropships_supported 1)
            )
            (and
                (= uses_dropships_initial 1)
                (= round_number 1)
                (= dropships_supported 1)
            )
        )
        (ai_place "ff_wave_build_cov/four_stealth_elites_random")
        (ai_place "ff_wave_build_cov/four_stealth_elites_ranged")
    )
)

(script static void spawn_three_infantry_random
    (ai_place "ff_wave_build_cov/three_infantry_random")
)

(script static void spawn_two_elite
    (begin
        (ai_place "ff_wave_build_cov/one_elite")
        (ai_place "ff_wave_build_cov/one_elite")
    )
)

(script static void spawn_two_elite_n
    (begin
        (ai_place "ff_wave_build_cov/one_elite_n")
        (ai_place "ff_wave_build_cov/one_elite_n")
    )
)

(script static void squad_0
    (begin
        (spawn_grunts)
        (spawn_grunts)
    )
)

(script static void squad_1
    (begin
        (spawn_heavy_grunts)
        (spawn_heavy_grunts)
    )
)

(script static void squad_10
    (begin
        (spawn_elite_spec_ops)
        (spawn_elite_spec_ops)
        (spawn_one_elite)
        (spawn_three_infantry_random)
    )
)

(script static void squad_11
    (begin
        (spawn_elite_spec_ops_infantry)
        (spawn_one_elite_infantry)
        (set_spec_elite_flag)
    )
)

(script static void squad_12
    (begin
        (spawn_elite_spec_ops)
        (spawn_elite_spec_ops)
        (spawn_spec_ops_infantry)
    )
)

(script static void squad_13
    (begin
        (spawn_stealth_elites)
        (spawn_stealth_elites)
    )
)

(script static void squad_14
    (begin
        (spawn_stealth_elites)
        (spawn_three_infantry_random)
        (spawn_one_heavy_grunt_pp)
        (set_stealth_elite_flag)
    )
)

(script static void squad_15
    (begin
        (spawn_stealth_elites)
        (spawn_spec_ops_infantry)
    )
)

(script static void squad_16
    (begin
        (spawn_elite_commanders)
        (spawn_elite_commanders)
    )
)

(script static void squad_17
    (begin
        (spawn_elite_commander_infantry)
        (spawn_one_elite_infantry)
        (set_elite_commander_flag)
    )
)

(script static void squad_18
    (begin
        (spawn_elite_commanders)
        (spawn_one_spec_ops_infantry)
        (spawn_spec_ops_infantry)
    )
)

(script static void squad_19
    (begin
        (spawn_elite_purifiers)
        (spawn_elite_purifiers)
    )
)

(script static void squad_2
    (begin
        (spawn_jackals)
        (spawn_jackals)
    )
)

(script static void squad_20
    (begin
        (spawn_flood_carriers)
        (spawn_flood_carriers)
    )
)

(script static void squad_21
    (begin
        (spawn_flood_assassins)
        (spawn_flood_assassins)
    )
)

(script static void squad_22
    (begin
        (spawn_flood_assassins_ranged)
        (spawn_flood_assassins_ranged)
    )
)

(script static void squad_23
    (begin
        (spawn_flood_combat)
        (spawn_flood_combat)
    )
)

(script static void squad_24
    (begin
        (spawn_flood_combat_heavy)
        (spawn_flood_combat_heavy)
    )
)

(script static void squad_25
    (begin
        (spawn_infected_humans)
        (spawn_infected_humans)
    )
)

(script static void squad_26
    (begin
        (spawn_infected_elites)
        (spawn_infected_elites)
    )
)

(script static void squad_27
    (begin
        (spawn_sentinels)
        (spawn_sentinels)
    )
)

(script static void squad_3
    (begin
        (spawn_infantry_random)
        (spawn_infantry_random)
    )
)

(script static void squad_4
    (begin
        (spawn_spec_ops_infantry)
        (spawn_spec_ops_infantry)
    )
)

(script static void squad_5
    (begin
        (spawn_one_hunter)
        (spawn_one_hunter)
        (spawn_one_hunter)
        (spawn_one_hunter)
    )
)

(script static void squad_6
    (begin
        (spawn_one_hunter)
        (spawn_three_infantry_random)
        (spawn_one_hunter)
        (spawn_one_heavy_grunt_pp)
        (spawn_one_infantry_random)
        (spawn_one_infantry_random)
        (set_hunter_flag)
    )
)

(script static void squad_7
    (begin
        (spawn_one_hunter)
        (spawn_one_elite)
        (spawn_one_infantry_random)
        (spawn_one_infantry_random)
        (spawn_one_hunter)
        (spawn_one_elite)
        (spawn_one_infantry_random)
        (spawn_one_infantry_random)
        (set_hunter_flag)
    )
)

(script static void squad_8
    (begin
        (spawn_two_elite)
        (spawn_two_elite)
        (spawn_two_elite)
        (spawn_two_elite)
    )
)

(script static void squad_80
    (begin
        (spawn_infantry_random_n)
        (spawn_infantry_random_n)
    )
)

(script static void squad_81
    (begin
        (spawn_two_elite_n)
        (spawn_two_elite_n)
        (spawn_two_elite_n)
        (spawn_two_elite_n)
    )
)

(script static void squad_82
    (begin
        (spawn_one_elite_infantry_n)
        (spawn_one_elite_infantry_n)
    )
)

(script static void squad_83
    (begin
        (spawn_elite_spec_ops_infantry_n)
        (spawn_one_elite_infantry_n)
    )
)

(script static void squad_84
    (begin
        (spawn_grunts_n)
        (spawn_grunts_n)
    )
)

(script static void squad_85
    (begin
        (spawn_jackals_n)
        (spawn_jackals_n)
    )
)

(script static void squad_86
    (begin
        (spawn_elite_gold_infantry_n)
        (spawn_one_elite_infantry_n)
    )
)

(script static void squad_87
    (begin
        (spawn_spec_ops_infantry_n)
        (spawn_spec_ops_infantry_n)
    )
)

(script static void squad_88
    (begin
        (spawn_elite_spec_ops_n)
        (spawn_elite_spec_ops_n)
        (spawn_spec_ops_infantry_n)
    )
)

(script static void squad_89
    (begin
        (spawn_elite_commanders_n)
        (spawn_one_spec_ops_infantry_n)
        (spawn_spec_ops_infantry_n)
    )
)

(script static void squad_9
    (begin
        (spawn_one_elite_infantry)
        (spawn_one_elite_infantry)
    )
)

(script static void squad_90
    (begin
        (spawn_elite_commanders_n)
        (spawn_elite_commanders_n)
    )
)

(script static void squad_91
    (begin
        (spawn_heavy_grunts_n)
        (spawn_heavy_grunts_n)
    )
)

(script continuous squad_builder_and_placer
    (begin
        (sleep_until squad_builder_enabled 5)
        (if (= building_squad_number 0)
            (set building_squad_number (+ building_squad_number 1))
        )
        (if squad_selector
            (if (and
                    (= use_built_in_enemy_spawns 1)
                    (> wave_number 1)
                    (< wave_number 5)
                )
                (begin
                    (set wave_spawns_random_number (random_range 1 111))
                    (if (and (> wave_spawns_random_number 0) (>= 5 wave_spawns_random_number))
                        (if hunters_spawned
                            (squad_1)
                            (squad_6)
                        )
                    )
                    (if (and (> wave_spawns_random_number 5) (>= 10 wave_spawns_random_number))
                        (if hunters_spawned
                            (squad_3)
                            (squad_7)
                        )
                    )
                    (if (and (> wave_spawns_random_number 10) (>= 20 wave_spawns_random_number))
                        (spawn_classic_squad_type_3)
                    )
                    (if (and (> wave_spawns_random_number 20) (>= 45 wave_spawns_random_number))
                        (squad_9)
                    )
                    (if (and (> wave_spawns_random_number 45) (>= 50 wave_spawns_random_number))
                        (if elite_commander_spawned
                            (squad_9)
                            (spawn_classic_squad_type_7)
                        )
                    )
                    (if (and (> wave_spawns_random_number 50) (>= 60 wave_spawns_random_number))
                        (if elite_commander_spawned
                            (squad_9)
                            (squad_17)
                        )
                    )
                    (if (and (> wave_spawns_random_number 60) (>= 65 wave_spawns_random_number))
                        (if spec_elite_spawned
                            (squad_9)
                            (spawn_classic_squad_type_9)
                        )
                    )
                    (if (and (> wave_spawns_random_number 65) (>= 75 wave_spawns_random_number))
                        (if spec_elite_spawned
                            (squad_9)
                            (squad_11)
                        )
                    )
                    (if (and (> wave_spawns_random_number 75) (>= 85 wave_spawns_random_number))
                        (if stealth_elites_spawned
                            (squad_9)
                            (squad_14)
                        )
                    )
                    (if (and (> wave_spawns_random_number 85) (>= 90 wave_spawns_random_number))
                        (squad_3)
                    )
                    (if (and (> wave_spawns_random_number 90) (>= 95 wave_spawns_random_number))
                        (if (or stealth_elites_spawned elite_commander_spawned)
                            (squad_9)
                            (spawn_classic_squad_type_13)
                        )
                    )
                    (if (and (> wave_spawns_random_number 95) (>= 100 wave_spawns_random_number))
                        (if (or spec_elite_spawned elite_commander_spawned)
                            (squad_9)
                            (spawn_classic_squad_type_14)
                        )
                    )
                    (if (and (> wave_spawns_random_number 100) (>= 105 wave_spawns_random_number))
                        (if (or stealth_elites_spawned spec_elite_spawned)
                            (squad_9)
                            (spawn_classic_squad_type_15)
                        )
                    )
                    (if (and (> wave_spawns_random_number 105) (>= 110 wave_spawns_random_number))
                        (if stealth_elites_spawned
                            (squad_9)
                            (spawn_classic_squad_type_16)
                        )
                    )
                    (if (= squad_selector 1)
                        (begin
                            (set squad_selector 0)
                            (set squad_assigner 1)
                        )
                    )
                )
                (begin
                    (if (= wave_number 1)
                        (begin_random
                            (set squad_id_to_spawn initial_squad1_mode_id)
                            (set squad_id_to_spawn initial_squad2_mode_id)
                            (set squad_id_to_spawn initial_squad3_mode_id)
                        )
                    )
                    (if (and (> wave_number 1) (< wave_number 5))
                        (begin_random
                            (set squad_id_to_spawn mid_squad1_mode_id)
                            (set squad_id_to_spawn mid_squad2_mode_id)
                            (set squad_id_to_spawn mid_squad3_mode_id)
                            (set squad_id_to_spawn mid_squad4_mode_id)
                            (set squad_id_to_spawn mid_squad5_mode_id)
                            (set squad_id_to_spawn mid_squad6_mode_id)
                            (set squad_id_to_spawn mid_squad7_mode_id)
                        )
                    )
                    (if (= wave_number 5)
                        (begin_random
                            (set squad_id_to_spawn final_squad1_mode_id)
                            (set squad_id_to_spawn final_squad2_mode_id)
                            (set squad_id_to_spawn final_squad3_mode_id)
                        )
                    )
                    (spawn_enemies)
                    (if (= squad_selector 1)
                        (begin
                            (set squad_selector 0)
                            (set squad_assigner 1)
                        )
                    )
                )
            )
        )
        (if squad_assigner
            (begin
                (if (= spawn_blocks_checked 0)
                    (check_spawn_blockers)
                )
                (begin_random
                    (if (and
                            (not squad_placed)
                            (not squad_a_spawn)
                            (not spawn_a_block)
                        )
                        (begin
                            (set squad_a_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_a")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_a")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_a")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_b_spawn)
                            (not spawn_b_block)
                        )
                        (begin
                            (set squad_b_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_b")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_b")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_b")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_c_spawn)
                            (not spawn_c_block)
                        )
                        (begin
                            (set squad_c_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_c")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_c")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_c")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_d_spawn)
                            (not spawn_d_block)
                        )
                        (begin
                            (set squad_d_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_d")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_d")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_d")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_e_spawn)
                            (not spawn_e_block)
                        )
                        (begin
                            (set squad_e_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_e")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_e")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_e")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_f_spawn)
                            (not spawn_f_block)
                        )
                        (begin
                            (set squad_f_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_f")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_f")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_f")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_g_spawn)
                            (not spawn_g_block)
                        )
                        (begin
                            (set squad_g_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_g")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_g")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_g")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_h_spawn)
                            (not spawn_h_block)
                        )
                        (begin
                            (set squad_h_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_h")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_h")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_h")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_i_spawn)
                            (not spawn_i_block)
                        )
                        (begin
                            (set squad_i_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_i")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_i")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_i")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                    (if (and
                            (not squad_placed)
                            (not squad_j_spawn)
                            (not spawn_j_block)
                        )
                        (begin
                            (set squad_j_spawn 1)
                            (ai_migrate "ff_wave_build_cov" "ff_holding_cov/squad_j")
                            (ai_migrate "ff_wave_build_flood" "ff_holding_flood/squad_j")
                            (ai_migrate "ff_wave_build_sentinels" "ff_holding_sentinels/squad_j")
                            (set squad_assigner 0)
                            (set building_squad_number (+ building_squad_number 1))
                            (set squad_placed 1)
                        )
                    )
                )
            )
        )
        (if (= building_squad_number 5)
            (begin
                (set squads_built_and_assigned 1)
                (set squad_builder_enabled 0)
            )
            (begin
                (set squad_selector 1)
                (set squad_placed 0)
            )
        )
    )
)

(script static void stop_all_music
    (begin
        (sound_looping_stop "sound\music\firefight1\firefight1")
        (sound_looping_stop "levels\ff_extraction\music\ff_initial_music_2")
        (sound_looping_stop "sound\music\firefight2\firefight2")
        (sound_looping_stop "levels\ff_extraction\music\ff_final_music_1")
        (sound_looping_stop "levels\ff_extraction\music\ff_final_music_2")
        (sound_looping_stop "sound\music\firefight7\firefight7")
    )
)

(script static void teleport_ai
    (begin
        (ai_migrate "ff_holding_cov/squad_a" "ff_enemies_cov/squad_a")
        (ai_migrate "ff_holding_cov/squad_b" "ff_enemies_cov/squad_b")
        (ai_migrate "ff_holding_cov/squad_c" "ff_enemies_cov/squad_c")
        (ai_migrate "ff_holding_cov/squad_d" "ff_enemies_cov/squad_d")
        (ai_migrate "ff_holding_cov/squad_e" "ff_enemies_cov/squad_e")
        (ai_migrate "ff_holding_cov/squad_f" "ff_enemies_cov/squad_f")
        (ai_migrate "ff_holding_cov/squad_g" "ff_enemies_cov/squad_g")
        (ai_migrate "ff_holding_cov/squad_h" "ff_enemies_cov/squad_h")
        (ai_migrate "ff_holding_cov/squad_i" "ff_enemies_cov/squad_i")
        (ai_migrate "ff_holding_cov/squad_j" "ff_enemies_cov/squad_j")
        (ai_migrate "ff_holding_flood/squad_a" "ff_enemies_flood/squad_a")
        (ai_migrate "ff_holding_flood/squad_b" "ff_enemies_flood/squad_b")
        (ai_migrate "ff_holding_flood/squad_c" "ff_enemies_flood/squad_c")
        (ai_migrate "ff_holding_flood/squad_d" "ff_enemies_flood/squad_d")
        (ai_migrate "ff_holding_flood/squad_e" "ff_enemies_flood/squad_e")
        (ai_migrate "ff_holding_flood/squad_f" "ff_enemies_flood/squad_f")
        (ai_migrate "ff_holding_flood/squad_g" "ff_enemies_flood/squad_g")
        (ai_migrate "ff_holding_flood/squad_h" "ff_enemies_flood/squad_h")
        (ai_migrate "ff_holding_flood/squad_i" "ff_enemies_flood/squad_i")
        (ai_migrate "ff_holding_flood/squad_j" "ff_enemies_flood/squad_j")
        (ai_migrate "ff_holding_sentinels/squad_a" "ff_enemies_sentinels/squad_a")
        (ai_migrate "ff_holding_sentinels/squad_b" "ff_enemies_sentinels/squad_b")
        (ai_migrate "ff_holding_sentinels/squad_c" "ff_enemies_sentinels/squad_c")
        (ai_migrate "ff_holding_sentinels/squad_d" "ff_enemies_sentinels/squad_d")
        (ai_migrate "ff_holding_sentinels/squad_e" "ff_enemies_sentinels/squad_e")
        (ai_migrate "ff_holding_sentinels/squad_f" "ff_enemies_sentinels/squad_f")
        (ai_migrate "ff_holding_sentinels/squad_g" "ff_enemies_sentinels/squad_g")
        (ai_migrate "ff_holding_sentinels/squad_h" "ff_enemies_sentinels/squad_h")
        (ai_migrate "ff_holding_sentinels/squad_i" "ff_enemies_sentinels/squad_i")
        (ai_migrate "ff_holding_sentinels/squad_j" "ff_enemies_sentinels/squad_j")
        (if (= ai_equipment_drops 0)
            (begin
                (unit_doesnt_drop_items (ai_actors "ff_enemies_cov"))
                (unit_doesnt_drop_items (ai_actors "ff_enemies_flood"))
            )
        )
        (ai_teleport_to_starting_location "ff_enemies_cov")
        (ai_teleport_to_starting_location "ff_enemies_flood")
        (ai_teleport_to_starting_location "ff_enemies_sentinels")
        (ai_braindead "ff_enemies_cov" 0)
        (ai_braindead "ff_enemies_flood" 0)
        (ai_braindead "ff_enemies_sentinels" 0)
        (ai_force_active "ff_enemies_cov" 1)
        (ai_force_active "ff_enemies_flood" 1)
        (ai_force_active "ff_enemies_sentinels" 1)
        (ai_set_current_state "ff_enemies_cov" "search")
        (ai_set_current_state "ff_enemies_flood" "search")
        (ai_set_current_state "ff_enemies_sentinels" "search")
        (reset_spawn_blockers)
        (set spawn_blocks_checked 0)
        (set hunters_spawned 0)
        (set stealth_elites_spawned 0)
        (set elite_commander_spawned 0)
        (set spec_elite_spawned 0)
        (sleep 30)
    )
)

(script static void teleport_ai_bonus
    (begin
        (ai_teleport_to_starting_location "ff_enemies_cov")
        (ai_teleport_to_starting_location "ff_enemies_flood")
        (ai_teleport_to_starting_location "ff_enemies_sentinels")
        (ai_migrate "ff_enemies_cov" "ff_enemies_cov/bonus_squad")
        (ai_migrate "ff_enemies_flood" "ff_enemies_flood/bonus_squad")
        (ai_migrate "ff_enemies_sentinels" "ff_enemies_sentinels/bonus_squad")
        (ai_force_active "ff_enemies_cov/bonus_squad" 1)
        (ai_force_active "ff_enemies_flood/bonus_squad" 1)
        (ai_force_active "ff_enemies_sentinels/bonus_squad" 1)
        (if (= ai_equipment_drops 0)
            (begin
                (unit_doesnt_drop_items (ai_actors "ff_enemies_cov"))
                (unit_doesnt_drop_items (ai_actors "ff_enemies_flood"))
            )
        )
        (ai_braindead "ff_enemies_cov" 0)
        (ai_braindead "ff_enemies_flood" 0)
        (ai_braindead "ff_enemies_sentinels" 0)
        (ai_force_active "ff_enemies_cov" 1)
        (ai_force_active "ff_enemies_flood" 1)
        (ai_force_active "ff_enemies_sentinels" 1)
        (ai_set_current_state "ff_enemies_cov" "search")
        (ai_set_current_state "ff_enemies_flood" "search")
        (ai_set_current_state "ff_enemies_sentinels" "search")
        (reset_spawn_blockers)
        (set spawn_blocks_checked 0)
        (sleep 30)
    )
)

(script static void thunderstorm_skull_quiet
    (set debug_ice_cream_flavor_status_thunderstorm 1)
)

(script continuous timer
    (begin
        (if (and
                (= (- time_limit (/ (- (game_time) start_tick_time) 30)) 1800)
                (= game_over_flag 0)
                (= time_limit_enabled 1)
                (= start_game_setup 0)
                (= suppress_time_announcement 0)
            )
            (30_min_warning)
        )
        (if (and
                (= (- time_limit (/ (- (game_time) start_tick_time) 30)) 900)
                (= game_over_flag 0)
                (= time_limit_enabled 1)
                (= start_game_setup 0)
                (= suppress_time_announcement 0)
            )
            (15_min_warning)
        )
        (if (and
                (= (- time_limit (/ (- (game_time) start_tick_time) 30)) 300)
                (= game_over_flag 0)
                (= time_limit_enabled 1)
                (= start_game_setup 0)
                (= suppress_time_announcement 0)
            )
            (5_min_warning)
        )
        (if (and
                (= (- time_limit (/ (- (game_time) start_tick_time) 30)) 60)
                (= game_over_flag 0)
                (= time_limit_enabled 1)
                (= start_game_setup 0)
                (= suppress_time_announcement 0)
            )
            (1_min_warning)
        )
        (if (and
                (= (- time_limit (/ (- (game_time) start_tick_time) 30)) 30)
                (= game_over_flag 0)
                (= time_limit_enabled 1)
                (= start_game_setup 0)
                (= suppress_time_announcement 0)
            )
            (30_sec_warning)
        )
        (if (and
                (= (- time_limit (/ (- (game_time) start_tick_time) 30)) 10)
                (= game_over_flag 0)
                (= time_limit_enabled 1)
                (= start_game_setup 0)
                (= suppress_time_announcement 0)
            )
            (10_sec_warning)
        )
        (if (and
                (<= (- time_limit (/ (- (game_time) start_tick_time) 30)) 0)
                (= game_over_flag 0)
                (= time_limit_enabled 1)
                (= start_game_setup 0)
                (= suppress_time_announcement 0)
            )
            (begin
                (if enable_bonus_round
                    (sleep_until (= enable_bonus_round 0) 1)
                )
                (game_over)
            )
        )
    )
)

(script static void tjw_skull_quiet
    (set debug_ice_cream_flavor_status_thats_just_wrong 1)
)

(script static void update_ff_help_text
    (begin
        (if (= game_menu_id 0)
            (menu_0_help)
        )
        (if (= game_menu_id 1)
            (menu_1_help)
        )
        (if (= game_menu_id 2)
            (menu_2_help)
        )
        (if (= game_menu_id 3)
            (menu_3_help)
        )
        (if (= game_menu_id 4)
            (menu_4_help)
        )
        (if (= game_menu_id 5)
            (menu_5_help)
        )
        (if (= game_menu_id 6)
            (menu_6_help)
        )
        (if (= game_menu_id 52)
            (menu_52_help)
        )
        (if (= game_menu_id 521)
            (menu_521_help)
        )
        (if (= game_menu_id 522)
            (menu_522_help)
        )
        (if (= game_menu_id 523)
            (menu_523_help)
        )
        (if (= game_menu_id 524)
            (menu_524_help)
        )
    )
)

(script static void update_lives_limit
    (begin
        (if (= lives_mode_id 0)
            (begin
                (set uses_lives 1)
                (set warned_lives_0 1)
                (set warned_lives_1 1)
                (set warned_lives_5 1)
                (set lives_remaining 0)
            )
        )
        (if (= lives_mode_id 1)
            (begin
                (set uses_lives 1)
                (set warned_lives_1 1)
                (set warned_lives_5 1)
                (set lives_remaining 1)
            )
        )
        (if (= lives_mode_id 2)
            (begin
                (set uses_lives 1)
                (set warned_lives_5 1)
                (set lives_remaining 5)
            )
        )
        (if (= lives_mode_id 3)
            (begin
                (set uses_lives 1)
                (set lives_remaining 10)
            )
        )
        (if (= lives_mode_id 4)
            (begin
                (set uses_lives 1)
                (set lives_remaining 20)
            )
        )
        (if (= lives_mode_id 5)
            (begin
                (set uses_lives 0)
                (set lives_remaining 20)
            )
        )
    )
)

(script static void update_round_limit
    (begin
        (if (= round_mode_id 0)
            (begin
                (set round_limit_enabled 0)
                (set rounds_limit 12)
            )
        )
        (if (= round_mode_id 1)
            (begin
                (set round_limit_enabled 1)
                (set rounds_limit 1)
            )
        )
        (if (= round_mode_id 2)
            (begin
                (set round_limit_enabled 1)
                (set rounds_limit 3)
            )
        )
        (if (= round_mode_id 3)
            (begin
                (set round_limit_enabled 1)
                (set rounds_limit 6)
            )
        )
        (if (= round_mode_id 4)
            (begin
                (set round_limit_enabled 1)
                (set rounds_limit 9)
            )
        )
        (if (= round_mode_id 5)
            (begin
                (set round_limit_enabled 1)
                (set rounds_limit 12)
            )
        )
    )
)

(script static void update_time_limit
    (begin
        (if (= time_mode_id 0)
            (begin
                (set time_limit_enabled 0)
                (set time_limit 3600)
            )
        )
        (if (= time_mode_id 1)
            (begin
                (set time_limit_enabled 1)
                (set time_limit 300)
            )
        )
        (if (= time_mode_id 2)
            (begin
                (set time_limit_enabled 1)
                (set time_limit 600)
            )
        )
        (if (= time_mode_id 3)
            (begin
                (set time_limit_enabled 1)
                (set time_limit 900)
            )
        )
        (if (= time_mode_id 4)
            (begin
                (set time_limit_enabled 1)
                (set time_limit 1200)
            )
        )
        (if (= time_mode_id 5)
            (begin
                (set time_limit_enabled 1)
                (set time_limit 1800)
            )
        )
        (if (= time_mode_id 6)
            (begin
                (set time_limit_enabled 1)
                (set time_limit 2700)
            )
        )
        (if (= time_mode_id 7)
            (begin
                (set time_limit_enabled 1)
                (set time_limit 3600)
            )
        )
    )
)

(script continuous wave_manager
    (begin
        (sleep_until enable_wave_manager 1)
        (if (= wave_number 0)
            (round_start)
        )
        (if (= 1 wave_number)
            (initial_wave)
        )
        (if (and (> 5 wave_number) (> wave_number 1))
            (middle_wave)
        )
        (if (= 5 wave_number)
            (boss_wave)
        )
    )
)

(script static void weapon_drop
    (begin
        (if (= uses_lives 0)
            (sleep 60)
        )
        (if (= game_over_flag 0)
            (sound_impulse_start "sound\sfx\ui\multiplayer\firefight\survival_awarded_weapon" "none" 1)
        )
        (if (= weapon_drops 1)
            (begin
                (object_create_anew_containing "starting_equipment")
                (if (= digsite_content_enabled 1)
                    (object_create_anew_containing "digsite_equipment")
                )
            )
        )
        (if (= weapon_drops 2)
            (begin
                (object_create_anew_containing "starting_equipment_health")
                (object_create_anew_containing "cov_equipment")
                (if (= custom_content_enabled 1)
                    (if (> player_inf_ammo_mode_id 0)
                        (object_create_anew_containing "custom_equipment_sword_inf")
                        (object_create_anew_containing "custom_equipment_sword_lim")
                    )
                )
            )
        )
        (if (= weapon_drops 3)
            (begin
                (object_create_anew_containing "starting_equipment")
                (object_create_anew_containing "cov_equipment")
                (if (= digsite_content_enabled 1)
                    (object_create_anew_containing "digsite_equipment")
                )
                (if (= custom_content_enabled 1)
                    (begin
                        (object_create_anew_containing "custom_equipment_sentinelbeam")
                        (if (> player_inf_ammo_mode_id 0)
                            (object_create_anew_containing "custom_equipment_sword_inf")
                            (object_create_anew_containing "custom_equipment_sword_lim")
                        )
                    )
                )
            )
        )
        (level_specific_vitality)
        (if (= game_over_flag 0)
            (show_hud_help_text 1)
        )
        (hud_set_help_text "ff_weapon_drop")
        (sleep 120)
        (show_hud_help_text 0)
        (sleep 30)
    )
)

